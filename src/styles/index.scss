/*pygen*/
div[data-pygen] {
    min-height: 100px;
    margin: 10px;
    padding: 10px;
    background: ghostwhite;
    box-shadow: 3px 3px grey;
}

.pw-mq-feedback {
    margin: 10px;
    padding: 10px;
    background-color: rgb(203, 233, 244);
    color: rgb(18, 18, 40);
}

@keyframes blinker {
    50% {
        color: rgb(228, 207, 228);
    }
}

.pw-goal-reached {
    font-weight: bold;
    margin: 0 15px;
    padding: 3px;
    border-radius: 3px;
    font-size: 90%;
    color: rgb(59, 29, 59);
    animation: blinker 0.5s linear 4;
}

/* matheditor */
.pw-me-blocker {
    background: gray;
    opacity: 0.5;
    pointer-events: none;
}

.pw-refresh {
    cursor: pointer;
    float: left;
    margin-right: 15px;
}

.pw-refresh>i {
    color: dodgerblue;
}

.pw-mq-group {
    margin-bottom: 60px;
    border-left: 1px solid dodgerblue;
    padding-left: 20px;
}

/* Editor styles */
.pw-me-dlg {
    display: flex;
    flex-direction: column;
    position: fixed;
    margin: auto;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    border: 2px solid lightgray;
    z-index: 100;
    background: white;
    box-shadow: 4px 4px 4px #888888;
    border-radius: 5px;
}

.pw-me-dlg-header {
    background: whitesmoke;
    width: 100%;
    height: 23px;
    border-bottom: 2px solid lightgray;
}

.pw-me-dlg-headertitle {
    color: black;
    margin-left: 8px;
}

.pw-me-dlg-controls {
    background: white;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    margin: 5px;
}

.pw-me-btn-openeditor {
    background: whitesmoke;
    vertical-align: top;
}

.pw-me-btn-openeditor:hover {
    background: white;
}

.pw-me-btn-openeditor>i.fas {
    color: darkred;
}

.pw-me-tabmenu {
    width: 100%;
}

.pw-me-tabspanel {
    width: 100%;
    height: 25px;
    background: lightgray;
}

.pw-me-tabcontents {
    width: 100%;
    background: rgb(227, 227, 227);
}

.pw-me-btn-tab {
    background: lightgray;
    padding: 0 5px;
}

.pw-me-btn-active {
    background: white;
}

.pw-me-tabcontainer {
    width: 100%;
    display: none;
    flex-direction: row;
    flex-wrap: wrap;
}

.pw-me-submitgroup {
    margin: auto;
}

.pw-me-btn-dlgclose {
    color: gray;
    width: 23px;
    height: 23px;
    float: right;
    padding: 0;
}

.pw-me-editorpanel {
    display: flex;
    flex-direction: column;
    background: white;
    flex-grow: 1;
    border: 1px solid lightgray;
}

.pw-me-editorpanel-mathinput {
    width: 97%;
    margin: 5px auto;
    padding: 15px;
    background: white;
    flex-grow: 1;
}

.pw-me-btn-toolbar {
    height: 35px;
    overflow: hidden;
    font-weight: bold;
}

.pw-me-btn-toolbar>span {
    cursor: pointer;
    font-size: 90%;
}

.pw-me-btn-toolbar:hover {
    background: white;
}

.pw-me-editorinput {
    display: inline-flex;
    margin: 4px;
    padding: 4px;
    background: #d5edff;
    border-radius: 5px;
}

.pw-me-editorinput>div>span {
    background: white;
    min-width: 100px;
}

.pw-quill-group {
    margin: 5px 5px 80px 5px;
    border-left: 1px solid gray;
    padding-left: 10px;
}

.pw-me-check {
    align-self: center;
}

.pw-me-editorinput.pw-me-wrong,
.pw-me-mchoice.pw-me-wrong {
    background: rgb(253, 220, 220);
}

.pw-me-editorinput.pw-me-wrong>.pw-me-check>span,
.pw-me-mchoice.pw-me-wrong>.pw-me-check>span {
    color: white;
    margin: 5px;
    background: darkred;
    border-radius: 50%;
    width: 22px;
    height: 22px;
    text-align: center;
    vertical-align: middle;
    padding: 3px 6px;
}

.pw-me-editorinput.pw-me-right,
.pw-me-mchoice.pw-me-right {
    background: #f0fddc;
}

.pw-me-editorinput.pw-me-right>.pw-me-check>span,
.pw-me-mchoice.pw-me-right>.pw-me-check>span {
    color: white;
    margin: 5px;
    background: rgb(53, 138, 36);
    border-radius: 50%;
    width: 22px;
    height: 22px;
    text-align: center;
    vertical-align: middle;
    padding: 3px;
}

.pw-me-editorinput.pw-me-alert,
.pw-me-mchoice.pw-me-alert {
    background: #f2dcfd;
}

.pw-me-editorinput.pw-me-alert>.pw-me-check>span,
.pw-me-mchoice.pw-me-alert>.pw-me-check>span {
    color: white;
    margin: 5px;
    background: rgb(104, 23, 51);
    border-radius: 50%;
    width: 22px;
    height: 22px;
    text-align: center;
    vertical-align: middle;
    padding: 3px;
}

.pw-me-btn-showanswer>i {
    color: darkred;
}

.pw-answer-holder {
    margin: 15px;
    overflow: auto;
    height: 150px;
}

.mq-editable-field {
    background: white;
}

.pw-me-btn-dropdownmenu {
    display: none;
    position: absolute;
    top: 65px;
    left: 140px;
    padding: 5px;
    border: 1px solid gray;
    z-index: 1000;
    background: white;
}

.pw-me-mchoice {
    display: inline-flex;
    vertical-align: middle;
}

.pw-square-root { 
    background-position: 50% 50%;
    background-size: 20px 20px;
    background-repeat: no-repeat;
    background-image: url("./pw-square-root.png");
    display: block;
    width: 20px;
    height: 20px;
}

/*
   * MathQuill v0.10.1, by Han, Jeanine, and Mary
   * http://mathquill.com | maintainers@mathquill.com
   *
   * This Source Code Form is subject to the terms of the
   * Mozilla Public License, v. 2.0. If a copy of the MPL
   * was not distributed with this file, You can obtain
   * one at http://mozilla.org/MPL/2.0/.
   */
@font-face {
    font-family: Symbola;
    src: url(fonts/Symbola.eot);
    src: local("Symbola Regular"), local("Symbola"), url(fonts/Symbola.woff2) format("woff2"), url(fonts/Symbola.woff) format("woff"), url(fonts/Symbola.ttf) format("truetype"), url(fonts/Symbola.svg#Symbola) format("svg");
}

.mq-editable-field {
    display: -moz-inline-box;
    display: inline-block;
}

.mq-editable-field .mq-cursor {
    border-left: 1px solid black;
    margin-left: -1px;
    position: relative;
    z-index: 1;
    padding: 0;
    display: -moz-inline-box;
    display: inline-block;
}

.mq-editable-field .mq-cursor.mq-blink {
    visibility: hidden;
}

.mq-editable-field,
.mq-math-mode .mq-editable-field {
    border: 1px solid gray;
}

.mq-editable-field.mq-focused,
.mq-math-mode .mq-editable-field.mq-focused {
    -webkit-box-shadow: #8bd 0 0 1px 2px, inset #6ae 0 0 2px 0;
    -moz-box-shadow: #8bd 0 0 1px 2px, inset #6ae 0 0 2px 0;
    box-shadow: #8bd 0 0 1px 2px, inset #6ae 0 0 2px 0;
    border-color: #709AC0;
    border-radius: 1px;
}

.mq-math-mode .mq-editable-field {
    margin: 1px;
}

.mq-editable-field .mq-latex-command-input {
    color: inherit;
    font-family: "Courier New", monospace;
    border: 1px solid gray;
    padding-right: 1px;
    margin-right: 1px;
    margin-left: 2px;
}

.mq-editable-field .mq-latex-command-input.mq-empty {
    background: transparent;
}

.mq-editable-field .mq-latex-command-input.mq-hasCursor {
    border-color: ActiveBorder;
}

.mq-editable-field.mq-empty:after,
.mq-editable-field.mq-text-mode:after,
.mq-math-mode .mq-empty:after {
    visibility: hidden;
    content: 'c';
}

.mq-editable-field .mq-cursor:only-child:after,
.mq-editable-field .mq-textarea+.mq-cursor:last-child:after {
    visibility: hidden;
    content: 'c';
}

.mq-editable-field .mq-text-mode .mq-cursor:only-child:after {
    content: '';
}

.mq-editable-field.mq-text-mode {
    overflow-x: auto;
    overflow-y: hidden;
}

.mq-root-block,
.mq-math-mode .mq-root-block {
    display: -moz-inline-box;
    display: inline-block;
    width: 100%;
    padding: 2px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    white-space: nowrap;
    overflow: hidden;
    vertical-align: middle;
}

.mq-math-mode {
    font-variant: normal;
    font-weight: normal;
    font-style: normal;
    font-size: 115%;
    line-height: 1;
    display: -moz-inline-box;
    display: inline-block;
}

.mq-math-mode .mq-non-leaf,
.mq-math-mode .mq-scaled {
    display: -moz-inline-box;
    display: inline-block;
}

.mq-math-mode var,
.mq-math-mode .mq-text-mode,
.mq-math-mode .mq-nonSymbola {
    font-family: "Times New Roman", Symbola, serif;
    line-height: .9;
}

.mq-math-mode * {
    font-size: inherit;
    line-height: inherit;
    margin: 0;
    padding: 0;
    border-color: black;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
    box-sizing: border-box;
}

.mq-math-mode .mq-empty {
    background: #ccc;
}

.mq-math-mode .mq-empty.mq-root-block {
    background: transparent;
}

.mq-math-mode.mq-empty {
    background: transparent;
}

.mq-math-mode .mq-text-mode {
    display: inline-block;
    white-space: pre;
}

.mq-math-mode .mq-text-mode.mq-hasCursor {
    box-shadow: inset darkgray 0 .1em .2em;
    padding: 0 .1em;
    margin: 0 -0.1em;
    min-width: 1ex;
}

.mq-math-mode .mq-font {
    font: 1em "Times New Roman", Symbola, serif;
}

.mq-math-mode .mq-font * {
    font-family: inherit;
    font-style: inherit;
}

.mq-math-mode b,
.mq-math-mode b.mq-font {
    font-weight: bolder;
}

.mq-math-mode var,
.mq-math-mode i,
.mq-math-mode i.mq-font {
    font-style: italic;
}

.mq-math-mode var.mq-f {
    margin-right: 0.2em;
    margin-left: 0.1em;
}

.mq-math-mode .mq-roman var.mq-f {
    margin: 0;
}

.mq-math-mode big {
    font-size: 200%;
}

.mq-math-mode .mq-int>big {
    display: inline-block;
    -webkit-transform: scaleX(0.7);
    -moz-transform: scaleX(0.7);
    -ms-transform: scaleX(0.7);
    -o-transform: scaleX(0.7);
    transform: scaleX(0.7);
    vertical-align: -0.16em;
}

.mq-math-mode .mq-int>.mq-supsub {
    font-size: 80%;
    vertical-align: -1.1em;
    padding-right: .2em;
}

.mq-math-mode .mq-int>.mq-supsub>.mq-sup>.mq-sup-inner {
    vertical-align: 1.3em;
}

.mq-math-mode .mq-int>.mq-supsub>.mq-sub {
    margin-left: -0.35em;
}

.mq-math-mode .mq-roman {
    font-style: normal;
}

.mq-math-mode .mq-sans-serif {
    font-family: sans-serif, Symbola, serif;
}

.mq-math-mode .mq-monospace {
    font-family: monospace, Symbola, serif;
}

.mq-math-mode .mq-overline {
    border-top: 1px solid black;
    margin-top: 1px;
}

.mq-math-mode .mq-underline {
    border-bottom: 1px solid black;
    margin-bottom: 1px;
}

.mq-math-mode .mq-binary-operator {
    padding: 0 0.2em;
    display: -moz-inline-box;
    display: inline-block;
}

.mq-math-mode .mq-supsub {
    text-align: left;
    font-size: 90%;
    vertical-align: -0.5em;
}

.mq-math-mode .mq-supsub.mq-sup-only {
    vertical-align: .5em;
}

.mq-math-mode .mq-supsub.mq-sup-only .mq-sup {
    display: inline-block;
    vertical-align: text-bottom;
}

.mq-math-mode .mq-supsub .mq-sup {
    display: block;
}

.mq-math-mode .mq-supsub .mq-sub {
    display: block;
    float: left;
}

.mq-math-mode .mq-supsub .mq-binary-operator {
    padding: 0 .1em;
}

.mq-math-mode .mq-supsub .mq-fraction {
    font-size: 70%;
}

.mq-math-mode sup.mq-nthroot {
    font-size: 80%;
    vertical-align: 0.8em;
    margin-right: -0.6em;
    margin-left: .2em;
    min-width: .5em;
}

.mq-math-mode .mq-paren {
    padding: 0 .1em;
    vertical-align: top;
    -webkit-transform-origin: center .06em;
    -moz-transform-origin: center .06em;
    -ms-transform-origin: center .06em;
    -o-transform-origin: center .06em;
    transform-origin: center .06em;
}

.mq-math-mode .mq-paren.mq-ghost {
    color: silver;
}

.mq-math-mode .mq-paren+span {
    margin-top: .1em;
    margin-bottom: .1em;
}

.mq-math-mode .mq-array {
    vertical-align: middle;
    text-align: center;
}

.mq-math-mode .mq-array>span {
    display: block;
}

.mq-math-mode .mq-operator-name {
    font-family: Symbola, "Times New Roman", serif;
    line-height: .9;
    font-style: normal;
}

.mq-math-mode var.mq-operator-name.mq-first {
    padding-left: .2em;
}

.mq-math-mode var.mq-operator-name.mq-last,
.mq-math-mode .mq-supsub.mq-after-operator-name {
    padding-right: .2em;
}

.mq-math-mode .mq-fraction {
    font-size: 90%;
    text-align: center;
    vertical-align: -0.4em;
    padding: 0 .2em;
}

.mq-math-mode .mq-fraction,
.mq-math-mode .mq-large-operator,
.mq-math-mode x:-moz-any-link {
    display: -moz-groupbox;
}

.mq-math-mode .mq-fraction,
.mq-math-mode .mq-large-operator,
.mq-math-mode x:-moz-any-link,
.mq-math-mode x:default {
    display: inline-block;
}

.mq-math-mode .mq-numerator,
.mq-math-mode .mq-denominator,
.mq-math-mode .mq-dot-recurring {
    display: block;
}

.mq-math-mode .mq-numerator {
    padding: 0 0.1em;
}

.mq-math-mode .mq-denominator {
    border-top: 1px solid;
    float: right;
    width: 100%;
    padding: 0.1em;
}

.mq-math-mode .mq-dot-recurring {
    text-align: center;
    height: 0.3em;
}

.mq-math-mode .mq-sqrt-prefix {
    padding-top: 0;
    position: relative;
    top: 0.1em;
    vertical-align: top;
    -webkit-transform-origin: top;
    -moz-transform-origin: top;
    -ms-transform-origin: top;
    -o-transform-origin: top;
    transform-origin: top;
}

.mq-math-mode .mq-sqrt-stem {
    border-top: 1px solid;
    margin-top: 1px;
    padding-left: .15em;
    padding-right: .2em;
    margin-right: .1em;
    padding-top: 1px;
}

.mq-math-mode .mq-diacritic-above {
    display: block;
    text-align: center;
    line-height: .4em;
}

.mq-math-mode .mq-diacritic-stem {
    display: block;
    text-align: center;
}

.mq-math-mode .mq-hat-prefix {
    display: block;
    text-align: center;
    line-height: .95em;
    margin-bottom: -0.7em;
    transform: scaleX(1.5);
    -moz-transform: scaleX(1.5);
    -o-transform: scaleX(1.5);
    -webkit-transform: scaleX(1.5);
}

.mq-math-mode .mq-hat-stem {
    display: block;
}

.mq-math-mode .mq-large-operator {
    vertical-align: -0.2em;
    padding: .2em;
    text-align: center;
}

.mq-math-mode .mq-large-operator .mq-from,
.mq-math-mode .mq-large-operator big,
.mq-math-mode .mq-large-operator .mq-to {
    display: block;
}

.mq-math-mode .mq-large-operator .mq-from,
.mq-math-mode .mq-large-operator .mq-to {
    font-size: 80%;
}

.mq-math-mode .mq-large-operator .mq-from {
    float: right;
    /* take out of normal flow to manipulate baseline */
    width: 100%;
}

.mq-math-mode,
.mq-math-mode .mq-editable-field {
    cursor: text;
    font-family: Symbola, "Times New Roman", serif;
}

.mq-math-mode .mq-overarc {
    border-top: 1px solid black;
    -webkit-border-top-right-radius: 50% .3em;
    -moz-border-radius-topright: 50% .3em;
    border-top-right-radius: 50% .3em;
    -webkit-border-top-left-radius: 50% .3em;
    -moz-border-radius-topleft: 50% .3em;
    border-top-left-radius: 50% .3em;
    margin-top: 1px;
    padding-top: 0.15em;
}

.mq-math-mode .mq-overarrow {
    min-width: .5em;
    border-top: 1px solid black;
    margin-top: 1px;
    padding-top: 0.2em;
    text-align: center;
}

.mq-math-mode .mq-overarrow:before {
    display: block;
    position: relative;
    top: -0.34em;
    font-size: 0.5em;
    line-height: 0em;
    content: '\27A4';
    text-align: right;
}

.mq-math-mode .mq-overarrow.mq-arrow-left:before {
    -moz-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: FlipH;
    -ms-filter: "FlipH";
}

.mq-math-mode .mq-overarrow.mq-arrow-both {
    vertical-align: text-bottom;
}

.mq-math-mode .mq-overarrow.mq-arrow-both.mq-empty {
    min-height: 1.23em;
}

.mq-math-mode .mq-overarrow.mq-arrow-both.mq-empty:after {
    top: -0.34em;
}

.mq-math-mode .mq-overarrow.mq-arrow-both:before {
    -moz-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: FlipH;
    -ms-filter: "FlipH";
}

.mq-math-mode .mq-overarrow.mq-arrow-both:after {
    display: block;
    position: relative;
    top: -2.3em;
    font-size: 0.5em;
    line-height: 0em;
    content: '\27A4';
    visibility: visible;
    text-align: right;
}

.mq-math-mode .mq-matrix {
    vertical-align: middle;
    margin-left: 0.1em;
    margin-right: 0.1em;
}

.mq-math-mode .mq-matrix table {
    width: auto;
    border-bottom: none;
    border-spacing: 3px;
    border-collapse: separate;
}

.mq-math-mode .mq-matrix table.mq-rows-1 {
    /* better alignment when there's just one row */
    vertical-align: middle;
    margin-bottom: 1px;
}

.mq-math-mode .mq-matrix td {
    border: none;
    width: auto;
    /* defensive resets */
    padding: 0.1em 0.3em;
    vertical-align: baseline;
}

.mq-math-mode .mq-selection,
.mq-editable-field .mq-selection,
.mq-math-mode .mq-selection .mq-non-leaf,
.mq-editable-field .mq-selection .mq-non-leaf,
.mq-math-mode .mq-selection .mq-scaled,
.mq-editable-field .mq-selection .mq-scaled {
    background: #B4D5FE !important;
    background: Highlight !important;
    color: HighlightText;
    border-color: HighlightText;
}

.mq-math-mode .mq-selection .mq-matrixed,
.mq-editable-field .mq-selection .mq-matrixed {
    background: #39F !important;
}

.mq-math-mode .mq-selection .mq-matrixed-container,
.mq-editable-field .mq-selection .mq-matrixed-container {
    filter: progid:DXImageTransform.Microsoft.Chroma(color='#3399FF') !important;
}

.mq-math-mode .mq-selection.mq-blur,
.mq-editable-field .mq-selection.mq-blur,
.mq-math-mode .mq-selection.mq-blur .mq-non-leaf,
.mq-editable-field .mq-selection.mq-blur .mq-non-leaf,
.mq-math-mode .mq-selection.mq-blur .mq-scaled,
.mq-editable-field .mq-selection.mq-blur .mq-scaled,
.mq-math-mode .mq-selection.mq-blur .mq-matrixed,
.mq-editable-field .mq-selection.mq-blur .mq-matrixed {
    background: #D4D4D4 !important;
    color: black;
    border-color: black;
}

.mq-math-mode .mq-selection.mq-blur .mq-matrixed-container,
.mq-editable-field .mq-selection.mq-blur .mq-matrixed-container {
    filter: progid:DXImageTransform.Microsoft.Chroma(color='#D4D4D4') !important;
}

.mq-editable-field .mq-textarea,
.mq-math-mode .mq-textarea {
    position: relative;
    -webkit-user-select: text;
    -moz-user-select: text;
    user-select: text;
}

.mq-editable-field .mq-textarea *,
.mq-math-mode .mq-textarea *,
.mq-editable-field .mq-selectable,
.mq-math-mode .mq-selectable {
    -webkit-user-select: text;
    -moz-user-select: text;
    user-select: text;
    position: absolute;
    clip: rect(1em 1em 1em 1em);
    -webkit-transform: scale(0);
    -moz-transform: scale(0);
    -ms-transform: scale(0);
    -o-transform: scale(0);
    transform: scale(0);
    resize: none;
    width: 1px;
    height: 1px;
    box-sizing: content-box;
}

.mq-math-mode .mq-matrixed {
    background: white;
    display: -moz-inline-box;
    display: inline-block;
}

.mq-math-mode .mq-matrixed-container {
    filter: progid:DXImageTransform.Microsoft.Chroma(color='white');
    margin-top: -0.1em;
}

/* Josep fixes */

table.mq-non-leaf td[mathquill-block-id] {
    padding: 4px 8px;
    text-align: center;
}

.mq-math-mode sup.mq-nthroot {
    font-size: 75%;
    vertical-align: 0.4em;
}

.mq-root-block {
    padding: 5px;
}

.mq-root-block,
.mq-math-mode .mq-root-block {
    padding: 5px;
}

/*
  .mq-math-mode .mq-supsub.mq-sup-only {
    vertical-align: .5em!important;
  }
  */
.mq-math-mode .mq-supsub.mq-sup-only>.mq-sup {
    font-size: 90%;
}

.mq-nthroot.mq-non-leaf {
    padding: 8px 0 !important;
}


/*larger editor on pygen*/
/*TODO: must be reduced to standard in cloze*/
div[data-pygen] span.mq-editable-field {
    min-width: 250px;
}

div[data-pygen] .pygen-cloze span.mq-editable-field {
    min-width: initial;
}

div[data-pygen] .pw-me-editorinput {
    margin-bottom: 40px;
}

/* Power in palette */
div.pw-me-tabmenu .mq-supsub.mq-non-leaf.mq-sup-only {
    vertical-align: super !important;
}