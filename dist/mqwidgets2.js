/*! For license information please see mqwidgets2.js.LICENSE.txt */
!function(){"use strict";var e={161:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.I18n=void 0;var r=n(66),o={ca:{check:"Comprova",General:"General","Símbols":"Símbols",Geometria:"Geometria",Intervals:"Intervals",Funcions:"Funcions",right_answer:"Resposta correcta",close:"Tancar",open_editor:"Obrir l'editor",show_answer:"Mostra la solució",choose_option:"Tria una opció",next:"Següent",goal_reached:"Repte aconseguit!",wildcard:"Comodí",answer:"Solució",matheditor:"Editor matemàtic",accept:"Acceptar",cancel:"Cancel·lar",expected_ans:"S'esperava la resposta",error_verifying:"Ho sentim però hi ha hagut un problema a l'hora de verificar la resposta.",wrong_answer:"Resposta incorrecta. Intentau de nou.",sym_notallowed:"No es permet el símbol <b>${1}</b> en la resposta.",sym_once:"El símbol <b>${1}</b> només es pot emprar com a màxim una vegada en la resposta.",error_cantprocess:"Error: Hi ha respostes donades que no es poden processar. Provau d'eliminar els espais en blanc.",ans_missing:"Falten respostes"},es:{check:"Comprueba",General:"General","Símbols":"Símbolos",Geometria:"Geometria",Intervals:"Intervalos",Funcions:"Funciones",right_answer:"Respuesta correcta",close:"Cerrar",open_editor:"Abrir el editor",show_answer:"Muestra la solución",choose_option:"Elige una opción",next:"Siguiente",goal_reached:"¡Reto conseguido!",wildcard:"Comodín",answer:"Solución",matheditor:"Editor matemático",accept:"Aceptar",cancel:"Cancelar",expected_ans:"Se esperaba la respuesta",error_verifying:"Lo sentimos, ha habido un problema cuando se verificaba la respuesta.",wrong_answer:"Respuesta incorrecta. Inténtalo de nuevo.",sym_notallowed:"No se permite el símbolo <b>${1}</b> en la respuesta.",sym_once:"El símbolo <b>${1}</b> solo es puede emplear una vez como máximo en la respuesta.",error_cantprocess:"Error: Hay respuestas que no se pueden procesar. Intente eliminar los espacios en blanco.",ans_missing:"Faltan respuestas"},en:{check:"Check",General:"General","Símbols":"Symbols",Geometria:"Geometry",Intervals:"Intervals",Funcions:"Functions",right_answer:"Right answer",close:"Close",open_editor:"Open the editor",show_answer:"Show the answer",choose_option:"Choose an option",next:"Next",goal_reached:"Goal acomplished!",wildcard:"Wildcard",answer:"Answer",matheditor:"Math editor",accept:"Accept",cancel:"Cancel",expected_ans:"The expected answer is",error_verifying:"We are sorry. There has been a problem while verifying the answer.",wrong_answer:"Wrong answer. Try it again.",sym_notallowed:"The symbol <b>${1}</b> is not allowed in the answer.",sym_once:"The symbol <b>${1}</b> can only be used once in the answer.",error_cantprocess:"Error: There are some answers that can't be processed. Try removing white spaces.",ans_missing:"There are some blank answers"}};var a=function(){if("undefined"==typeof window)return"en";var e=window.navigator,t=e.languages&&e.languages[0]||e.language||e.browserLanguage||e.userLanguage||e.systemLanguage||"en_US";return(t=t.toLowerCase().replace(/-/,"_")).toLowerCase().split("_")[0]}();t.I18n=function(e){var t=r.cfg.LANG||a,n=o[t];n||(console.error("Cannot find translations in ",t,". Using fallback [en]"),n=o.en);for(var i=n[e]||e||"",s=0;s<(arguments.length<=1?0:arguments.length-1);s++)i=i.replace("${"+(s+1)+"}",s+1<1||arguments.length<=s+1?void 0:arguments[s+1]);return i}},800:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createSubmitButtonForGroup=t.bindSubmitActionButton=void 0;var r=n(247),o=n(66),a=n(161),i=n(332),s=n(830),l=(new Date).getTime();function c(e,t,n){var c=o.shared[e],u=Object.keys(c).map((function(e){return parseInt(e)}));t.off(),t.on("click",(function(e){e.preventDefault();var t=(new Date).getTime();if(l&&t-l<1e3)console.error("Too frequently checks are blocked!");else for(var p=0,f=u.length;p<f;p++){var d=u[p],h=c[d];if(h.getStatus()==o.cfg.STATUS.MODIFIED){var y=h.latex()||[];if(0===y.length||(0,r.has_empty_answers)(y))h.checkMsg(-1,(0,a.I18n)("ans_missing")),console.error("Editor contains empty answers");else if(1!=h.getStatus()&&y.length){if(h.getDefinition().right_answer&&h.getWrong_attemps()>o.cfg.MAX_ATTEMPTS&&!h.isPigen()){h.showAnswer();continue}if(h.getQType()==o.cfg.QTYPES.M||h.getQType()==o.cfg.QTYPES.Ms){var v=h.isComodiUsed()?5:10;h.getDefinition().ans==y[0]?h.checkMsg(1,"Molt bé!"):(v=0,h.increment_wrong(),h.checkMsg(0,"Incorrecte")),n&&n(v);continue}l=t;var m={latex:y,qid:d},b="";if((b=null!=h.getDefinition().anse?atob(h.getDefinition().anse||""):h.getDefinition().ans||"")&&1==y.length&&(0,s.isNumeric)(y[0])&&(0,s.isNumeric)(b)){var g=parseFloat(y[0]),w=(parseFloat(b),v=h.isComodiUsed()?5:10,parseFloat(b)-g),_=0;h.getDefinition().rules&&h.getDefinition().rules.precision&&(_=h.getDefinition().rules.precision),Math.abs(w)<=_?h.checkMsg(1,"Molt bé!"):(v=0,h.increment_wrong(),h.checkMsg(0,"Incorrecte")),n&&n(v);continue}(0,s.copyPropsFromTo)(h.getDefinition(),m),o.cfg.pageInfo&&(m.pageInfo=o.cfg.pageInfo,h.getHash()||h.setHash((0,s.MD5)(m.formulation+"_"+(m.pageInfo.bookId||0)+"_"+(m.pageInfo.chapterId||0))),m.hash=h.getHash()),i.engineCAS.compare(m).then((function(e){var t=c[e.qid];0==e.correct&&t.increment_wrong(),t.checkMsg(e.correct,e.msg);var r=e.correct?t.isComodiUsed()?5:10:0;n&&n(r)}),(function(e){console.error("Error",e)}))}}}}))}t.bindSubmitActionButton=c,t.createSubmitButtonForGroup=function(e){var t=$('<button class="btn btn-sm btn-primary pw-me-submitgroup"><i class="fas fa-check"></i> '.concat((0,a.I18n)("check"),"</button>"));return c(e,t),t}},247:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.has_empty_answers=t.extractMatrices=void 0;var n=/\\begin{pmatrix}(.*?)\\end{pmatrix}/g;function r(e){for(var t=[],r=null,o=function(){var e=[];r[1].split("\\\\").forEach((function(t){var n=t.split("&");e.push(n)})),t.push(e)};null!==(r=n.exec(e));)o();return t}t.extractMatrices=r;var o=function(e){for(var t=e.length,n=0;n<t;n++)for(var r=e[n],o=r.length,a=0;a<o;a++)if(!r[a])return!0;return!1};t.has_empty_answers=function(e){for(var t=0,n=e.length;t<n;t++){var a=e[t];if(""==a||a&&!a.trim())return!0;for(var i=r(a),s=0,l=i.length;s<l;s++)if(o(i[s]))return!0}return!1}},968:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.LevelIndicator=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.numLevels=t,this.container=$('<div style="display:inline-block;font-size:90%;" data-toggle="tooltip"></div>'),this.levelIcons=[];for(var n=0;n<t;n++){var r=$('<i class="fas fa-pepper-hot" style="color:lightgray;"></i>');this.container.append(r),this.levelIcons.push(r)}}var t,r,o;return t=e,(r=[{key:"$div",get:function(){return this.container}},{key:"setLevel",value:function(e){e<0?e=0:e>this.numLevels&&(e=this.numLevels);for(var t=0;t<this.numLevels;t++)t<e?this.levelIcons[t].css("color","darkred"):this.levelIcons[t].css("color","lightgray");this.container.attr("data-original-title","Nivell "+e),this.container.removeAttr("title")}},{key:"setVisible",value:function(e){this.container.css("display",e?"":"none")}}])&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.LevelIndicator=r},281:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.PwDialog=void 0;var r=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id="pwdlg_"+Math.random().toString(32).substring(2),this.window=$('<div id="'+this.id+'" class="pw-me-dlg" style="width:'+n+"px;height:"+r+'px;display:none;"></div>');var o=$('<div class="pw-me-dlg-header"></div>');this.topBar=o;var a=$('<span class="pw-me-dlg-headertitle">'+t+"</span>");this.closeBtn=$('<button class="btn btn-sm pw-me-btn-dlgclose" title="Tancar"><i class="fas fa-times"></i></button>');var i=this;this.closeBtn.on("click",(function(e){e.preventDefault(),i.window.css("display","none")})),o.append(a),o.append(this.closeBtn),this.window.append(o),$("body").append(this.window);var s,l,c,u,p=!1,f=0,d=0;this.dragStart=function(e){"touchstart"===e.type?(c=e.touches[0].clientX-f,u=e.touches[0].clientY-d):(c=e.clientX-f,u=e.clientY-d),e.target===o[0]&&(p=!0)},this.dragEnd=function(e){c=s,u=l,p=!1},this.setTranslate=function(e,t,n){n.style.transform="translate3d("+e+"px, "+t+"px, 0)"},this.drag=function(e){p&&(e.preventDefault(),"touchmove"===e.type?(s=e.touches[0].clientX-c,l=e.touches[0].clientY-u):(s=e.clientX-c,l=e.clientY-u),f=s,d=l,i.setTranslate(s,l,i.window[0]))},o[0].addEventListener("touchstart",this.dragStart,!1),o[0].addEventListener("touchend",this.dragEnd,!1),o[0].addEventListener("touchmove",this.drag,!1),o[0].addEventListener("mousedown",this.dragStart,!1),o[0].addEventListener("mouseup",this.dragEnd,!1),o[0].addEventListener("mousemove",this.drag,!1)}var t,r,o;return t=e,(r=[{key:"append",value:function(e){this.window.append(e)}},{key:"show",value:function(){this.window.css("display","initial")}},{key:"close",value:function(){this.window.css("display","none")}},{key:"remove",value:function(){this.closeBtn.off(),this.window.remove(),this.topBar[0].removeEventListener("touchstart",this.dragStart),this.topBar[0].removeEventListener("touchend",this.dragEnd),this.topBar[0].removeEventListener("touchmove",this.drag),this.topBar[0].removeEventListener("mousedown",this.dragStart),this.topBar[0].removeEventListener("mouseup",this.dragEnd),this.topBar[0].removeEventListener("mousemove",this.drag)}},{key:"dispose",value:function(){this.remove()}}])&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.PwDialog=r},541:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorDialog=void 0;var u=n(66),p=n(161),f=n(830),d=n(786),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,n,r,s=i(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=l(e=s.call(this,'<i style="color:darkred;" class="fas fa-square-root-alt"></i> '+(0,p.I18n)("matheditor"),500,320)),n="gid_"+Math.random().toString(32).substring(2),r=u.cfg.QTYPES.P;e.editorPanel=new d.EditorPanel(e.window,n,{},r,!1);var o=$('<div class="pw-me-dlg-controls"></div>'),a=$('<button class="btn btn-sm btn-primary">'+(0,p.I18n)("accept")+"</button>"),i=$('<button class="btn btn-sm btn-outline-primary">'+(0,p.I18n)("cancel")+"</button>");return o.append(a),o.append(i),e.append(o),a.on("click",(function(e){e.preventDefault(),t.acceptFn&&t.acceptFn(t),t.close()})),i.on("click",(function(e){e.preventDefault(),t.cancelFn&&t.cancelFn(t),t.close()})),e}return t=c,(n=[{key:"latex",value:function(e){return null!=e?(this.editorPanel.latex(e),[""]):this.editorPanel.latex().map((function(e){return(0,f.sanitizeLaTeX)(e)}))}},{key:"show",value:function(){this.window.css("display",""),this.editorPanel.focus()}},{key:"dispose",value:function(){this.editorPanel.dispose(),this.window.find("button").off(),this.dispose()}},{key:"reflow",value:function(){this.editorPanel.reflow()}},{key:"setDefinition",value:function(e){this.editorPanel.setDefinition(e)}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n(281).PwDialog);t.EditorDialog=h},44:function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorBase=void 0;var o=n(66),a=function(){function e(t,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.gid=n,this.status=o.cfg.STATUS.UNMODIFIED,this.wrong_attemps=0,this.isAnswerShown=!1,this.def=r,this.qtype=a,this.pigen=!1,this.comodi=!1,this.hash=""}var t,n,a;return t=e,(n=[{key:"get_gid",value:function(){return this.gid}},{key:"setDefinition",value:function(e){this.def=e,this.ansType=e.ansType}},{key:"getDefinition",value:function(){return this.def}},{key:"increment_wrong",value:function(){this.wrong_attemps+=1}},{key:"getWrong_attemps",value:function(){return this.wrong_attemps}},{key:"getStatus",value:function(){return this.status}},{key:"setStatus",value:function(e){this.status=e}},{key:"getQType",value:function(){return this.qtype}},{key:"setQType",value:function(e){this.qtype=e}},{key:"isPigen",value:function(){return this.pigen}},{key:"setPigen",value:function(e){this.pigen=e}},{key:"isComodiUsed",value:function(){return this.comodi}},{key:"setComodiUsed",value:function(e){this.comodi=e}},{key:"getHash",value:function(){return this.hash}},{key:"setHash",value:function(e){this.hash=e}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.EditorBase=a},437:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorCloze=void 0;var u=n(66),p=n(161),f=n(830),d=n(281),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,n,r,s=i(c);function c(e,t,n,r,o){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var i=l(a=s.call(this,e,t,n,r));a.dlg_btn_el=null,a.quill_el_container=$('<div class="pw-me-editorinput"></div>');var p=$("<span>"+o+"</span>");return a.check_el=$('<div class="pw-me-check"></div>'),a.parent.append(a.quill_el_container),a.quill_el_container.append(p),a.mathInput=(0,u.StaticMath)(p[0]),a.mathInput.innerFields.forEach((function(e){e.__controller.textarea.on("keyup",(function(e){e.preventDefault(),i.status!=u.cfg.STATUS.MODIFIED&&(i.check_el.html(""),i.status=u.cfg.STATUS.MODIFIED,i.quill_el_container.removeClass("pw-me-right pw-me-wrong pw-me-alert"))}))})),a.quill_el_container.append(a.check_el),a}return t=c,(n=[{key:"clear",value:function(){this.mathInput.innerFields.forEach((function(e){return e.latex("")})),this.check_el.html(""),this.status=u.cfg.STATUS.UNMODIFIED,this.quill_el_container.removeClass("pw-me-right pw-me-wrong pw-me-alert")}},{key:"focus",value:function(){this.mathInput.focus()}},{key:"latex",value:function(e){if(null==e){var t=[];this.mathInput.innerFields;for(var n=this.mathInput.innerFields,r=0,o=n.length;r<o;r++)t.push(n[r].latex());return t}return this.mathInput.latex(e),this.status=u.cfg.STATUS.UNMODIFIED,[]}},{key:"checkMsg",value:function(e,t){this.status=e;var n="";1==e?(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-check"></i></span>',this.quill_el_container.addClass("pw-me-right")):0==e?(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-times"></i></span>',this.quill_el_container.addClass("pw-me-wrong")):(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-exclamation-triangle"></i></span>',this.quill_el_container.addClass("pw-me-alert")),this.check_el.html(n)}},{key:"get_qid",value:function(){return this.mathInput.id}},{key:"dispose",value:function(){this.mathInput.revert(),this.quill_el_container.find("button").off()}},{key:"reflow",value:function(){this.mathInput.reflow(),this.status=u.cfg.STATUS.UNMODIFIED}},{key:"showAnswer",value:function(){if(this.def)if(this.def.right_answer){var e=this;if(!u.sharedDlg.showAnswerDlg){var t=new d.PwDialog((0,p.I18n)("right_answer"),400,250);u.sharedDlg.showAnswerDlg=t;var n=$('<div class="pw-answer-holder"></div>');t.append(n);var r=$('<button class="btn btn-sm btn-primary" style="margin-left: 15px;">'+(0,p.I18n)("close")+"</button>");t.append(r),r.on("click",(function(e){e.preventDefault(),t.close()}))}e.isAnswerShown||(e.isAnswerShown=!0,e.status=u.cfg.STATUS.UNMODIFIED,e.dlg_btn_el&&e.dlg_btn_el.prop("disabled",!0));var o=u.sharedDlg.showAnswerDlg,a=o.window.find(".pw-answer-holder");e.def&&(a.html(atob(e.def.right_answer)+"<p><br></p>"),(0,f.reflowLatex)(),o.show())}else console.error("Cannot show answer because, ",this.def.right_answer);else console.error("Cannot show answer because, def is null")}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n(44).EditorBase);t.EditorCloze=h},980:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorInput=void 0;var u=n(332),p=n(66),f=n(161),d=n(830),h=n(281),y=n(541),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,n,r,s=i(c);function c(e,t,n,r){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var a=l(o=s.call(this,e,t,n,r));o.quill_el_container=$('<div class="pw-me-editorinput"></div>'),o.quill_blocker=$("<div></div>");var i=$("<span></span>");o.quill_blocker.append(i),o.check_el=$('<div class="pw-me-check"></div>'),o.quill_el_container.append(o.quill_blocker);var u=r===p.cfg.QTYPES.S;return o.parent.append(o.quill_el_container),o.mathInput=(0,p.MathField)(i[0],{handlers:{edit:function(){a.mathInput.latex(),a.status!=p.cfg.STATUS.MODIFIED&&(a.check_el.html(""),a.status=p.cfg.STATUS.MODIFIED,a.quill_el_container.removeClass("pw-me-right pw-me-wrong pw-me-alert"))}}}),u&&(o.dlg_btn_el=$('<button class="btn btn-sm pw-me-btn-openeditor" title="'+(0,f.I18n)("open_editor")+'"><i class="fas fa-square-root-alt"></i></button>'),o.quill_el_container.append(o.dlg_btn_el),o.dlg_btn_el.on("click",(function(e){e.preventDefault();var t=p.sharedDlg.editordlg;t||(t=new y.EditorDialog,p.sharedDlg.editordlg=t),t.acceptFn=function(e){a.mathInput.latex(e.latex())},t.setDefinition(a.def),t.show(),t.latex(a.mathInput.latex())}))),o.quill_el_container.append(o.check_el),o}return t=c,(n=[{key:"get_qid",value:function(){return this.mathInput.id}},{key:"clear",value:function(){this.mathInput.latex(""),this.check_el.html(""),this.status=p.cfg.STATUS.UNMODIFIED,this.quill_el_container.removeClass("pw-me-right pw-me-wrong pw-me-alert")}},{key:"focus",value:function(){this.mathInput.focus()}},{key:"latex",value:function(e){return null==e?[(0,d.sanitizeLaTeX)(this.mathInput.latex())]:(this.mathInput.latex(e),this.status=p.cfg.STATUS.UNMODIFIED,[])}},{key:"checkMsg",value:function(e,t){this.status=e;var n=null;1==e?(n='<span data-toggle="tooltip" title="'+t+'"><i class="'+p.cfg.RIGHT_ICON+'"></i></span>',this.quill_el_container.addClass("pw-me-right")):0==e?(n='<span data-toggle="tooltip" title="'+t+'"><i class="'+p.cfg.WRONG_ICON+'"></i></span>',this.quill_el_container.addClass("pw-me-wrong")):(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-exclamation-triangle"></i></span>',this.quill_el_container.addClass("pw-me-alert")),this.check_el.html(n)}},{key:"dispose",value:function(){this.mathInput.revert(),this.quill_el_container.find("button").off()}},{key:"showAnswer",value:function(){if(this.def.right_answer){var e=this;if(!p.sharedDlg.showAnswerDlg){var t=new h.PwDialog((0,f.I18n)("right_answer"),400,250);p.sharedDlg.showAnswerDlg=t;var n=$('<div class="pw-answer-holder"></div>');t.append(n);var r=$('<button class="btn btn-sm btn-primary" style="margin-left: 15px;">'+(0,f.I18n)("close")+"</button>");t.append(r),r.on("click",(function(e){e.preventDefault(),t.close()}))}e.isAnswerShown||(e.isAnswerShown=!0,e.status=p.cfg.STATUS.UNMODIFIED,e.quill_blocker.addClass("pw-me-blocker"),e.dlg_btn_el&&e.dlg_btn_el.prop("disabled",!0)),n=(t=p.sharedDlg.showAnswerDlg).window.find(".pw-answer-holder"),e.def&&(n.html(atob(e.def.right_answer)+"<p><br></p>"),(0,d.reflowLatex)(),t.show())}else console.error("Cannot show answer because, ",this.def.right_answer)}},{key:"increment_wrong",value:function(){if(this.wrong_attemps,p.cfg.MAX_ATTEMPTS,this.pigen,this.wrong_attemps+=1,this.wrong_attemps==p.cfg.MAX_ATTEMPTS+1&&!this.pigen){this.def;var e=$('<button class="btn btn-sm" title="'+(0,f.I18n)("show_answer")+'"><i class="far fa-question-circle"></i></button>'),t=this;e.on("click",(function(e){t.showAnswer()})),this.def.right_answer?this.quill_el_container.append(e):u.engineCAS.getAnswer(this.def).then((function(n){n.right_answer&&t.def?(t.def.right_answer=n.right_answer,t.quill_el_container.append(e)):n.msg&&console.error(n.msg)}),(function(e){console.error(e)}))}}},{key:"reflow",value:function(){this.mathInput.reflow(),this.status=p.cfg.STATUS.UNMODIFIED}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n(44).EditorBase);t.EditorInput=v},203:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorMChoice=void 0;var u=n(66),p=n(161),f=n(830),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,n,r,s=i(c);function c(e,t,n,r,o){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a=s.call(this,e,t,n,r),"string"==typeof o&&(o=o.split(";"));var i=l(a);a.selectedIndex="",a.gid=t,a.qid=Math.floor(1e4*Math.random())+1e4,a.options=o||[],a.status=u.cfg.STATUS.UNMODIFIED,a.parent=e,a.wrong_attemps=0,a.quill_el_container=$('<div class="pw-me-mchoice"></div>'),a.check_el=$('<div class="pw-me-check"></div>');var d=$('<div class="btn-group"></div>');a.btn_action=$('<button type="button" style="background:white;" class="btn btn-outline-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'+(0,p.I18n)("choose_option")+"</button>");var h=$('<div class="dropdown-menu"></div>');return d.append(a.btn_action),o.forEach((function(e,t){var n=$('<a class="dropdown-item" href="#">'+e+"</a>");n.on("click",(function(e){e.preventDefault(),i.selectedIndex=t+"",i.btn_action.html(n.html()),i.status!=u.cfg.STATUS.MODIFIED&&(i.check_el.html(""),i.status=u.cfg.STATUS.MODIFIED,i.quill_el_container.removeClass("pw-me-right pw-me-wrong pw-me-alert"))})),h.append(n)})),d.append(h),a.quill_el_container.append(d),a.quill_el_container.append(a.check_el),a.parent.append(a.quill_el_container),(0,f.reflowLatex)(),a}return t=c,(n=[{key:"showAnswer",value:function(){}},{key:"clear",value:function(){this.selectedIndex="",this.btn_action.html(""),this.check_el.html(""),this.status=u.cfg.STATUS.UNMODIFIED,this.quill_el_container.removeClass("pw-me-right pw-me-wrong pw-me-alert")}},{key:"focus",value:function(){this.btn_action.focus()}},{key:"latex",value:function(e){return[this.selectedIndex]}},{key:"checkMsg",value:function(e,t){this.status=e;var n="";1==e?(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-check"></i></span>',this.quill_el_container.addClass("pw-me-right")):0==e?(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-times"></i></span>',this.quill_el_container.addClass("pw-me-wrong")):(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-exclamation-triangle"></i></span>',this.quill_el_container.addClass("pw-me-alert")),this.check_el.html(n)}},{key:"dispose",value:function(){this.quill_el_container.off()}},{key:"get_qid",value:function(){return this.qid}},{key:"reflow",value:function(){this.status=u.cfg.STATUS.UNMODIFIED}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n(44).EditorBase);t.EditorMChoice=d},142:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorMChoiceCheckbox=void 0;var u=n(66),p=n(830),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,n,r,s=i(c);function c(e,t,n,r,o){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(a=s.call(this,e,t,n,r)).multipleAnswers=o||!1;var i=n.symbols,f=l(a);a.selectedIndex="",a.gid=t,a.qid=Math.floor(1e4*Math.random())+1e4,a.options=i||[],a.status=u.cfg.STATUS.UNMODIFIED,a.parent=e,a.wrong_attemps=0,a.quill_el_container=$('<div class="pw-me-mchoice"></div>'),a.check_el=$('<div class="pw-me-check"></div>');var d=$("<div></div>"),h="rgid_"+Math.random().toString(32).substring(2),y=[];return i.forEach((function(e,t){var n="raid_"+Math.random().toString(32).substring(2),r=$('<div class="form-check"></div>'),o=null;o=f.multipleAnswers?$('<input class="form-check-input" type="checkbox" id="'+n+'" value="'+t+'"/>'):$('<input class="form-check-input" type="radio" name="'+h+'" id="'+n+'" value="'+t+'"/>'),y.push(o);var a=$('<label class="form-check-label" for="'+n+'">'+e+"</label>");o.on("change",(function(e){e.preventDefault();for(var t=[],n=0;n<y.length;n++)y[n].prop("checked")&&t.push(y[n].prop("value")+"");f.selectedIndex=t.join(","),f.status!=u.cfg.STATUS.MODIFIED&&(f.check_el.html(""),f.status=u.cfg.STATUS.MODIFIED,f.quill_el_container.removeClass("pw-me-right pw-me-wrong pw-me-alert"))})),r.append(o),r.append(a),d.append(r)})),a.quill_el_container.append(d),a.quill_el_container.append(a.check_el),a.parent.append(a.quill_el_container),(0,p.reflowLatex)(),a}return t=c,(n=[{key:"showAnswer",value:function(){}},{key:"clear",value:function(){this.selectedIndex="",this.btn_action.html(""),this.check_el.html(""),this.status=u.cfg.STATUS.UNMODIFIED,this.quill_el_container.removeClass("pw-me-right pw-me-wrong pw-me-alert")}},{key:"focus",value:function(){}},{key:"latex",value:function(e){return[this.selectedIndex]}},{key:"get_qid",value:function(){return this.qid}},{key:"checkMsg",value:function(e,t){this.status=e;var n="";1==e?(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-check"></i></span>',this.quill_el_container.addClass("pw-me-right")):0==e?(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-times"></i></span>',this.quill_el_container.addClass("pw-me-wrong")):(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-exclamation-triangle"></i></span>',this.quill_el_container.addClass("pw-me-alert")),this.check_el.html(n)}},{key:"dispose",value:function(){this.quill_el_container.off()}},{key:"reflow",value:function(){this.status=u.cfg.STATUS.UNMODIFIED}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n(44).EditorBase);t.EditorMChoiceCheckbox=f},786:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EditorPanel=void 0;var p=n(66),f=n(830),d=n(837),h=n(280),y=u(n(727)),v=n(44),m=n(332),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,n,r,s=i(c);function c(e,t,n,r,o){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var i=l(a=s.call(this,e,t,n,r));return a.parent=e,a.gid=t,a.wrong_attemps=0,a.standalone=o||!1,a.status=p.cfg.STATUS.UNMODIFIED,a.panel=$('<div class="pw-me-editorpanel" style="position:relative"></div>'),a.parent.append(a.panel),a.palettes=new d.PwTabMenu(a.panel,a.gid),a.spanMathInput=$('<span class="pw-me-editorpanel-mathinput"></span>'),a.spanMathInput.on("click",(function(e){e.preventDefault(),$(".pw-me-btn-dropdownmenu").css("display","none")})),a.panel.append(a.spanMathInput),a.mathInput=(0,p.MathField)(a.spanMathInput[0],{handlers:{edit:function(){o&&i.status!=p.cfg.STATUS.MODIFIED&&(i.check_el&&i.check_el.html(""),i.status=p.cfg.STATUS.MODIFIED)}}}),a.standalone&&(a.check_el=$("<div></div>"),a.panel.append(a.check_el)),a.feedback_el=$('<div class="pw-mq-feedback" style="display:none;"></div>'),a.panel.append(a.feedback_el),(0,f.items)(y.default.button_meta,(function(e,t){var n=y.default.default_toolbar_tabs[t.tab-1];i.palettes.addTab(n);var r=(0,h.createToolbarButton)(i.panel,t,e,i.mathInput);i.palettes.addContentsToTab(n,r)})),a.setDefinition(n),a}return t=c,(n=[{key:"$div",get:function(){return this.panel}},{key:"clear",value:function(){this.mathInput.latex(""),this.check_el&&this.check_el.html(""),this.status=p.cfg.STATUS.UNMODIFIED}},{key:"focus",value:function(){this.mathInput.focus()}},{key:"latex",value:function(e){return null==e?[(0,f.sanitizeLaTeX)(this.mathInput.latex())]:(this.mathInput.latex(e),this.status=p.cfg.STATUS.UNMODIFIED,[""])}},{key:"checkMsg",value:function(e,t){if(this.standalone){this.status=e;var n="";n=1==e?'<span style="color:green;margin:5px;"><i class="fas fa-check"></i> '+t+"</span>":0==e?'<span style="color:darkred;margin:5px;"><i class="fas fa-times"></i> '+t+"</span>":'<span style="color:purple;margin:5px;"><i class="fas fa-exclamation-triangle"></i> '+t+"</span>",this.check_el&&this.check_el.html(n)}}},{key:"get_qid",value:function(){return this.mathInput.id}},{key:"showPalette",value:function(e,t){this.palettes.setVisible(e,t)}},{key:"dispose",value:function(){this.mathInput.revert(),this.panel.find("button").off(),this.palettes.dispose()}},{key:"reflow",value:function(){this.mathInput.reflow(),this.status=p.cfg.STATUS.UNMODIFIED}},{key:"setDefinition",value:function(e){this.def=e;var t=this;if(e.palettes&&e.palettes.indexOf("all")>=0)y.default.default_toolbar_tabs.forEach((function(e){t.palettes.setVisible(e,!0)})),this.palettes.setTab("General");else if(e.palettes&&e.palettes.length){var n=null,r=0;y.default.default_toolbar_tabs.forEach((function(o){for(var a=!1,i=0;!a&&i<e.palettes.length;)(a=e.palettes[i].toLowerCase().trim()==o.toLowerCase().trim())&&0==i&&(n=o),a&&(r+=1),i+=1;t.palettes.setVisible(o,a)})),0!=r&&n||this.palettes.setVisible("General",!0),this.palettes.setTab(n||"General")}else y.default.default_toolbar_tabs.forEach((function(e){t.palettes.setVisible(e,"General"==e)})),this.palettes.setTab("General")}},{key:"increment_wrong",value:function(){this.wrong_attemps+=1,this.wrong_attemps>p.cfg.MAX_ATTEMPTS&&this.showAnswer()}},{key:"showAnswer",value:function(){var e,t=this;this.def?this.def.right_answer?(null===(e=t.check_el)||void 0===e||e.css("display","none"),this.feedback_el.css("display",""),this.feedback_el.html(atob(this.def.right_answer)+"<p><br></p>"),(0,f.reflowLatex)(),this.isAnswerShown=!0,this.palettes.setEnabled(!1),this.spanMathInput.css("pointer-events","none"),this.panel.css("cursor","not-allowed")):m.engineCAS.getAnswer(this.def).then((function(e){var n;e.right_answer?(null===(n=t.check_el)||void 0===n||n.css("display","none"),t.def.right_answer=e.right_answer,t.feedback_el.css("display",""),t.feedback_el.html(atob(t.def.right_answer)+"<p><br></p>"),(0,f.reflowLatex)(),t.isAnswerShown=!0,t.palettes.setEnabled(!1),t.spanMathInput.css("pointer-events","none"),t.panel.css("cursor","not-allowed")):e.msg&&console.error(e.msg)}),(function(e){console.error(e)})):console.error("Cannot show answer because def is null")}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(v.EditorBase);t.EditorPanel=b},280:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createToolbarButton=void 0;var r=n(66);t.createToolbarButton=function(e,t,n,o){if("function"==typeof t.latex){var a=$('<div class="btn btn-sm pw-me-btn-toolbar pw-me-btn-dropdown" title="'+n.trim()+'"></div>'),i=$("<span>"+t.icon+"</span>");(0,r.StaticMath)(i[0]),a.append(i);var s=$('<div class="pw-me-btn-dropdownmenu"></div>');e.append(s);for(var l=[],c=0,u=t.vars.length;c<u;c++){var p=t.vars[c],f=p.name,d="";null!=p.min&&(d=' min="'+p.min+'" '),null!=p.max&&(d+=' max="'+p.max+'" ');var h=$('<input style="width:50px;margin-left:4px;grid-column:2;" type="'+p.type+'" value="'+p.val+'"'+d+"/>");l.push(h);var y=$('<span style="grid-column:1">'+f+"</span>");s.append(y),s.append(h)}var v=$('<button class="btn btn-sm" style="padding:4px;grid-row:3;grid-column:1 / 2;background:lightgray;">Ok</button>');s.append(v),v.on("click",(function(e){e.preventDefault();for(var n={},r=0,a=l.length;r<a;r++){var i=l[r],c=t.vars[r],u=c.name,p=i.val();"number"===c.type&&(p=parseInt(p)),n[u]=p}var f=t.latex(n);o.write(f),t.moveto&&o.keystroke(t.moveto),s.css("display","none"),o.focus()})),a.on("click",(function(e){e.preventDefault();var t=s.css("display");s.css("display","none"===t?"grid":"none")}))}else{a=$('<button class="btn btn-sm pw-me-btn-toolbar" title="'+n.trim()+'"></button>');i=$("<span>"+t.icon+"</span>");(0,r.StaticMath)(i[0]),a.append(i),a.on("click",(function(e){e.preventDefault(),o.write(t.latex),o.focus(),t.moveto&&o.keystroke(t.moveto),$(".pw-me-btn-dropdownmenu").css("display","none")}))}return a}},837:function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.PwTabMenu=void 0;var o=n(161),a=n(830),i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$panel=$('<div class="pw-me-tabmenu"></div>'),this.parent=t,this.tabs={},this.currentTab=null,this.tabsPanel=$('<div class="pw-me-tabspanel"></div>'),this.contentsPanel=$('<div class="pw-me-tabcontents"></div>'),this.$panel.append(this.tabsPanel),this.$panel.append(this.contentsPanel),this.parent&&this.parent.append(this.$panel),this.gid=n}var t,n,i;return t=e,(n=[{key:"$div",get:function(){return this.$panel}},{key:"addTab",value:function(e){if(!this.tabs[e]){var t=this,n=$('<button style="display:none;" class="btn btn-sm pw-me-btn-tab">'+(0,o.I18n)(e)+"</button>"),r=$('<div style="display:none;" class="pw-me-tabcontainer"></div>');n.on("click",(function(n){n.preventDefault(),t.setTab(e)})),this.tabsPanel.append(n),this.contentsPanel.append(r),this.tabs[e]={tab:n,container:r},1===Object.keys(this.tabs).length&&this.setTab(e)}}},{key:"addContentsToTab",value:function(e,t){this.tabs[e]&&this.tabs[e].container.append(t)}},{key:"setVisible",value:function(e,t){this.tabs,this.tabs[e]&&(this.tabs[e].tab.css("display",t?"":"none"),this.tabs[e].container.css("display",t?"flex":"none"))}},{key:"setEnabled",value:function(e){e?(this.contentsPanel.css("pointer-events","initial"),this.$panel.css("cursor","initial")):(this.contentsPanel.css("pointer-events","none"),this.$panel.css("cursor","not-allowed"))}},{key:"setTab",value:function(e){(0,a.items)(this.tabs,(function(t,n){t==e?(n.tab.addClass("pw-me-btn-active"),n.tab.css("display","")):n.tab.removeClass("pw-me-btn-active"),n.container.css("display",t==e?"flex":"none")}))}},{key:"dispose",value:function(){this.tabsPanel.children().off(),this.tabsPanel.html(""),this.contentsPanel.html(""),this.tabs={}}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.PwTabMenu=i},727:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default={default_toolbar_buttons:["fraction","square_root","cube_root","root","superscript","subscript","multiplication","division","plus_minus","pi","degree","not_equal","greater_equal","less_equal","greater_than","less_than","angle","parallel_to","perpendicular","triangle","parallelogram","round_brackets","matrix2","matrix3"],default_toolbar_tabs:["General","Símbols","Geometria","Intervals","Funcions"],button_meta:{"Multiplicació":{latex:"\\times",tab:1,icon:"\\times"},"Fracció":{latex:"\\frac{}{}",moveto:"Up",movefor:1,tab:1,icon:"\\frac{\\square}{\\square}"},Exponent:{latex:"\\^{}",moveto:"Up",movefor:1,tab:1,icon:"\\square^2"},"Parèntesis":{latex:"\\left(\\right)",moveto:"Left",movefor:1,tab:1,icon:"\\left(\\square\\right)"},"Arrel quadrada":{latex:"\\sqrt{}",moveto:"Left",movefor:1,tab:1,icon:"\\sqrt{\\square}"},"Arrel cúbica":{latex:"\\sqrt[3]{}",moveto:"Left",movefor:1,tab:1,icon:"\\sqrt[3]{\\square}"},Radical:{latex:"\\sqrt[{}]{}",moveto:"Left",movefor:2,tab:1,icon:"\\sqrt[\\square]{\\square}"},"Matriu 2x2":{latex:"\\begin{pmatrix} & \\\\ & \\end{pmatrix}",tab:1,icon:"M_{2\\times 2}"},"Matriu 3x3":{latex:"\\begin{pmatrix} & & \\\\ & &  \\\\ & & \\end{pmatrix}",tab:1,icon:"M_{3\\times 3}"},"Matriu mxn":{latex:function(e){for(var t=[],n=0;n<e.n;n++){for(var r=[],o=0;o<e.m;o++)r.push(" ");t.push(r.join("&"))}return"\\begin{pmatrix} "+t.join("\\\\")+" \\end{pmatrix}"},tab:1,icon:"M_{n\\times m}",vars:[{name:"n",type:"number",min:1,val:2},{name:"m",type:"number",min:1,val:2}]},"Subíndex":{latex:"\\_{}",moveto:"Down",movefor:1,tab:1,icon:"\\square_{2}"},pi:{latex:"\\pi",tab:2,icon:"\\pi"},e:{latex:"\\e",tab:2,icon:"e"},infinit:{latex:"\\infty",tab:2,icon:"\\infty"},"Més menys":{latex:"\\pm",tab:2,icon:"\\pm"},Diferent:{latex:"\\neq",tab:2,icon:"\\neq"},"Major o igual":{latex:"\\geq",tab:2,icon:"\\geq"},"Menor o igual":{latex:"\\leq",tab:2,icon:"\\leq"},"Major que":{latex:"\\gt",tab:2,icon:"\\gt"},"Menor que":{latex:"\\lt",tab:2,icon:"\\lt"},Graus:{latex:"\\degree",tab:3,icon:"\\degree"},Angle:{latex:"\\angle",tab:3,icon:"\\angle"},"Paral·lel a":{latex:"\\parallel",tab:3,icon:"\\parallel"},"Perpendicular a":{latex:"\\perpendicular",tab:3,icon:"\\perpendicular"},Triangle:{latex:"\\triangle",tab:3,icon:"\\triangle"},"Paral·lelogram":{latex:"\\parallelogram",tab:3,icon:"\\parallelogram"},"Interval obert":{latex:"\\left( , \\right)",moveto:"Left",movefor:4,tab:4,icon:"\\left(\\square, \\square\\right)"},"Interval tancat":{latex:"\\left[ , \\right]",moveto:"Left",movefor:4,tab:4,icon:"\\left[\\square, \\square\\right]"},"Interval semi1":{latex:"\\left[ , \\right)",moveto:"Left",movefor:4,tab:4,icon:"\\left[\\square, \\square\\right)"},"Interval semi2":{latex:"\\left( , \\right]",moveto:"Left",movefor:4,tab:4,icon:"\\left(\\square, \\square\\right]"},Infinit:{latex:"\\infty",tab:4,icon:"\\infty"},"Conjunt dels reals":{latex:"\\mathbb{R}",tab:4,icon:"\\mathbb{R}"},Sinus:{latex:"\\sin()",moveto:"Left",movefor:1,tab:5,icon:"\\sin{\\square}"},Cosinus:{latex:"\\cos()",moveto:"Left",movefor:1,tab:5,icon:"\\cos{\\square}"},Tangent:{latex:"\\tan()",moveto:"Left",movefor:1,tab:5,icon:"\\tan{\\square}"},Arcsinus:{latex:"\\arcsin()",moveto:"Left",movefor:1,tab:5,icon:"\\arcsin{\\square}"},Arccosinus:{latex:"\\arccos()",moveto:"Left",movefor:1,tab:5,icon:"\\arccos{\\square}"},Arctangent:{latex:"\\arctan()",moveto:"Left",movefor:1,tab:5,icon:"\\arctan{\\square}"},"Logaritme Neperià":{latex:"\\ln()",moveto:"Left",movefor:1,tab:5,icon:"\\ln{\\square}"},"Logaritme en base b":{latex:"\\frac{\\log()}{\\log{b}}",moveto:"Left",movefor:4,tab:5,icon:"\\log_b{\\square}"}},keyboard_keys:{letters:[{value:"q",type:"write",class:"ks",display:"q",new_line:!1},{value:"w",type:"write",class:"ks",display:"w",new_line:!1},{value:"e",type:"write",class:"ks",display:"e",new_line:!1},{value:"r",type:"write",class:"ks",display:"r",new_line:!1},{value:"t",type:"write",class:"ks",display:"t",new_line:!1},{value:"y",type:"write",class:"ks",display:"y",new_line:!1},{value:"u",type:"write",class:"ks",display:"u",new_line:!1},{value:"i",type:"write",class:"ks",display:"i",new_line:!1},{value:"o",type:"write",class:"ks",display:"o",new_line:!1},{value:"p",type:"write",class:"ks",display:"p",new_line:!0},{value:"a",type:"write",class:"ks",display:"a",new_line:!1},{value:"s",type:"write",class:"ks",display:"s",new_line:!1},{value:"d",type:"write",class:"ks",display:"d",new_line:!1},{value:"f",type:"write",class:"ks",display:"f",new_line:!1},{value:"g",type:"write",class:"ks",display:"g",new_line:!1},{value:"h",type:"write",class:"ks",display:"h",new_line:!1},{value:"j",type:"write",class:"ks",display:"j",new_line:!1},{value:"k",type:"write",class:"ks",display:"k",new_line:!1},{value:"l",type:"write",class:"ks",display:"l",new_line:!0},{value:"CapsLock",type:"custom",class:"ks long icon",display:"&#8673;",new_line:!1},{value:"z",type:"write",class:"ks",display:"z",new_line:!1},{value:"x",type:"write",class:"ks",display:"x",new_line:!1},{value:"c",type:"write",class:"ks",display:"c",new_line:!1},{value:"v",type:"write",class:"ks",display:"v",new_line:!1},{value:"b",type:"write",class:"ks",display:"b",new_line:!1},{value:"n",type:"write",class:"ks",display:"n",new_line:!1},{value:"m",type:"write",class:"ks",display:"m",new_line:!1},{value:"Backspace",type:"keystroke",class:"ks long icon",display:"&#8678;",new_line:!0},{value:"numpad",type:"custom",class:"ks long",display:"123",new_line:!1},{value:",",type:"write",class:"ks",display:",",new_line:!1},{value:"\\ ",type:"write",class:"ks too_long",display:"Space",new_line:!1},{value:".",type:"write",class:"ks",display:".",new_line:!1},{value:"close",type:"custom",class:"ks long takeup",display:"X",new_line:!1}],numbers:[{value:"1",type:"write",class:"ks",display:"1",new_line:!1},{value:"2",type:"write",class:"ks",display:"2",new_line:!1},{value:"3",type:"write",class:"ks",display:"3",new_line:!1},{value:"+",type:"write",class:"ks",display:"+",new_line:!1},{value:"-",type:"write",class:"ks",display:"&#8315;",new_line:!0},{value:"4",type:"write",class:"ks",display:"4",new_line:!1},{value:"5",type:"write",class:"ks",display:"5",new_line:!1},{value:"6",type:"write",class:"ks",display:"6",new_line:!1},{value:"\\times",type:"write",class:"ks",display:"&times;",new_line:!1},{value:"/",type:"write",class:"ks",display:"&#247;",new_line:!0},{value:"7",type:"write",class:"ks",display:"7",new_line:!1},{value:"8",type:"write",class:"ks",display:"8",new_line:!1},{value:"9",type:"write",class:"ks",display:"9",new_line:!1},{value:"=",type:"write",class:"ks",display:"=",new_line:!1},{value:"Backspace",type:"keystroke",class:"ks long icon",display:"&#8678;",new_line:!0},{value:"letters",type:"custom",class:"ks long",display:"ABC",new_line:!1},{value:"0",type:"write",class:"ks",display:"0",new_line:!1},{value:"?",type:"write",class:"ks",display:"?",new_line:!1},{value:"%",type:"write",class:"ks",display:"%",new_line:!1},{value:"close",type:"custom",class:"ks long takeup",display:"X",new_line:!1}]}}},791:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createQuillFromObject=void 0;var r=n(437),o=n(980),a=n(786),i=n(203),s=n(66),l=n(142),c=n(830);t.createQuillFromObject=function(e,t,n){var u=null,p=n.editor;if(n.formulation){var f="<span>"+n.formulation+"</span>";e.append(f),(0,c.reflowLatex)()}if(e.removeClass("pygen-cloze"),p==s.cfg.QTYPES.C)u=new r.EditorCloze(e,t,n,s.cfg.QTYPES.C,n.initial_latex),e.addClass("pygen-cloze");else if(p==s.cfg.QTYPES.P)u=new a.EditorPanel(e,t,n,s.cfg.QTYPES.P,!0);else if(p==s.cfg.QTYPES.M)n.symbols=n.symbols||[],u=new i.EditorMChoice(e,t,n,s.cfg.QTYPES.M,n.symbols);else if(p==s.cfg.QTYPES.Ms){n.symbols=n.symbols||[];var d=Array.isArray(n.ans);u=new l.EditorMChoiceCheckbox(e,t,n,s.cfg.QTYPES.Ms,d)}else u=p==s.cfg.QTYPES.B?new o.EditorInput(e,t,n,s.cfg.QTYPES.B):new o.EditorInput(e,t,n,s.cfg.QTYPES.S);var h=u.get_qid();return(s.shared[t]||{})[h]=u,u.setStatus(s.cfg.STATUS.UNMODIFIED),n.initial_latex&&p!=s.cfg.QTYPES.C&&(u.latex(n.initial_latex),u.setStatus(s.cfg.STATUS.MODIFIED)),h}},332:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.engineCAS=void 0;var r=n(66),o=n(53),a=n(83);t.engineCAS={compare:function(e){return"sympy"===(e.engine||r.cfg.DEFAULT_ENGINE)?a.sympyCAS.compare(e):o.nerdamerCAS.compare(e)},getAnswer:function(e){return"sympy"===(e.engine||r.cfg.DEFAULT_ENGINE)?a.sympyCAS.getAnswer(e):o.nerdamerCAS.getAnswer(e)}}},53:function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.nerdamerCAS=void 0;var i=n(161),s=n(830),l=n(682);function c(e){var t;if(Array.isArray(null===(t=null==e?void 0:e.symbols)||void 0===t?void 0:t.elements)){var n=e.symbols.elements[0];if(!Array.isArray(n))return!0}return!1}function u(e){var t=e.text();return t.startsWith("matrix")?window.nerdamer("size("+t+")"):null}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"clone",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"decrypt",value:function(e){return atob(e)}},{key:"checkRules",value:function(e){var t=[],n=e.rules||{};"string"==typeof n&&(n=JSON.parse(n));var r=e.latex.join(" ");return n.comma_as_decimal&&(e.latex=e.latex.map((function(e){return e.replace(",",".")}))),n.forbidden&&n.forbidden.forEach((function(e){r[e]&&t.push((0,i.I18n)("sym_notallowed",e))})),n.unique&&n.unique.forEach((function(e){(r.match(new RegExp(e,"g"))||[]).length>1&&t.push((0,i.I18n)("sym_once",e))})),t}}],(n=[{key:"compare",value:function(t){var n=window.nerdamer;return"string"==typeof(t=e.clone(t)).latex&&(t.latex=[t.latex]),new Promise((function(o,a){n.flush(),n.clearVars(),window.nerdamer.getCore().Symbol;var p={x:n("x"),y:n("y"),z:n("z"),t:n("t"),e:n("exp(1)")},f=e.checkRules(t);if(f.length)o({qid:t.qid,msg:f.join(" "),correct:0});else{var d=[];try{if((d=t.latex.map((function(e){return(0,l.parseLatex)(e)}))).filter((function(e){return null==e})).length>0)return o({qid:t.qid,correct:-4,msg:(0,i.I18n)("error_cantprocess")})}catch(e){return console.error(e),o({qid:t.qid,correct:-4,msg:"Error: No es poden processar les respostes donades: "+e})}d.forEach((function(e,t){n.setVar("ua_"+t,e)}));try{(t.symbols||[]).forEach((function(e){if(e.indexOf(":=")>0){var t=e.indexOf(":="),r=e.substring(0,t),o=e.substring(t+2);n.setVar(r,o)}else n.setVar(e,e)}))}catch(e){return console.error(e),void o({qid:t.qid,correct:-2,msg:"Error: no es poden processar els símbols: "+e})}(0,s.items)(p,(function(e,t){t.text()}));var h=[];try{if(t.anse&&(t.ans=e.decrypt(t.anse)),t.anse,t.ans,"string"==typeof t.ans&&(t.ans=[t.ans]),(h=t.ans.map((function(e){return n(e,p)}))).filter((function(e){return null==e})).length>0)return void o({qid:t.qid,correct:-3,msg:"Error: Hi ha respostes 'ans' que no es poden processar"})}catch(e){return console.error(e),void o({qid:t.qid,correct:-3,msg:"Error: No es poden processar les respostes 'ans': "+e})}try{var y=[];if((0,s.zip)(h,d).forEach((function(e){var t=r(e,2),n=t[0],o=t[1];c(n)&&!c(o)?y.push("S'espera un conjunt per resposta. Per exemple \\(\\{\\sqrt{2},\\, \\pi\\}\\)"):u(n)&&!u(o)?y.push("S'espera una matriu per resposta."):!u(n)&&u(o)&&y.push("S'espera una expressió per resposta.");var a=u(n),i=u(o);a&&i&&(a[0]==i[0]&&a[1]==i[1]||y.push("La matriu resposta no té la dimensió correcta."))})),y.length>0)return void o({qid:t.qid,correct:0,msg:y.join(" ")})}catch(e){return console.error(e),void o({qid:t.qid,correct:-4,msg:"Error: S'ha produït un error comprovant els tipus "+e})}var v=0,m="";try{(0,s.zip)(h,d).forEach((function(e){var n=r(e,2),o=n[0],a=n[1];o.text(),a.text();var s=null,l=t.rules||{};if(l.precision)s=Math.abs(o.toDecimal()-a.toDecimal())<l.precision;else if(u(o)){var c=o.subtract(a);o.text(),a.text(),c.text(),s=function(e){var t=!0;return e.each((function(e){t=t&&"0"==e.text()})),t}(c)}else s=l.factor||l.expanded?o.eq(a):"0"==(s=o.subtract(a).simplify()).text();if("boolean"==typeof s&&!0===s?(v=1,m=(0,i.I18n)("right_answer")):(m=(0,i.I18n)("wrong_answer"),v=0),0==v)return!0;if(l.num_terms&&a.isPolynomial()){var p=a.symbols.coeffs().length,f=o.symbols.expand().coeffs().length,d=f-p;"equal"==l.num_terms&&0!=d&&(m="La resposta hauria de tenir "+f+" termes sumats o restats.",v=0)}}))}catch(e){console.error("Exception comparing ",e),m=(0,i.I18n)("error_verifying"),v=-1}o({qid:t.qid,correct:v,msg:m})}}))}},{key:"getAnswer",value:function(t){var n=window.nerdamer;return t=e.clone(t),new Promise((function(e,r){var o={x:n("x"),y:n("y"),z:n("z"),t:n("t"),e:n("exp(1)")};try{(t.symbols||[]).forEach((function(e){if(e.indexOf(":=")>0){var t=e.indexOf(":="),r=e.substring(0,t),o=e.substring(t+2);n.setVar(r,o)}else n.setVar(e,e)}))}catch(t){return console.error(t),void e({msg:"Error: no es poden processar els símbols: "+t})}if("string"!=typeof t.ans)e({msg:"Vector ans is not supported yet!"});else{var a=n(t.ans,o),s="".concat((0,i.I18n)("expected_ans"),"<br> \\(").concat(a.latex(),"\\)");e({right_answer:btoa(s)})}}))}}])&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.nerdamerCAS=new p},682:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseLatex=void 0;var n=/\\begin\{pmatrix\}(.*?)\\end\{pmatrix\}/gm,r=0;t.parseLatex=function(e){return e=e.replace(n,(function(e,t){return n="matrix("+e.replace("\\begin{pmatrix}","").replace("\\end{pmatrix}","").split("\\\\").map((function(e){return"["+e.split("&").map((function(e){return e.trim()})).join(",")+"]"})).join(",")+")",o="M_"+r,window.nerdamer.setVar(o,n),r++,o;var n,o})),window.nerdamer.convertFromLaTeX(e)}},83:function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.sympyCAS=void 0;var o=n(66),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"compare",value:function(e){return new Promise((function(t,n){$.ajax({type:"POST",url:o.cfg.CAS_URL,data:JSON.stringify(e),dataType:"json",success:function(e){t(e)},error:function(e){n(e)}})}))}},{key:"getAnswer",value:function(e){return new Promise((function(t,n){$.ajax({type:"POST",url:o.cfg.GETANSWER_URL,data:JSON.stringify(e),dataType:"json",success:function(e){t(e)},error:function(e){n(e)}})}))}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.sympyCAS=new a},657:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.findPyGenerators=void 0;var r=n(800),o=n(968),a=n(791),i=n(66),s=n(969),l=n(161),c=n(713),u=n(316),p=n(970),f=n(831),d=n(830);t.findPyGenerators=function(){var e=window.IB||{};$("div[data-pygen]").each((function(t,n){var h=$(n);h.css({position:"relative","min-height":"300px","background-color":"#ffffff","background-image":'url("https://piworld.es/iedib/matheditor/backgrounds/triangles.svg")',"background-position":"center","background-size":"cover"}),h.html("");var y=h.attr("id")||"";y||(y="pyg_"+Math.random().toString(32).substring(2),h.attr("id",y)),i.shared[y]={};var v=$('<div style="display:flex;flex-direction:row-reverse;align-items:baseline;"></div>'),m=$("<div></div>"),b=$('<div style="display: flex; flex-direction: row; align-content: flex-start;margin:10px 0; flex-wrap: wrap; gap: 5px;margin-bottom:30px;"></div>'),g=$('<div style="position: absolute;left: 0;right: 0;bottom: 0;margin: 0;background-color: #9fa0ac; display: flex; flex-direction: row; align-content: flex-start; flex-wrap: wrap; gap: 5px;"></div>'),w=new o.LevelIndicator(4),_=h.attr("data-pygen-category")||"general";w.setVisible(i.cfg.HAS_IAPACE&&null!=h.attr("data-pygen-category")),v.append(w.container);var k=1;i.cfg.HAS_IAPACE&&(k=e.iapace.inference(_)),w.setLevel(k);var S=null;if(i.cfg.HAS_IAPACE&&null!=h.attr("data-pygen-goal")){var x=(h.attr("data-pygen-goal")||"").split(";").map((function(e){return e.split(",")}));(S=new s.GoalChecker(_,x)).accomplished()&&v.append($('<span class="pw-goal-reached">'+(0,l.I18n)("goal_reached")+" </span>"))}for(var O=(h.attr("data-pygen")||"").split(";"),E=[],I=0,T=O.length;I<T;I++){var P=O[I],A=null,M={};if(P.indexOf("[")>0){A=P.split("[")[0].trim();for(var q=P.split("[")[1].replace("]","").split(","),j=0,D=q.length;j<D;j++){var C=q[j];if(C.indexOf("=")>0){var L=C.split("="),R=L[0],U=L[1];U=U.indexOf("'")>=0?U.replace(/'/g,""):parseFloat(U),M[R]=U}}}else A=P.trim();Object.keys(M).length?E.push([A,M]):E.push([A])}var N=new u.SeqBasic(E);if(E.length>1){var F=(h.attr("data-pygen-order")||"random").trim().toLowerCase();F.startsWith("random")||F.startsWith("weighted")?N=new p.SeqRandomWeighted(E,F):F.startsWith("sequence")&&(N=new f.SeqSequence(E,F))}var B=$('<button class="btn btn-sm btn-primary"><i class="fas fa-check"></i> '+(0,l.I18n)("check")+"</button>"),G=$('<button class="btn btn-sm btn-warning" style="display:none;"><i class="far fa-life-ring"></i> '+(0,l.I18n)("wildcard")+" 50%</button>"),Q=null,W=null,z=function(){B.prop("disabled",!0),H.prop("disabled",!0),J.prop("disabled",!0),G.css("display","none"),i.cfg.HAS_IAPACE&&(k=e.iapace.inference(_)),w.setLevel(k);var t=N.next();$.ajax({type:"POST",url:i.cfg.PYGEN_URL,data:JSON.stringify({activities:[t],level:k}),dataType:"json",success:function(t){if(t.msg)return Q=null,m.html('<p style="color:darkred">ERROR<br>'+JSON.stringify(t.msg)+"</p>"),console.error("ERROR: ",t),void H.prop("disabled",!1);m.html("");var n=$("<p><span>"+(h.attr("data-pygen-formulation")||"")+"</span> "+t.formulation+"</p>");m.append(n);var o=atob(t.mq64),s=JSON.parse(o);if(i.cfg.HAS_IAPACE){var u=e.iapace.findCreate(_);u&&(0,d.sum)(u.h)>=30&&G.css("display",null==s.comodi?"none":"")}s.category=_,s.palettes||(s.palettes="all"),s.editor==i.cfg.QTYPES.M&&(s.editor=i.cfg.QTYPES.Ms),Q=s,s.initial_latex&&(s.initial_latex=(0,c.processMqIni)(s.initial_latex));var p=[];if(s.symbols)for(var f=s.symbols.split(";"),b=0,g=f.length;b<g;b++){var w=f[b];w.trim()&&p.push(w.trim())}s.symbols=p;var k=[];s.rules&&(k=JSON.parse(s.rules)),s.rules=k;var x=(0,a.createQuillFromObject)(m,y,s);(W=i.shared[y][x]).isPigen=!0,B.off();(0,r.bindSubmitActionButton)(y,B,(function(t){(H.prop("disabled",!1),J.prop("disabled",!1),i.cfg.HAS_IAPACE&&(e.iapace.addScore(_,t),e.iapace.save()),S&&S.reached())&&(0==v.find(".pw-goal-reached").length&&v.append($('<span class="pw-goal-reached">'+(0,l.I18n)("goal_reached")+" </span>")),"confetti"==h.attr("data-pygen-celebration")&&window.Confetti&&new window.Confetti(h[0]).play())})),i.shared[y],(0,d.reflowLatex)(),B.prop("disabled",!1)},error:function(e){Q=null,W=null,m.html('<div><p style="color:darkred">ERROR<br>'+JSON.stringify(e)+"</p></div>"),H.prop("disabled",!1)}})},J=$('<button class="btn btn-sm btn-outline-info" title="Mostra la resposta"><i class="fas fa-question-circle"></i> '+(0,l.I18n)("answer")+"</button>");J.on("click",(function(e){e.preventDefault(),W?W.status!=i.cfg.STATUS.CORRECT&&W.wrong_attemps<1||(B.prop("disabled",!0),J.prop("disabled",!0),W.showAnswer&&W.showAnswer()):console.error("Missing currentEditor here :-(")}));var H=$('<button class="btn btn-sm btn-outline-primary" title="Genera una nova pregunta"><i class="fas fa-arrow-circle-right"></i> '+(0,l.I18n)("next")+"</button>");if(H.on("click",(function(e){e.preventDefault();for(var t=Object.keys(i.shared[y]||{}),n=0,r=t.length;n<r;n++){var o=parseInt(t[n]);i.shared[y][o].dispose(),delete i.shared[y][o]}z()})),G.on("click",(function(e){e.preventDefault(),W&&Q&&Q.comodi&&(W.comodiUsed=!0,G.css("display","none"),W.latex(Q.comodi),W.status=i.cfg.STATUS.MODIFIED)})),b.append(B),b.append(H),b.append(J),b.append(G),h.append(v),h.append(m),h.append(b),"none"!=h.attr("data-copyright")){var Y=$('<span style="padding:4px;font-size:70%;color:whitesmoke;"><em>pyQuizz</em> by Josep Mulet (c) 2021-22</span>');g.append(Y),h.append(g)}z()}))}},66:function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.sharedContext=t.sharedDlg=t.shared=t.MathField=t.StaticMath=t.cfg=void 0;var o=n(830),a=function(e){for(var t={},n=e.substring(1).split("&"),r=0;r<n.length;r++){var o=n[r].trim().split("=");o[0]&&(1==o.length?t[o[0]]="1":t[o[0]]=o[1])}return t};window.MQWidgets=window.MQWidgets||{};var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.DEFAULT_ENGINE="sympy",this.NERDAMER_URL="https://cdn.jsdelivr.net/npm/nerdamer@1.1.13/all.min.js",this.BACKEND_BASEURL="",this.MQWIDGETS_BASEURL="https://iedib.github.io/mqwidgets2/dist/",this.pageInfo=function(){var e,t;if(!document.querySelector)return{};var n=-1,r="Usuari convidat",o=document.querySelector("[data-userid]");o&&(n=parseInt(o.getAttribute("data-userid")||"-1"));var i=document.querySelector(".usertext");i&&(r=i.innerText);var s={};location.search&&(s=a(location.search));var l=s.chapterid;if(!l){var c=document.querySelector('input[name="chapterid"]');c&&(l=c.value)}var u=s.id;if(!u){var p=document.querySelector('div.singlebutton > form > input[name="id"]');p&&(u=p.value)}var f=document.cookie||"",d=f.indexOf("="),h="";d>0&&(h=f.substr(d+1)),h&&h.indexOf(";")>0&&(h=h.split(";")[0]);var y,v="-1",m=document.querySelector(".homelink > a");if(m){y=m.innerText;var b="?"+(m.href.split("?")[1]||"");v=a(b).id}var g=null!=document.querySelector(".teacherdash.nav-item.nav-link")?1:0,w=(location.href.split("?")[0]||"").replace("/mod/book/view.php","");return{userId:n,userFullname:r,bookId:u,chapterId:l,assignNum:(null===(e=window.iedibAPI)||void 0===e?void 0:e.lliurament.id)||0,assignName:(null===(t=window.iedibAPI)||void 0===t?void 0:t.lliurament.title)||"",courseName:y,courseId:v,isTeacher:g,site:w,moodleSession:h}}(),this.STATUS={UNMODIFIED:100,MODIFIED:200,CORRECT:1,WRONG:0},this.QTYPES={S:"simple",B:"basic",C:"cloze",P:"panel",M:"mchoice",Ms:"mchoice*"},this.HAS_IAPACE=null!=window.IB&&null!=window.IB.iapace,this.LANG="",this.RIGHT_ICON="fas fa-check",this.WRONG_ICON="fas fa-times",this.MAX_ATTEMPTS=2}var t,n,i;return t=e,(n=[{key:"CAS_URL",get:function(){return(0,o.urlJoin)(this.BACKEND_BASEURL,"compare")}},{key:"PYGEN_URL",get:function(){return(0,o.urlJoin)(this.BACKEND_BASEURL,"generate")}},{key:"GETANSWER_URL",get:function(){return(0,o.urlJoin)(this.BACKEND_BASEURL,"getanswer")}},{key:"MATHQUILL_URL",get:function(){return(0,o.urlJoin)(this.MQWIDGETS_BASEURL,"/lib/mathquill.matrix.min.js")}},{key:"setUserConfig",value:function(e){"nerdamer"==e.engines[0]&&(this.DEFAULT_ENGINE="nerdamer");var t=e.engines.filter((function(e){return e.trim().startsWith("http")}));t.length&&(this.BACKEND_BASEURL=t[0]),e.lang&&(this.LANG=e.lang),e.mqwBaseurl&&(this.MQWIDGETS_BASEURL=e.mqwBaseurl)}},{key:"isNerdamer",value:function(){return null!=window.nerdamer}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.cfg=new i;var s={};t.StaticMath=function(e){return s.StaticMath||(s=window.MathQuill.getInterface(2)),s.StaticMath(e)},t.MathField=function(e,t){return s.MathField||(s=window.MathQuill.getInterface(2)),s.MathField(e,t)},t.shared={},t.sharedDlg={},t.sharedContext={}},969:function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.GoalChecker=void 0;var o=n(66),a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.category=t,this.rules=n}var t,n,a;return t=e,(n=[{key:"accomplished",value:function(e){var t=window.IB||{};if(!o.cfg.HAS_IAPACE)return!1;if(!e){var n=t.iapace.find(this.category);return null!=n&&n.d}return t.iapace.findCreate(this.category).d=e,t.iapace.save(),e}},{key:"reached",value:function(){var e=window.IB||{};if(!o.cfg.HAS_IAPACE)return!1;if(this.accomplished())return!1;for(var t=e.iapace.findCreate(this.category),n=!1,r=this.rules.length,a=0;!n&&a<r;){var i=!0,s=this.rules[a],l=0;if(isNaN(s[0])?l+=1:i=i&&t.n>=parseInt(s[0]),isNaN(s[1]))l+=1;else{var c=0;t.n>0&&(c=t.s/(1*t.n)),i=i&&c>=parseFloat(s[1])}isNaN(s[2])?l+=1:i=i&&e.iapace.inference(this.category)>=parseInt(s[2]),l<3&&(n=i),a+=1}return n&&this.accomplished(!0),n}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.GoalChecker=a},713:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createQuillFromDataAttr=t.processMqIni=void 0;var r=n(791),o=n(66);function a(e){return e=(e=(e=e||"").replace(/\?\d*?/g,"\\MathQuillMathField{}")).replace(/M\[(\d+)x(\d+)\]/g,(function(e,t,n){for(var r=parseInt(t),o=parseInt(n),a=[],i=new Array(o),s=0;s<r;s++)a.push(i.join(" & "));return"\\begin{pmatrix} "+a.join(" \\\\ ")+" \\end{pmatrix}"}))}t.processMqIni=a,t.createQuillFromDataAttr=function(e,t){var n=e.attr("data-mq")||"simple",i=e.attr("data-mq-engine"),s=e.attr("data-mq-ans"),l="ans";if(s||(l="anse",s=e.attr("data-mq-anse"))){if((s=s.trim()).startsWith("[")&&s.endsWith("]"))for(var c=0,u=(s=JSON.parse(s)).length;c<u;c++)s[c]=""+s[c];var p=a(e.attr("data-mq-ini")),f=e.attr("data-mq-symbols");if(n!==o.cfg.QTYPES.C||p){var d="";e.attr("data-mq-ra")&&(d=atob(e.attr("data-mq-ra")||""));var h=[];if(f)for(var y=f.split(";"),v=0,m=y.length;v<m;v++){var b=y[v];b.trim()&&h.push(b.trim())}var g=e.attr("data-mq-rules"),w=[];g&&(w=JSON.parse(g));var _=[],k=e.attr("data-mq-palettes");if(k)k.split(",").forEach((function(e){_.push(e.trim())}));var S={engine:i,editor:n,symbols:h,right_answer:d,initial_latex:p,rules:w,palettes:_,ans:s,ansType:l};e.attr("data-mq-formulation")&&(S.formulation=e.attr("data-mq-formulation")),(0,r.createQuillFromObject)(e,t,S)}else console.error("> MQ ",e," is of type cloze but it has no data-mq-ini!")}else console.error("> MQ has no data-mq-ans/e!")}},216:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.findQuillGroups=void 0;var r=n(800),o=n(791),a=n(66),i=n(713),s=n(830);t.findQuillGroups=function(e,t){(t=t||$("body")).find(".pw-mq-group").each((function(n,l){var c=$(l);if(!c.hasClass("pw-mq-done")){c.addClass("pw-mq-done");var u=c.attr("id");u||(u="g_"+Math.random().toString(32).substring(2),c.attr("id",u)),a.shared[u]={},function(e,t){a.sharedContext[t]={}}(0,u),function(e,t,n){n&&(0,s.items)(n,(function(e,n){var r=$("#"+e);if(r.length){r.removeAttr("data-mq");try{var a=atob(n),s=JSON.parse(a);s.initial_latex=(0,i.processMqIni)(s.initial_latex||""),(0,o.createQuillFromObject)(r,t,s)}catch(e){console.error("Invalid or corrupted MQ definition:: ",n),console.error(e)}}else console.error("The element with id="+e+" does not exist.")})),e.find("[data-mq]").each((function(e,n){var r=$(n),l=$(n).attr("data-mq")||"simple";if((0,s.hasValue)(a.cfg.QTYPES,l))console.error("Definition via data-attributes in deprecated since version 2.0. Please encode the definition in a single data-mq field."),(0,i.createQuillFromDataAttr)(r,t);else try{var c=atob(l),u=JSON.parse(c);u.initial_latex=(0,i.processMqIni)(u.initial_latex||""),(0,o.createQuillFromObject)(r,t,u)}catch(e){console.error("Invalid or corrupted MQ definition:: ",l),console.error(e)}}))}(c,u,e);var p=(0,r.createSubmitButtonForGroup)(u);c.append(p),null==t&&window.setTimeout((function(){(0,s.items)(a.shared,(function(e,t){(0,s.items)(t,(function(e,t){t.reflow&&t.reflow()}))}))}),800)}}))}},452:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.applyPolyfills=void 0,t.applyPolyfills=function(){Array.prototype.forEach||(Array.prototype.forEach=function(e,t){if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=this;t=t||this;for(var r=0,o=n.length;r!==o;++r)e.call(t,n[r],r,n)}),Array.prototype.map||(Array.prototype.map=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var t=[],n=0;n<this.length;n++)t.push(e(this[n],n,this));return t}),Array.prototype.filter||(Array.prototype.filter=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var t=[],n=0;n<this.length;n++)e.call(this,this[n],n,this)&&t.push(this[n]);return t}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"function"!=typeof Number.isNaN||(Number.isNaN=function(e){return null!==e&&(e!=e||+e!=e)})}},316:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.SeqBasic=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lpygens=t}var t,r,o;return t=e,(r=[{key:"next",value:function(){return this.lpygens[0]}}])&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.SeqBasic=r},970:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.SeqRandomWeighted=void 0;var c=n(830),u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(l,e);var t,n,r,s=i(l);function l(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),n=s.call(this,e),t=(t||"random").trim().toLowerCase(),n.definition=t;var r=[];if(t.startsWith("weighted:")){var o=(t=t.replace("weighted:","")).split(",");r=o.map((function(e){return parseFloat(e)}))}else for(var a=1/e.length,i=0,u=e.length;i<u;i++)r.push(a);if(n.lpygens=e,n.lpygens.length>r.length)for(;n.lpygens!=r.length;)r.push(1);for(;r.length>e.length;)r.pop();var p=(0,c.sum)(r),f=0;return r.forEach((function(e,t){f=(e/=p)+f,r[t]=f})),n.weights=r,n}return t=l,(n=[{key:"next",value:function(){if("random"==this.definition){var e=Math.floor(Math.random()*this.lpygens.length);return this.lpygens[e]}for(var t=Math.random(),n=0,r=this.weights[n];r<t;)n+=1,r=this.weights[n];return this.lpygens[n]}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(n(316).SeqBasic);t.SeqRandomWeighted=u},831:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.SeqSequence=void 0;var u=n(830),p=n(316),f=n(970),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,n,r,s=i(c);function c(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=s.call(this,e)).lpygens=e,t=t.replace("sequence:","").trim().toLowerCase(),n.positions=[],n.terminalGen=void 0;var r=t.split(","),o=l(n);return r.forEach((function(t,n){if((0,u.isNumeric)(t)&&null==o.terminalGen)for(var a=parseInt(t),i=0;i<a;i++)o.positions.push(n);else if(t.startsWith("*")&&null==o.terminalGen){for(var s=e.slice(n),l=[],c=!1,p=n;p<r.length;p++){var d=r[p];d.indexOf("*")>=0&&d.indexOf("(")>0?(d=d.replace("*","").replace("(","").replace(")",""),l.push(parseFloat(d)),c=!0):l.push(1)}var h="random";c&&(h="weighted: "+l.join(",")),o.terminalGen=new f.SeqRandomWeighted(s,h)}})),n.pointer=0,n}return t=c,(n=[{key:"next",value:function(){if(this.pointer>=this.positions.length&&this.terminalGen)return this.terminalGen.next();this.pointer=this.pointer%this.positions.length;var e=this.positions[this.pointer];return this.pointer+=1,this.lpygens[e]}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(p.SeqBasic);t.SeqSequence=d},830:function(e,t){function n(e,t,n,r,o,a){return s(function(e,t){return e<<t|e>>>32-t}(s(s(t,e),s(r,a)),o),n)}function r(e,t,r,o,a,i,s){return n(t&r|~t&o,e,t,a,i,s)}function o(e,t,r,o,a,i,s){return n(t&o|r&~o,e,t,a,i,s)}function a(e,t,r,o,a,i,s){return n(t^r^o,e,t,a,i,s)}function i(e,t,r,o,a,i,s){return n(r^(t|~o),e,t,a,i,s)}function s(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}Object.defineProperty(t,"__esModule",{value:!0}),t.urlJoin=t.isNumeric=t.createLinkSheet=t.createStyleSheet=t.insertScript=t.MD5=t.copyPropsFromTo=t.hasValue=t.zip=t.items=t.sum=t.sanitizeLaTeX=t.reflowLatex=void 0,t.reflowLatex=function(){window.MathJax&&(window.MathJax.typesetPromise&&window.MathJax.typesetPromise(),window.MathJax.Hub&&window.MathJax.Hub.Queue&&window.MathJax.Hub.Queue(["Typeset",MathJax.Hub]))},t.sanitizeLaTeX=function(e){return e.replace(/·/g,"*")},t.sum=function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n];return t},t.items=function(e,t){if(Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t(n,e[n]);else{var o=Object.keys(e);for(n=0,r=o.length;n<r;n++){var a=o[n];t(a,e[a])}}},t.zip=function(e,t){for(var n=Math.min(e.length,t.length),r=[],o=0;o<n;o++)r.push([e[o],t[o]]);return r},t.hasValue=function(e,t){for(var n=!1,r=Object.keys(e),o=0;!n&&o<r.length;){n=e[r[o]]==t,o++}return n},t.copyPropsFromTo=function(e,t){for(var n=Object.keys(e),r=0,o=n.length;r<o;r++){var a=n[r];t[a]=e[a]}},t.MD5=function(e){var t=function(e){for(var t,n="0123456789ABCDEF",r="",o=0;o<e.length;o++)t=e.charCodeAt(o),r+=n.charAt(t>>>4&15)+n.charAt(15&t);return r}(function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}(function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,l=-271733879,c=-1732584194,u=271733878,p=0;p<e.length;p+=16){var f=n,d=l,h=c,y=u;l=i(l=i(l=i(l=i(l=a(l=a(l=a(l=a(l=o(l=o(l=o(l=o(l=r(l=r(l=r(l=r(l,c=r(c,u=r(u,n=r(n,l,c,u,e[p+0],7,-680876936),l,c,e[p+1],12,-389564586),n,l,e[p+2],17,606105819),u,n,e[p+3],22,-1044525330),c=r(c,u=r(u,n=r(n,l,c,u,e[p+4],7,-176418897),l,c,e[p+5],12,1200080426),n,l,e[p+6],17,-1473231341),u,n,e[p+7],22,-45705983),c=r(c,u=r(u,n=r(n,l,c,u,e[p+8],7,1770035416),l,c,e[p+9],12,-1958414417),n,l,e[p+10],17,-42063),u,n,e[p+11],22,-1990404162),c=r(c,u=r(u,n=r(n,l,c,u,e[p+12],7,1804603682),l,c,e[p+13],12,-40341101),n,l,e[p+14],17,-1502002290),u,n,e[p+15],22,1236535329),c=o(c,u=o(u,n=o(n,l,c,u,e[p+1],5,-165796510),l,c,e[p+6],9,-1069501632),n,l,e[p+11],14,643717713),u,n,e[p+0],20,-373897302),c=o(c,u=o(u,n=o(n,l,c,u,e[p+5],5,-701558691),l,c,e[p+10],9,38016083),n,l,e[p+15],14,-660478335),u,n,e[p+4],20,-405537848),c=o(c,u=o(u,n=o(n,l,c,u,e[p+9],5,568446438),l,c,e[p+14],9,-1019803690),n,l,e[p+3],14,-187363961),u,n,e[p+8],20,1163531501),c=o(c,u=o(u,n=o(n,l,c,u,e[p+13],5,-1444681467),l,c,e[p+2],9,-51403784),n,l,e[p+7],14,1735328473),u,n,e[p+12],20,-1926607734),c=a(c,u=a(u,n=a(n,l,c,u,e[p+5],4,-378558),l,c,e[p+8],11,-2022574463),n,l,e[p+11],16,1839030562),u,n,e[p+14],23,-35309556),c=a(c,u=a(u,n=a(n,l,c,u,e[p+1],4,-1530992060),l,c,e[p+4],11,1272893353),n,l,e[p+7],16,-155497632),u,n,e[p+10],23,-1094730640),c=a(c,u=a(u,n=a(n,l,c,u,e[p+13],4,681279174),l,c,e[p+0],11,-358537222),n,l,e[p+3],16,-722521979),u,n,e[p+6],23,76029189),c=a(c,u=a(u,n=a(n,l,c,u,e[p+9],4,-640364487),l,c,e[p+12],11,-421815835),n,l,e[p+15],16,530742520),u,n,e[p+2],23,-995338651),c=i(c,u=i(u,n=i(n,l,c,u,e[p+0],6,-198630844),l,c,e[p+7],10,1126891415),n,l,e[p+14],15,-1416354905),u,n,e[p+5],21,-57434055),c=i(c,u=i(u,n=i(n,l,c,u,e[p+12],6,1700485571),l,c,e[p+3],10,-1894986606),n,l,e[p+10],15,-1051523),u,n,e[p+1],21,-2054922799),c=i(c,u=i(u,n=i(n,l,c,u,e[p+8],6,1873313359),l,c,e[p+15],10,-30611744),n,l,e[p+6],15,-1560198380),u,n,e[p+13],21,1309151649),c=i(c,u=i(u,n=i(n,l,c,u,e[p+4],6,-145523070),l,c,e[p+11],10,-1120210379),n,l,e[p+2],15,718787259),u,n,e[p+9],21,-343485551),n=s(n,f),l=s(l,d),c=s(c,h),u=s(u,y)}return Array(n,l,c,u)}(function(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}(e),8*e.length)));return t.toLowerCase()},t.insertScript=function(e){var t=document.createElement("script");t.src=e,t.type="text/javascript",t.async=!0;var n=new Promise((function(e,n){t.onload=function(){e()},t.onerror=function(){n()},t.onabort=function(){n()}}));return document.head.appendChild(t),n},t.createStyleSheet=function(e,t){if(!t||!document.getElementById(t)){var n=document.createElement("style");n.innerHTML=e,t&&(n.id=t),document.getElementsByTagName("head")[0].appendChild(n)}},t.createLinkSheet=function(e,t){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=e,document.getElementsByTagName("head")[0].appendChild(n)},t.isNumeric=function(e){return null!=(e||"").replace(/\s+/g,"").match(/^[+\-]?[0-9]+\.?[0-9]*$/)},t.urlJoin=function(e,t){return e=e.trim(),t=t.trim(),e.endsWith("/")||(e+="/"),t.startsWith("/")&&(t=t.substring(1)),e+t}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}!function(){var e=n(452),t=n(66),r=n(830),o=n(216),a=n(657);function i(e){(0,o.findQuillGroups)(e),(0,a.findPyGenerators)()}(0,e.applyPolyfills)();var s=!1;window.MQWidgets=window.MQWidgets||{},window.MQWidgets.init=function(e){if(s)i(e.widgets);else if(e.engines){Array.isArray(e.engines)||(e.engines=[e.engines]),t.cfg.setUserConfig(e),(0,r.createLinkSheet)((0,r.urlJoin)(t.cfg.MQWIDGETS_BASEURL,"mqwidgets2.css"));var n=[(0,r.insertScript)(t.cfg.MATHQUILL_URL)];e.engines.indexOf("nerdamer")>=0&&n.push((0,r.insertScript)(t.cfg.NERDAMER_URL)),Promise.all(n).then((function(){i(null==e?void 0:e.widgets),s=!0}),(function(){console.error("Unable to load the required dependencies")}))}else console.error("The engines option in the init method is required.")},window.MQWidgets.reflow=i}()}();
//# sourceMappingURL=mqwidgets2.js.map