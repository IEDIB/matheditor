!function(){"use strict";var e={800:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createSubmitButtonForGroup=t.bindSubmitActionButton=void 0;var a=n(247),i=n(66),r=n(830),o=(new Date).getTime();function s(e,t,n){var s=i.shared[e],l=Object.keys(s);t.off(),t.on("click",(function(t){t.preventDefault();var c=(new Date).getTime();if(o&&c-o<1e3)console.error("Too frequently checks are blocked!");else{var u=[];console.log("gid",e,"qids",l);for(var p=0,f=l.length;p<f;p++){var d=l[p],h=s[d];if(h.status==i.cfg.STATUS.MODIFIED){var v=h.latex()||[];if("string"==typeof v&&(v=[v]),0===v.length||(0,a.has_empty_answers)(v))h.checkMsg(-1,"Falten respostes"),console.log("contains empty answers");else if(1!=h.status&&v){if(h.def.right_answer&&(h.wrong_attemps||0)>i.cfg.MAX_ATTEMPTS&&(console.log("TODO:: Must show right answer and disable quill"),h.showAnswer&&!h.isPigen)){h.showAnswer();continue}if(h.qtype==i.cfg.QTYPES.M||h.type==i.cfg.QTYPES.Ms){var y=h.comodiUsed?5:10;h.def.ans==v?h.checkMsg(1,"Molt bé!"):(y=0,h.wrong_attemps+=1,h.checkMsg(0,"Incorrecte")),n&&n(y);continue}console.log("Posting",h),o=c;var m={latex:v,qid:d};console.log("Locally? ",h.def,v);var g;if(null!=(g=h.def.anse?atob(h.def.anse):h.def.ans)&&!isNaN(g)&&!isNaN(v)){y=h.comodiUsed?5:10,console.log("Numeric answer can be checked locally");var b=parseFloat(g)-parseFloat(v),w=0;h.def.rules&&h.def.rules.precission&&(w=h.def.rules.precission),Math.abs(b)<=w?h.checkMsg(1,"Molt bé!"):(y=0,h.wrong_attemps+=1,h.checkMsg(0,"Incorrecte")),n&&n(y);continue}(0,r.copyPropsFromTo)(h.def,m),i.cfg.pageInfo&&(m.pageInfo=i.cfg.pageInfo,h.hash||(h.hash=(0,r.MD5)(m.formulation+"_"+(m.pageInfo.bookId||0)+"_"+(m.pageInfo.chapterId||0))),m.hash=h.hash),u.push($.ajax({type:"POST",url:i.cfg.CAS_URL,data:JSON.stringify(m),dataType:"json",success:function(e){console.log("success",e);var t=s[e.qid];0==e.correct&&t.increment_wrong&&t.increment_wrong(),t.checkMsg(e.correct,e.msg);var a=e.correct?t.comodiUsed?5:10:0;n&&n(a)},error:function(e){console.log("error",e)}}))}}else console.log("Unmodified, nothing to check")}}}))}t.bindSubmitActionButton=s,t.createSubmitButtonForGroup=function(e){var t=$('<button class="btn btn-sm btn-primary pw-me-submitgroup"><i class="fas fa-check"></i> Comprova</button>');return s(e,t),t}},247:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.has_empty_answers=t.extractMatrices=void 0;var n=/\\begin{pmatrix}(.*?)\\end{pmatrix}/g;function a(e){for(var t=[],a=null,i=function(){var e=[];a[1].split("\\\\").forEach((function(t){var n=t.split("&");e.push(n)})),t.push(e)};null!==(a=n.exec(e));)i();return t}t.extractMatrices=a;var i=function(e){for(var t=e.length,n=0;n<t;n++)for(var a=e[n],i=a.length,r=0;r<i;r++)if(!a[r])return!0;return!1};t.has_empty_answers=function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];if(""==r||r&&!r.trim())return!0;for(var o=a(r),s=0,l=o.length;s<l;s++)if(i(o[s]))return!0}return!1}},968:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.LevelIndicator=void 0;var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.numLevels=t,this.container=$('<div style="display:inline-block;font-size:90%;" data-toggle="tooltip"></div>'),this.levelIcons=[];for(var n=0;n<t;n++){var a=$('<i class="fas fa-pepper-hot" style="color:lightgray;"></i>');this.container.append(a),this.levelIcons.push(a)}}var t,a;return t=e,(a=[{key:"$div",get:function(){return this.container}},{key:"setLevel",value:function(e){e<0?e=0:e>this.numLevels&&(e=this.numLevels);for(var t=0;t<this.numLevels;t++)t<e?this.levelIcons[t].css("color","darkred"):this.levelIcons[t].css("color","lightgray");this.container.attr("data-original-title","Nivell "+e),this.container.removeAttr("title")}},{key:"setVisible",value:function(e){this.container.css("display",e?"":"none")}}])&&n(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.LevelIndicator=a},281:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.PwDialog=void 0;var a=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id="pwdlg_"+Math.random().toString(32).substring(2),this.window=$('<div id="'+this.id+'" class="pw-me-dlg" style="width:'+n+"px;height:"+a+'px;display:none;"></div>');var i=$('<div class="pw-me-dlg-header"></div>');this.topBar=i;var r=$('<span class="pw-me-dlg-headertitle">'+t+"</span>");this.closeBtn=$('<button class="btn btn-sm pw-me-btn-dlgclose" title="Tancar"><i class="fas fa-times"></i></button>');var o=this;this.closeBtn.on("click",(function(e){e.preventDefault(),o.window.css("display","none")})),i.append(r),i.append(this.closeBtn),this.window.append(i),$("body").append(this.window);var s,l,c,u,p=!1,f=0,d=0;this.dragStart=function(e){"touchstart"===e.type?(c=e.touches[0].clientX-f,u=e.touches[0].clientY-d):(c=e.clientX-f,u=e.clientY-d),e.target===i[0]&&(p=!0)},this.dragEnd=function(e){c=s,u=l,p=!1},this.setTranslate=function(e,t,n){n.style.transform="translate3d("+e+"px, "+t+"px, 0)"},this.drag=function(e){p&&(e.preventDefault(),"touchmove"===e.type?(s=e.touches[0].clientX-c,l=e.touches[0].clientY-u):(s=e.clientX-c,l=e.clientY-u),f=s,d=l,o.setTranslate(s,l,o.window[0]))},i[0].addEventListener("touchstart",this.dragStart,!1),i[0].addEventListener("touchend",this.dragEnd,!1),i[0].addEventListener("touchmove",this.drag,!1),i[0].addEventListener("mousedown",this.dragStart,!1),i[0].addEventListener("mouseup",this.dragEnd,!1),i[0].addEventListener("mousemove",this.drag,!1)}var t,a;return t=e,(a=[{key:"append",value:function(e){this.window.append(e)}},{key:"show",value:function(){this.window.css("display","initial")}},{key:"close",value:function(){this.window.css("display","none")}},{key:"remove",value:function(){this.closeBtn.off(),this.window.remove(),this.topBar[0].removeEventListener("touchstart",this.dragStart),this.topBar[0].removeEventListener("touchend",this.dragEnd),this.topBar[0].removeEventListener("touchmove",this.drag),this.topBar[0].removeEventListener("mousedown",this.dragStart),this.topBar[0].removeEventListener("mouseup",this.dragEnd),this.topBar[0].removeEventListener("mousemove",this.drag)}},{key:"dispose",value:function(){this.remove()}}])&&n(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.PwDialog=a},541:function(e,t,n){function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function o(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorDialog=void 0;var c=n(830),u=n(786),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(d,e);var t,n,a,p,f=(a=d,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(a);if(p){var n=l(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return o(this,e)});function d(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var t=s(e=f.call(this,'<i style="color:darkred;" class="fas fa-square-root-alt"></i> Editor matemàtic',500,320));e.editorPanel=new u.EditorPanel(e.window,"0");var n=$('<div class="pw-me-dlg-controls"></div>'),a=$('<button class="btn btn-sm btn-primary">Accepta</button>'),i=$('<button class="btn btn-sm btn-outline-primary">Cancel·la</button>');return n.append(a),n.append(i),e.append(n),a.on("click",(function(e){e.preventDefault(),t.acceptFn&&t.acceptFn(t),t.close()})),i.on("click",(function(e){e.preventDefault(),t.cancelFn&&t.cancelFn(t),t.close()})),e}return t=d,(n=[{key:"latex",value:function(e){return null!=e?(this.editorPanel.latex(e),""):(0,c.sanitizeLaTeX)(this.editorPanel.latex())}},{key:"show",value:function(){this.window.css("display",""),this.editorPanel.focus()}},{key:"dispose",value:function(){this.editorPanel.dispose(),this.window.find("button").off(),this.dispose()}},{key:"reflow",value:function(){this.editorPanel.reflow()}},{key:"setDefinition",value:function(e){this.editorPanel.setDefinition(e)}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),d}(n(281).PwDialog);t.EditorDialog=p},437:function(e,t,n){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorCloze=void 0;var i=n(66),r=n(830),o=n(281),s=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this;this.answerShown=!1,this.dlg_btn_el=null,this.gid=n,this.status=i.cfg.STATUS.UNMODIFIED,this.parent=t,this.wrong_attemps=0,this.quill_el_container=$('<div class="pw-me-editorinput"></div>');var o=$("<span>"+a+"</span>");this.check_el=$('<div class="pw-me-check"></div>'),this.parent.append(this.quill_el_container),this.quill_el_container.append(o),this.mathInput=i.shared.MQ.StaticMath(o[0]),this.mathInput.innerFields.forEach((function(e){e.__controller.textarea.on("keyup",(function(e){e.preventDefault(),r.status!=i.cfg.STATUS.MODIFIED&&(r.check_el.html(""),r.status=i.cfg.STATUS.MODIFIED,r.quill_el_container.removeClass("pw-me-right pw-me-wrong pw-me-alert"))}))})),this.quill_el_container.append(this.check_el)}var t,n;return t=e,(n=[{key:"clear",value:function(){for(var e=this.mathInput.innerFields,t=0,n=e.length;t<n;t++)e[t].latex("");this.check_el.html(""),this.status=i.cfg.STATUS.UNMODIFIED,this.quill_el_container.removeClass("pw-me-right pw-me-wrong pw-me-alert")}},{key:"focus",value:function(){this.mathInput.focus()}},{key:"latex",value:function(e){if(null==e){var t=[];console.log(this.mathInput.innerFields);for(var n=this.mathInput.innerFields,a=0,r=n.length;a<r;a++)t.push(n[a].latex());return t}this.mathInput.latex(e),this.status=i.cfg.STATUS.UNMODIFIED}},{key:"checkMsg",value:function(e,t){this.status=e;var n="";1==e?(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-check"></i></span>',this.quill_el_container.addClass("pw-me-right")):0==e?(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-times"></i></span>',this.quill_el_container.addClass("pw-me-wrong")):(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-exclamation-triangle"></i></span>',this.quill_el_container.addClass("pw-me-alert")),this.check_el.html(n)}},{key:"get_qid",value:function(){return this.mathInput.id}},{key:"dispose",value:function(){this.mathInput.revert(),this.quill_el_container.find("button").off()}},{key:"reflow",value:function(){this.mathInput.reflow(),this.status=i.cfg.STATUS.UNMODIFIED}},{key:"setDefinition",value:function(e){this.def=e}},{key:"increment_wrong",value:function(){this.wrong_attemps+=1}},{key:"showAnswer",value:function(){if(this.def.right_answer){var e=this;if(!i.shared.showAnswerDlg){var t=new o.PwDialog("Resposta correcta",400,250);i.shared.showAnswerDlg=t;var n=$('<div class="pw-answer-holder"></div>');t.append(n);var a=$('<button class="btn btn-sm btn-primary" style="margin-left: 15px;">Tancar</button>');t.append(a),a.on("click",(function(e){e.preventDefault(),t.close()}))}e.answerShown||(e.answerShown=!0,e.status=i.cfg.STATUS.UNMODIFIED,e.dlg_btn_el&&e.dlg_btn_el.prop("disabled",!0));var s=i.shared.showAnswerDlg;s.window.find(".pw-answer-holder").html(atob(e.def.right_answer)+"<p><br></p>"),(0,r.reflowLatex)(),s.show()}else console.log("Cannot show answer because, ",this.def.right_answer)}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.EditorCloze=s},980:function(e,t,n){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorInput=void 0;var i=n(66),r=n(830),o=n(281),s=n(541),l=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this;this.gid=n,this.status=i.cfg.STATUS.UNMODIFIED,this.answerShown=!1,this.parent=t,this.wrong_attemps=0,this.quill_el_container=$('<div class="pw-me-editorinput"></div>'),this.quill_blocker=$("<div></div>");var o=$("<span></span>");this.quill_blocker.append(o),this.check_el=$('<div class="pw-me-check"></div>'),this.quill_el_container.append(this.quill_blocker);var l=a===i.cfg.QTYPES.S;this.parent.append(this.quill_el_container),this.mathInput=i.shared.MQ.MathField(o[0],{handlers:{edit:function(){console.log("Edit ev on mathquill ",r.mathInput.latex()),r.status!=i.cfg.STATUS.MODIFIED&&(r.check_el.html(""),r.status=i.cfg.STATUS.MODIFIED,r.quill_el_container.removeClass("pw-me-right pw-me-wrong pw-me-alert"))}}}),l&&(this.dlg_btn_el=$('<button class="btn btn-sm pw-me-btn-openeditor" title="Obrir l\'editor"><i class="fas fa-square-root-alt"></i></button>'),this.quill_el_container.append(this.dlg_btn_el),this.dlg_btn_el.on("click",(function(e){e.preventDefault();var t=i.shared.editordlg;t||(t=new s.EditorDialog,i.shared.editordlg=t),t.acceptFn=function(e){r.mathInput.latex(e.latex())},t.setDefinition(r.def),t.show(),t.latex(r.mathInput.latex())}))),this.quill_el_container.append(this.check_el)}var t,n;return t=e,(n=[{key:"clear",value:function(){this.mathInput.latex(""),this.check_el.html(""),this.status=i.cfg.STATUS.UNMODIFIED,this.quill_el_container.removeClass("pw-me-right pw-me-wrong pw-me-alert")}},{key:"focus",value:function(){this.mathInput.focus()}},{key:"latex",value:function(e){return null==e?(0,r.sanitizeLaTeX)(this.mathInput.latex()):(console.log("Setting latex ",e),this.mathInput.latex(e),this.status=i.cfg.STATUS.UNMODIFIED,"")}},{key:"checkMsg",value:function(e,t){this.status=e;var n=null;1==e?(n='<span data-toggle="tooltip" title="'+t+'"><i class="'+i.cfg.RIGHT_ICON+'"></i></span>',this.quill_el_container.addClass("pw-me-right")):0==e?(n='<span data-toggle="tooltip" title="'+t+'"><i class="'+i.cfg.WRONG_ICON+'"></i></span>',this.quill_el_container.addClass("pw-me-wrong")):(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-exclamation-triangle"></i></span>',this.quill_el_container.addClass("pw-me-alert")),this.check_el.html(n)}},{key:"get_qid",value:function(){return this.mathInput.id}},{key:"dispose",value:function(){this.mathInput.revert(),this.quill_el_container.find("button").off()}},{key:"showAnswer",value:function(){if(this.def.right_answer){var e=this;if(!i.shared.showAnswerDlg){var t=new o.PwDialog("Resposta correcta",400,250);i.shared.showAnswerDlg=t;var n=$('<div class="pw-answer-holder"></div>');t.append(n);var a=$('<button class="btn btn-sm btn-primary" style="margin-left: 15px;">Tancar</button>');t.append(a),a.on("click",(function(e){e.preventDefault(),t.close()}))}e.answerShown||(e.answerShown=!0,e.status=i.cfg.STATUS.UNMODIFIED,e.quill_blocker.addClass("pw-me-blocker"),e.dlg_btn_el&&e.dlg_btn_el.prop("disabled",!0)),(n=(t=i.shared.showAnswerDlg).window.find(".pw-answer-holder")).html(atob(e.def.right_answer)+"<p><br></p>"),(0,r.reflowLatex)(),t.show()}else console.log("Cannot show answer because, ",this.def.right_answer)}},{key:"increment_wrong",value:function(){if(this.wrong_attemps+=1,this.wrong_attemps==i.cfg.MAX_ATTEMPTS+1&&!this.isPigen&&this.def){console.log(this.def);var e=$('<button class="btn btn-sm" title="Mostra la solució"><i class="far fa-question-circle"></i></button>'),t=this;e.on("click",(function(e){t.showAnswer()})),this.def.right_answer?this.quill_el_container.append(e):$.ajax({type:"POST",url:i.cfg.GETANSWER_URL,data:JSON.stringify(this.def),dataType:"json",success:function(n){n.right_answer?(t.def.right_answer=n.right_answer,t.quill_el_container.append(e)):n.msg&&console.error(n.msg)}})}}},{key:"reflow",value:function(){this.mathInput.reflow(),this.status=i.cfg.STATUS.UNMODIFIED}},{key:"setDefinition",value:function(e){this.def=e}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.EditorInput=l},786:function(e,t,n){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EditorPanel=void 0;var r=n(66),o=n(830),s=n(820),l=n(280),c=i(n(727)),u=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=this;this.parent=t,this.gid=n,this.wrong_attemps=0,this.standalone=a||!1,this.status=r.cfg.STATUS.UNMODIFIED,this.panel=$('<div class="pw-me-editorpanel" style="position:relative"></div>'),this.parent.append(this.panel),this.palettes=new s.PwTabMenu(this.panel);var u=$('<span class="pw-me-editorpanel-mathinput"></span>');u.on("click",(function(e){e.preventDefault(),$(".pw-me-btn-dropdownmenu").css("display","none")})),this.panel.append(u),this.mathInput=r.shared.MQ.MathField(u[0],{handlers:{edit:function(){a&&i.status!=r.cfg.STATUS.MODIFIED&&(i.check_el&&i.check_el.html(""),i.status=r.cfg.STATUS.MODIFIED)}}}),this.standalone&&(this.check_el=$("<div></div>"),this.panel.append(this.check_el)),this.feedback_el=$('<div class="pw-mq-feedback" style="display:none;"></div>'),this.panel.append(this.feedback_el),(0,o.items)(c.default.button_meta,(function(e,t){var n=c.default.default_toolbar_tabs[t.tab-1];i.palettes.addTab(n);var a=(0,l.createToolbarButton)(i.panel,t,e,i.mathInput);i.palettes.addContentsToTab(n,a)}))}var t,n;return t=e,(n=[{key:"$div",get:function(){return this.panel}},{key:"clear",value:function(){this.mathInput.latex(""),this.check_el&&this.check_el.html(""),this.status=r.cfg.STATUS.UNMODIFIED}},{key:"focus",value:function(){this.mathInput.focus()}},{key:"latex",value:function(e){return null==e?(0,o.sanitizeLaTeX)(this.mathInput.latex()):(this.mathInput.latex(e),this.status=r.cfg.STATUS.UNMODIFIED,"")}},{key:"checkMsg",value:function(e,t){if(this.standalone){this.status=e;var n;n=1==e?'<span style="color:green;margin:5px;"><i class="fas fa-check"></i> '+t+"</span>":0==e?'<span style="color:darkred;margin:5px;"><i class="fas fa-times"></i> '+t+"</span>":'<span style="color:purple;margin:5px;"><i class="fas fa-exclamation-triangle"></i> '+t+"</span>",this.check_el&&this.check_el.html(n)}}},{key:"get_qid",value:function(){return this.mathInput.id}},{key:"showPalette",value:function(e,t){this.palettes.setVisible(e,t)}},{key:"dispose",value:function(){this.mathInput.revert(),this.panel.find("button").off(),this.palettes.dispose()}},{key:"reflow",value:function(){this.mathInput.reflow(),this.status=r.cfg.STATUS.UNMODIFIED}},{key:"setDefinition",value:function(e){this.def=e;var t=this;if("all"==e.palettes)c.default.default_toolbar_tabs.forEach((function(e){t.palettes.setVisible(e,!0)})),this.palettes.setTab("General");else if(e.palettes&&e.palettes.length){var n=null,a=0;c.default.default_toolbar_tabs.forEach((function(i){for(var r=!1,o=0;!r&&o<e.palettes.length;)(r=e.palettes[o].toLowerCase().trim()==i.toLowerCase().trim())&&0==o&&(n=i),r&&(a+=1),o+=1;t.palettes.setVisible(i,r)})),0!=a&&n||this.palettes.setVisible("General",!0),this.palettes.setTab(n||"General")}else c.default.default_toolbar_tabs.forEach((function(e){t.palettes.setVisible(e,"General"==e)})),this.palettes.setTab("General")}},{key:"showAnswer",value:function(){if(!this.def.right_answer)return console.log(this.def),void console.error("Cannot show answer because, ",this.def.right_answer);this.feedback_el.css("display",""),this.feedback_el.html(atob(this.def.right_answer)+"<p><br></p>"),(0,o.reflowLatex)()}},{key:"increment_wrong",value:function(){this.wrong_attemps+=1}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.EditorPanel=u},590:function(e,t,n){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleChoiceCombo=void 0;var i=n(66),r=n(830),o=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof a&&(a=a.split(";"));var o=this;this.selectedIndex="",this.gid=n,this.qid=Math.floor(1e4*Math.random())+1e4,this.options=a||[],this.status=i.cfg.STATUS.UNMODIFIED,this.parent=t,this.wrong_attemps=0,this.quill_el_container=$('<div class="pw-me-mchoice"></div>'),this.check_el=$('<div class="pw-me-check"></div>');var s=$('<div class="dropdown"></div>');this.btn_action=$('<button type="button" style="background:white;" class="btn btn-outline-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Tria una opció</button>');var l=$('<div class="dropdown-menu"></div>');s.append(this.btn_action),a.forEach((function(e,t){var n=$('<a class="dropdown-item" href="#">'+e+"</a>");n.on("click",(function(e){e.preventDefault(),o.selectedIndex=t+"",o.btn_action.html(n.html()),o.status!=i.cfg.STATUS.MODIFIED&&(o.check_el.html(""),o.status=i.cfg.STATUS.MODIFIED,o.quill_el_container.removeClass("pw-me-right pw-me-wrong pw-me-alert"))})),l.append(n)})),s.append(l),this.quill_el_container.append(s),this.quill_el_container.append(this.check_el),this.parent.append(this.quill_el_container),(0,r.reflowLatex)()}var t,n;return t=e,(n=[{key:"clear",value:function(){this.selectedIndex="",this.btn_action.html(""),this.check_el.html(""),this.status=i.cfg.STATUS.UNMODIFIED,this.quill_el_container.removeClass("pw-me-right pw-me-wrong pw-me-alert")}},{key:"focus",value:function(){this.btn_action.focus()}},{key:"latex",value:function(e){return this.selectedIndex}},{key:"checkMsg",value:function(e,t){this.status=e;var n="";1==e?(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-check"></i></span>',this.quill_el_container.addClass("pw-me-right")):0==e?(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-times"></i></span>',this.quill_el_container.addClass("pw-me-wrong")):(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-exclamation-triangle"></i></span>',this.quill_el_container.addClass("pw-me-alert")),this.check_el.html(n)}},{key:"get_qid",value:function(){return this.qid}},{key:"dispose",value:function(){this.quill_el_container.off()}},{key:"reflow",value:function(){this.status=i.cfg.STATUS.UNMODIFIED}},{key:"setDefinition",value:function(e){this.def=e}},{key:"increment_wrong",value:function(){this.wrong_attemps+=1}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.MultipleChoiceCombo=o},820:function(e,t,n){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.PwTabMenu=void 0;var i=n(830),r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$panel=$('<div class="pw-me-tabmenu"></div>'),this.parent=t,this.tabs={},this.currentTab=null,this.tabsPanel=$('<div class="pw-me-tabspanel"></div>'),this.contentsPanel=$('<div class="pw-me-tabcontents"></div>'),this.$panel.append(this.tabsPanel),this.$panel.append(this.contentsPanel),this.parent&&this.parent.append(this.$panel)}var t,n;return t=e,(n=[{key:"$div",get:function(){return this.$panel}},{key:"addTab",value:function(e){if(!this.tabs[e]){var t=this,n=$('<button style="display:none;" class="btn btn-sm pw-me-btn-tab">'+e+"</button>"),a=$('<div style="display:none;" class="pw-me-tabcontainer"></div>');n.on("click",(function(n){n.preventDefault(),t.setTab(e)})),this.tabsPanel.append(n),this.contentsPanel.append(a),this.tabs[e]={tab:n,container:a},1===Object.keys(this.tabs).length&&this.setTab(e)}}},{key:"addContentsToTab",value:function(e,t){this.tabs[e]&&this.tabs[e].container.append(t)}},{key:"setVisible",value:function(e,t){this.tabs[e]&&(this.tabs[e].tab.css("display",t?"":"none"),this.tabs[e].container.css("display",t?"flex":"none"))}},{key:"setTab",value:function(e){(0,i.items)(this.tabs,(function(t,n){t==e?n.tab.addClass("pw-me-btn-active"):n.tab.removeClass("pw-me-btn-active"),n.container.css("display",t==e?"flex":"none")}))}},{key:"dispose",value:function(){this.tabsPanel.children().off(),this.tabsPanel.html(""),this.contentsPanel.html(""),this.tabs={}}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.PwTabMenu=r},280:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createToolbarButton=void 0;var a=n(66);t.createToolbarButton=function(e,t,n,i){if("function"==typeof t.latex){var r=$('<div class="btn btn-sm pw-me-btn-toolbar pw-me-btn-dropdown" title="'+n.trim()+'"></div>'),o=$("<span>"+t.icon+"</span>");a.shared.MQ.StaticMath(o[0]),r.append(o);var s=$('<div class="pw-me-btn-dropdownmenu"></div>');e.append(s);for(var l=[],c=0,u=t.vars.length;c<u;c++){var p=t.vars[c],f=p.name,d="";null!=p.min&&(d=' min="'+p.min+'" '),null!=p.max&&(d+=' max="'+p.max+'" ');var h=$('<input style="width:50px;margin-left:4px;grid-column:2;" type="'+p.type+'" value="'+p.val+'"'+d+"/>");l.push(h);var v=$('<span style="grid-column:1">'+f+"</span>");s.append(v),s.append(h)}var y=$('<button class="btn btn-sm" style="padding:4px;grid-row:3;grid-column:1 / 2;background:lightgray;">Ok</button>');s.append(y),y.on("click",(function(e){e.preventDefault();for(var n={},a=0,r=l.length;a<r;a++){var o=l[a],c=t.vars[a],u=c.name,p=o.val();"number"===c.type&&(p=parseInt(p)),n[u]=p}var f=t.latex(n);i.write(f),t.moveto&&i.keystroke(t.moveto),s.css("display","none"),i.focus()})),r.on("click",(function(e){e.preventDefault();var t=s.css("display");s.css("display","none"===t?"grid":"none")}))}else r=$('<button class="btn btn-sm pw-me-btn-toolbar" title="'+n.trim()+'"></button>'),o=$("<span>"+t.icon+"</span>"),a.shared.MQ.StaticMath(o[0]),r.append(o),r.on("click",(function(e){e.preventDefault(),i.write(t.latex),i.focus(),t.moveto&&i.keystroke(t.moveto),$(".pw-me-btn-dropdownmenu").css("display","none")}));return r}},727:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={default_toolbar_buttons:["fraction","square_root","cube_root","root","superscript","subscript","multiplication","division","plus_minus","pi","degree","not_equal","greater_equal","less_equal","greater_than","less_than","angle","parallel_to","perpendicular","triangle","parallelogram","round_brackets","matrix2","matrix3"],default_toolbar_tabs:["General","Símbols","Geometria","Intervals"],button_meta:{"Multiplicació":{latex:"\\times",tab:1,icon:"\\times"},"Fracció":{latex:"\\frac{}{}",moveto:"Up",movefor:1,tab:1,icon:"\\frac{\\square}{\\square}"},Exponent:{latex:"\\^{}",moveto:"Up",movefor:1,tab:1,icon:"\\square^2"},"Parèntesis":{latex:"\\left(\\right)",moveto:"Left",movefor:1,tab:1,icon:"\\left(\\square\\right)"},"Arrel quadrada":{latex:"\\sqrt{}",moveto:"Left",movefor:1,tab:1,icon:"\\sqrt{\\square}"},"Arrel cúbica":{latex:"\\sqrt[3]{}",moveto:"Left",movefor:1,tab:1,icon:"\\sqrt[3]{\\square}"},Radical:{latex:"\\sqrt[{}]{}",moveto:"Left",movefor:2,tab:1,icon:"\\sqrt[\\square]{\\square}"},"Matriu 2x2":{latex:"\\begin{pmatrix} & \\\\ & \\end{pmatrix}",tab:1,icon:"M_{2\\times 2}"},"Matriu 3x3":{latex:"\\begin{pmatrix} & & \\\\ & &  \\\\ & & \\end{pmatrix}",tab:1,icon:"M_{3\\times 3}"},"Matriu mxn":{latex:function(e){for(var t=[],n=0;n<e.n;n++){for(var a=[],i=0;i<e.m;i++)a.push(" ");t.push(a.join("&"))}return"\\begin{pmatrix} "+t.join("\\\\")+" \\end{pmatrix}"},tab:1,icon:"M_{n\\times m}",vars:[{name:"n",type:"number",min:1,val:2},{name:"m",type:"number",min:1,val:2}]},"Subíndex":{latex:"\\_{}",moveto:"Down",movefor:1,tab:1,icon:"\\square_{2}"},pi:{latex:"\\pi",tab:2,icon:"\\pi"},e:{latex:"\\e",tab:2,icon:"\\e"},infinit:{latex:"\\infty",tab:2,icon:"\\infty"},"Més menys":{latex:"\\pm",tab:2,icon:"\\pm"},Diferent:{latex:"\\neq",tab:2,icon:"\\neq"},"Major o igual":{latex:"\\geq",tab:2,icon:"\\geq"},"Menor o igual":{latex:"\\leq",tab:2,icon:"\\leq"},"Major que":{latex:"\\gt",tab:2,icon:"\\gt"},"Menor que":{latex:"\\lt",tab:2,icon:"\\lt"},Graus:{latex:"\\degree",tab:3,icon:"\\degree"},Angle:{latex:"\\angle",tab:3,icon:"\\angle"},"Paral·lel a":{latex:"\\parallel",tab:3,icon:"\\parallel"},"Perpendicular a":{latex:"\\perpendicular",tab:3,icon:"\\perpendicular"},Triangle:{latex:"\\triangle",tab:3,icon:"\\triangle"},"Paral·lelogram":{latex:"\\parallelogram",tab:3,icon:"\\parallelogram"},"Interval obert":{latex:"\\left( , \\right)",moveto:"Left",movefor:2,tab:4,icon:"\\left(\\square, \\square\\right)"},"Interval tancat":{latex:"\\left[ , \\right]",moveto:"Left",movefor:2,tab:4,icon:"\\left[\\square, \\square\\right]"},"Interval semi1":{latex:"\\left[ , \\right)",moveto:"Left",movefor:2,tab:4,icon:"\\left[\\square, \\square\\right)"},"Interval semi2":{latex:"\\left( , \\right]",moveto:"Left",movefor:2,tab:4,icon:"\\left(\\square, \\square\\right]"},Infinit:{latex:"\\infty",tab:4,icon:"\\infty"},"Conjunt dels reals":{latex:"\\mathbb{R}",tab:4,icon:"\\mathbb{R}"}},keyboard_keys:{letters:[{value:"q",type:"write",class:"ks",display:"q",new_line:!1},{value:"w",type:"write",class:"ks",display:"w",new_line:!1},{value:"e",type:"write",class:"ks",display:"e",new_line:!1},{value:"r",type:"write",class:"ks",display:"r",new_line:!1},{value:"t",type:"write",class:"ks",display:"t",new_line:!1},{value:"y",type:"write",class:"ks",display:"y",new_line:!1},{value:"u",type:"write",class:"ks",display:"u",new_line:!1},{value:"i",type:"write",class:"ks",display:"i",new_line:!1},{value:"o",type:"write",class:"ks",display:"o",new_line:!1},{value:"p",type:"write",class:"ks",display:"p",new_line:!0},{value:"a",type:"write",class:"ks",display:"a",new_line:!1},{value:"s",type:"write",class:"ks",display:"s",new_line:!1},{value:"d",type:"write",class:"ks",display:"d",new_line:!1},{value:"f",type:"write",class:"ks",display:"f",new_line:!1},{value:"g",type:"write",class:"ks",display:"g",new_line:!1},{value:"h",type:"write",class:"ks",display:"h",new_line:!1},{value:"j",type:"write",class:"ks",display:"j",new_line:!1},{value:"k",type:"write",class:"ks",display:"k",new_line:!1},{value:"l",type:"write",class:"ks",display:"l",new_line:!0},{value:"CapsLock",type:"custom",class:"ks long icon",display:"&#8673;",new_line:!1},{value:"z",type:"write",class:"ks",display:"z",new_line:!1},{value:"x",type:"write",class:"ks",display:"x",new_line:!1},{value:"c",type:"write",class:"ks",display:"c",new_line:!1},{value:"v",type:"write",class:"ks",display:"v",new_line:!1},{value:"b",type:"write",class:"ks",display:"b",new_line:!1},{value:"n",type:"write",class:"ks",display:"n",new_line:!1},{value:"m",type:"write",class:"ks",display:"m",new_line:!1},{value:"Backspace",type:"keystroke",class:"ks long icon",display:"&#8678;",new_line:!0},{value:"numpad",type:"custom",class:"ks long",display:"123",new_line:!1},{value:",",type:"write",class:"ks",display:",",new_line:!1},{value:"\\ ",type:"write",class:"ks too_long",display:"Space",new_line:!1},{value:".",type:"write",class:"ks",display:".",new_line:!1},{value:"close",type:"custom",class:"ks long takeup",display:"X",new_line:!1}],numbers:[{value:"1",type:"write",class:"ks",display:"1",new_line:!1},{value:"2",type:"write",class:"ks",display:"2",new_line:!1},{value:"3",type:"write",class:"ks",display:"3",new_line:!1},{value:"+",type:"write",class:"ks",display:"+",new_line:!1},{value:"-",type:"write",class:"ks",display:"&#8315;",new_line:!0},{value:"4",type:"write",class:"ks",display:"4",new_line:!1},{value:"5",type:"write",class:"ks",display:"5",new_line:!1},{value:"6",type:"write",class:"ks",display:"6",new_line:!1},{value:"\\times",type:"write",class:"ks",display:"&times;",new_line:!1},{value:"/",type:"write",class:"ks",display:"&#247;",new_line:!0},{value:"7",type:"write",class:"ks",display:"7",new_line:!1},{value:"8",type:"write",class:"ks",display:"8",new_line:!1},{value:"9",type:"write",class:"ks",display:"9",new_line:!1},{value:"=",type:"write",class:"ks",display:"=",new_line:!1},{value:"Backspace",type:"keystroke",class:"ks long icon",display:"&#8678;",new_line:!0},{value:"letters",type:"custom",class:"ks long",display:"ABC",new_line:!1},{value:"0",type:"write",class:"ks",display:"0",new_line:!1},{value:"?",type:"write",class:"ks",display:"?",new_line:!1},{value:"%",type:"write",class:"ks",display:"%",new_line:!1},{value:"close",type:"custom",class:"ks long takeup",display:"X",new_line:!1}]}}},791:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createQuillFromObject=void 0;var a=n(437),i=n(980),r=n(786),o=n(590),s=n(66),l=n(342),c=n(830);t.createQuillFromObject=function(e,t,n){var u=n.ans?"ans":"anse",p=null,f=n.editor;if(n.formulation){var d="<span>"+n.formulation+"</span>";e.append(d),(0,c.reflowLatex)()}if(e.removeClass("pygen-cloze"),f==s.cfg.QTYPES.C)(p=new a.EditorCloze(e,t,n.initial_latex)).qtype=s.cfg.QTYPES.C,e.addClass("pygen-cloze");else if(f==s.cfg.QTYPES.P)(p=new r.EditorPanel(e,t,!0)).qtype=s.cfg.QTYPES.P;else if(f==s.cfg.QTYPES.M)n.symbols=n.symbols||[],(p=new o.MultipleChoiceCombo(e,t,n.symbols)).qtype=s.cfg.QTYPES.M;else if(f==s.cfg.QTYPES.Ms){n.symbols=n.symbols||[];var h=Array.isArray(n.ans);(p=new l.MultipleChoiceCheckbox(e,t,n.symbols,h)).qtype=s.cfg.QTYPES.Ms}else(p=new i.EditorInput(e,t,f)).qtype=s.cfg.QTYPES.S;var v=p.get_qid();return(s.shared[t]||{})[v]=p,p[u]=n[u],p.status=s.cfg.STATUS.UNMODIFIED,n.initial_latex&&f!=s.cfg.QTYPES.C&&(console.log("Setting initial_latex",n.initial_latex),p.latex(n.initial_latex),p.status=s.cfg.STATUS.MODIFIED),p.setDefinition(n),v}},657:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.findPyGenerators=void 0;var a=n(800),i=n(968),r=n(791),o=n(66),s=n(969),l=n(713),c=n(316),u=n(970),p=n(831),f=n(830);t.findPyGenerators=function(){var e=window.IB||{};$("div[data-pygen]").each((function(t,n){var d=$(n);d.css({position:"relative","min-height":"300px","background-color":"#ffffff","background-image":'url("https://piworld.es/iedib/matheditor/backgrounds/triangles.svg")',"background-position":"center","background-size":"cover"}),d.html("");var h=d.attr("id")||"";h||(h="pyg_"+Math.random().toString(32).substring(2),d.attr("id",h)),o.shared[h]={};var v=$('<div style="display:flex;flex-direction:row-reverse;align-items:baseline;"></div>'),y=$("<div></div>"),m=$('<div style="display: flex; flex-direction: row; align-content: flex-start;margin:10px 0; flex-wrap: wrap; gap: 5px;margin-bottom:30px;"></div>'),g=$('<div style="position: absolute;left: 0;right: 0;bottom: 0;margin: 0;background-color: #9fa0ac; display: flex; flex-direction: row; align-content: flex-start; flex-wrap: wrap; gap: 5px;"></div>'),b=new i.LevelIndicator(4),w=d.attr("data-pygen-category")||"general";b.setVisible(o.cfg.HAS_IAPACE&&null!=d.attr("data-pygen-category")),v.append(b.container);var _=1;o.cfg.HAS_IAPACE&&(_=e.iapace.inference(w)),b.setLevel(_);var k=null;if(o.cfg.HAS_IAPACE&&null!=d.attr("data-pygen-goal")){var S=(d.attr("data-pygen-goal")||"").split(";").map((function(e){return e.split(",")}));(k=new s.GoalChecker(w,S)).accomplished()&&v.append($('<span class="pw-goal-reached">Repte aconseguit! </span>'))}for(var x=(d.attr("data-pygen")||"").split(";"),T=[],I=0,O=x.length;I<O;I++){var P=x[I],M=null,E={};if(P.indexOf("[")>0){M=P.split("[")[0].trim();for(var q=P.split("[")[1].replace("]","").split(","),A=0,D=q.length;A<D;A++){var C=q[A];if(C.indexOf("=")>0){var j=C.split("="),U=j[0],F=j[1];F=F.indexOf("'")>=0?F.replace(/'/g,""):parseFloat(F),E[U]=F}}}else M=P.trim();Object.keys(E).length?T.push([M,E]):T.push([M])}var L=new c.SeqBasic(T);if(T.length>1){var N=(d.attr("data-pygen-order")||"random").trim().toLowerCase();N.startsWith("random")||N.startsWith("weighted")?L=new u.SeqRandomWeighted(T,N):N.startsWith("sequence")&&(L=new p.SeqSequence(T,N))}var R=$('<button class="btn btn-sm btn-primary"><i class="fas fa-check"></i> Comprova</button>'),B=$('<button class="btn btn-sm btn-warning" style="display:none;"><i class="far fa-life-ring"></i> Comodí 50%</button>'),Q=null,G=null,Y=function(){R.prop("disabled",!0),J.prop("disabled",!0),z.prop("disabled",!0),B.css("display","none"),o.cfg.HAS_IAPACE&&(_=e.iapace.inference(w)),console.log("xivat",w,_),b.setLevel(_);var t=L.next();$.ajax({type:"POST",url:o.cfg.PYGEN_URL,data:JSON.stringify({activities:[t],level:_}),dataType:"json",success:function(t){if(console.log("xivato",t),t.msg)return Q=null,y.html('<p style="color:darkred">ERROR<br>'+JSON.stringify(t.msg)+"</p>"),console.error("ERROR: ",t),void J.prop("disabled",!1);y.html("");var n=$("<p><span>"+(d.attr("data-pygen-formulation")||"")+"</span> "+t.formulation+"</p>");y.append(n);var i=atob(t.mq64),s=JSON.parse(i);if(o.cfg.HAS_IAPACE){var c=e.iapace.findCreate(w);c&&(0,f.sum)(c.h)>=30&&(console.log("Super! Has conseguit un comodí"),B.css("display",null==s.comodi?"none":""))}s.category=w,s.palettes||(s.palettes="all"),s.editor==o.cfg.QTYPES.M&&(s.editor=o.cfg.QTYPES.Ms),Q=s,s.initial_latex&&(s.initial_latex=(0,l.processMqIni)(s.initial_latex));var u=[];if(s.symbols)for(var p=s.symbols.split(";"),m=0,g=p.length;m<g;m++){var b=p[m];b.trim()&&u.push(b.trim())}s.symbols=u;var _=[];s.rules&&(_=JSON.parse(s.rules)),s.rules=_,console.log(s);var S=(0,r.createQuillFromObject)(y,h,s);(G=o.shared[h][S]).isPigen=!0,R.off(),(0,a.bindSubmitActionButton)(h,R,(function(t){J.prop("disabled",!1),z.prop("disabled",!1),o.cfg.HAS_IAPACE&&(e.iapace.addScore(w,t),e.iapace.save()),k&&k.reached()&&(0==v.find(".pw-goal-reached").length&&v.append($('<span class="pw-goal-reached">Repte aconseguit! </span>')),"confetti"==d.attr("data-pygen-celebration")&&window.Confetti&&new window.Confetti(d[0]).play())})),console.log(o.shared[h]),(0,f.reflowLatex)(),R.prop("disabled",!1)},error:function(e){Q=null,G=null,console.log("error",e),y.html('<div><p style="color:darkred">ERROR<br>'+JSON.stringify(e)+"</p></div>"),J.prop("disabled",!1)}})},z=$('<button class="btn btn-sm btn-outline-info" title="Mostra la resposta"><i class="fas fa-question-circle"></i> Solució</button>');z.on("click",(function(e){e.preventDefault(),G?G.status!=o.cfg.STATUS.CORRECT&&G.wrong_attemps<1?console.log("can't show answer yet",G):(R.prop("disabled",!0),console.log(G),G.showAnswer&&G.showAnswer()):console.error("Missing currentEditor here :-(")}));var J=$('<button class="btn btn-sm btn-outline-primary" title="Genera una nova pregunta"><i class="fas fa-arrow-circle-right"></i> Següent</button>');if(J.on("click",(function(e){e.preventDefault();for(var t=Object.keys(o.shared[h]||{}),n=0,a=t.length;n<a;n++)o.shared[h][t[n]].dispose(),delete o.shared[h][t[n]];Y()})),B.on("click",(function(e){e.preventDefault(),G&&Q&&Q.comodi&&(G.comodiUsed=!0,B.css("display","none"),G.latex(Q.comodi),G.status=o.cfg.STATUS.MODIFIED)})),m.append(R),m.append(J),m.append(z),m.append(B),d.append(v),d.append(y),d.append(m),"none"!=d.attr("data-copyright")){var H=$('<span style="padding:4px;font-size:70%;color:whitesmoke;"><em>pyQuizz</em> by Josep Mulet (c) 2021-22</span>');g.append(H),d.append(g)}Y()}))}},66:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.shared=t.cfg=t.loadPageInfo=void 0;var n=null;t.loadPageInfo=function(){window.iedibAPI&&(n=window.iedibAPI.getPageInfo(),console.log(n))};var a=window.IB&&window.IB.iapace;t.cfg={BASE_URL:"https://piworld.es/iedib/matheditor",pageInfo:n,STATUS:{UNMODIFIED:100,MODIFIED:200,CORRECT:1,WRONG:0},QTYPES:{S:"simple",B:"basic",C:"cloze",P:"panel",M:"mchoice",Ms:"mchoice*"},GETANSWER_URL:"https://piworld.es/pigen/api/getanswer",PYGEN_URL:"https://piworld.es/pigen/api/generate",CAS_URL:"https://piworld.es/pigen/api/compare",MAX_ATTEMPTS:2,HAS_IAPACE:a,RIGHT_ICON:"fas fa-check",WRONG_ICON:"fas fa-times"},t.shared={}},969:function(e,t,n){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.GoalChecker=void 0;var i=n(66),r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.category=t,this.rules=n}var t,n;return t=e,(n=[{key:"accomplished",value:function(e){var t=window.IB||{};if(!i.cfg.HAS_IAPACE)return!1;if(!e){var n=t.iapace.find(this.category);return null!=n&&n.d}return t.iapace.findCreate(this.category).d=e,t.iapace.save(),e}},{key:"reached",value:function(){var e=window.IB||{};if(!i.cfg.HAS_IAPACE)return!1;if(this.accomplished())return!1;for(var t=e.iapace.findCreate(this.category),n=!1,a=this.rules.length,r=0;!n&&r<a;){var o=!0,s=this.rules[r],l=0;if(isNaN(s[0])?l+=1:o=o&&t.n>=parseInt(s[0]),isNaN(s[1]))l+=1;else{var c=0;t.n>0&&(c=t.s/(1*t.n)),o=o&&c>=parseFloat(s[1])}isNaN(s[2])?l+=1:o=o&&e.iapace.inference(this.category)>=parseInt(s[2]),l<3&&(n=o),r+=1}return n&&this.accomplished(!0),n}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.GoalChecker=r},713:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createQuillFromDataAttr=t.processMqIni=void 0;var a=n(791),i=n(66);function r(e){return(e=(e=e||"").replace(/\?\d*?/g,"\\MathQuillMathField{}")).replace(/M\[(\d+)x(\d+)\]/g,(function(e,t,n){for(var a=parseInt(t),i=parseInt(n),r=[],o=new Array(i),s=0;s<a;s++)r.push(o.join(" & "));return"\\begin{pmatrix} "+r.join(" \\\\ ")+" \\end{pmatrix}"}))}t.processMqIni=r,t.createQuillFromDataAttr=function(e,t){var n=e.attr("data-mq"),o=e.attr("data-mq-ans"),s="ans";if(o||(s="anse",o=e.attr("data-mq-anse"))){if((o=o.trim()).startsWith("[")&&o.endsWith("]"))for(var l=0,c=(o=JSON.parse(o)).length;l<c;l++)o[l]=""+o[l];var u=r(e.attr("data-mq-ini")),p=e.attr("data-mq-symbols");if(n!==i.cfg.QTYPES.C||u){var f="";e.attr("data-mq-ra")&&(f=atob(e.attr("data-mq-ra")||""));var d=[];if(p)for(var h=p.split(";"),v=0,y=h.length;v<y;v++){var m=h[v];m.trim()&&d.push(m.trim())}var g=e.attr("data-mq-rules"),b=[];g&&(b=JSON.parse(g));var w=[],_=e.attr("data-mq-palettes");_&&_.split(",").forEach((function(e){w.push(e.trim())}));var k={editor:n,symbols:d,right_answer:f,initial_latex:u,rules:b,palettes:w};k[s]=o,e.attr("data-mq-formulation")&&(k.formulation=e.attr("data-mq-formulation")),(0,a.createQuillFromObject)(e,t,k)}else console.error("> MQ ",e," is of type cloze but it has no data-mq-ini!")}else console.error("> MQ has no data-mq-ans/e!")}},216:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.findQuillGroups=void 0;var a=n(800),i=n(791),r=n(66),o=n(713),s=n(830);t.findQuillGroups=function(e){(e=e||$("body")).find(".pw-mq-group").each((function(t,n){var l=$(n);if(!l.hasClass("pw-mq-done")){l.addClass("pw-mq-done");var c=l.attr("id");c||(c="g_"+Math.random().toString(32).substring(2),l.attr("id",c)),r.shared[c]={},function(e,t){e.find("[data-mq]").each((function(e,n){var a=$(n),l=$(n).attr("data-mq")||"simple";if((0,s.hasValue)(r.cfg.QTYPES,l))(0,o.createQuillFromDataAttr)(a,t);else{var c=atob(l),u=JSON.parse(c);(0,i.createQuillFromObject)(a,t,u)}}))}(l,c);var u=(0,a.createSubmitButtonForGroup)(c);l.append(u),null==e&&window.setTimeout((function(){(0,s.items)(r.shared,(function(e,t){(0,s.items)(t,(function(e,t){t.reflow&&t.reflow()}))}))}),500)}}))}},342:function(e,t,n){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleChoiceCheckbox=void 0;var i=n(66),r=n(830),o=function(){function e(t,n,a,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.multipleAnswers=o||!1,"string"==typeof a&&(a=a.split(";"));var s=this;this.selectedIndex="",this.gid=n,this.qid=Math.floor(1e4*Math.random())+1e4,this.options=a||[],this.status=i.cfg.STATUS.UNMODIFIED,this.parent=t,this.wrong_attemps=0,this.quill_el_container=$('<div class="pw-me-mchoice"></div>'),this.check_el=$('<div class="pw-me-check"></div>');var l=$("<div></div>"),c="rgid_"+Math.random().toString(32).substring(2),u=[];a.forEach((function(e,t){var n="raid_"+Math.random().toString(32).substring(2),a=$('<div class="form-check"></div>'),r=null;r=s.multipleAnswers?$('<input class="form-check-input" type="checkbox" id="'+n+'" value="'+t+'"/>'):$('<input class="form-check-input" type="radio" name="'+c+'" id="'+n+'" value="'+t+'"/>'),u.push(r);var o=$('<label class="form-check-label" for="'+n+'">'+e+"</label>");r.on("change",(function(e){e.preventDefault();for(var t=[],n=0;n<u.length;n++)u[n].prop("checked")&&t.push(u[n].prop("value")+"");s.selectedIndex=t.join(","),s.status!=i.cfg.STATUS.MODIFIED&&(s.check_el.html(""),s.status=i.cfg.STATUS.MODIFIED,s.quill_el_container.removeClass("pw-me-right pw-me-wrong pw-me-alert"))})),a.append(r),a.append(o),l.append(a)})),this.quill_el_container.append(l),this.quill_el_container.append(this.check_el),this.parent.append(this.quill_el_container),(0,r.reflowLatex)()}var t,n;return t=e,(n=[{key:"clear",value:function(){this.selectedIndex="",this.btn_action.html(""),this.check_el.html(""),this.status=i.cfg.STATUS.UNMODIFIED,this.quill_el_container.removeClass("pw-me-right pw-me-wrong pw-me-alert")}},{key:"focus",value:function(){}},{key:"latex",value:function(e){return this.selectedIndex}},{key:"checkMsg",value:function(e,t){this.status=e;var n="";1==e?(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-check"></i></span>',this.quill_el_container.addClass("pw-me-right")):0==e?(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-times"></i></span>',this.quill_el_container.addClass("pw-me-wrong")):(n='<span data-toggle="tooltip" title="'+t+'"><i class="fas fa-exclamation-triangle"></i></span>',this.quill_el_container.addClass("pw-me-alert")),this.check_el.html(n)}},{key:"get_qid",value:function(){return this.qid}},{key:"dispose",value:function(){this.quill_el_container.off()}},{key:"reflow",value:function(){this.status=i.cfg.STATUS.UNMODIFIED}},{key:"setDefinition",value:function(e){this.def=e}},{key:"increment_wrong",value:function(){this.wrong_attemps+=1}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.MultipleChoiceCheckbox=o},452:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.applyPolyfills=void 0,t.applyPolyfills=function(){Array.prototype.forEach||(Array.prototype.forEach=function(e,t){if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=this;t=t||this;for(var a=0,i=n.length;a!==i;++a)e.call(t,n[a],a,n)}),Array.prototype.map||(Array.prototype.map=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var t=[],n=0;n<this.length;n++)t.push(e(this[n],n,this));return t}),Array.prototype.filter||(Array.prototype.filter=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var t=[],n=0;n<this.length;n++)e.call(this,this[n],n,this)&&t.push(this[n]);return t}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"function"!=typeof Number.isNaN||(Number.isNaN=function(e){return null!==e&&(e!=e||+e!=e)})}},316:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.SeqBasic=void 0;var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lpygens=t}var t,a;return t=e,(a=[{key:"next",value:function(){return this.lpygens[0]}}])&&n(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.SeqBasic=a},970:function(e,t,n){function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function o(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.SeqRandomWeighted=void 0;var l=n(830),c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(p,e);var t,n,a,c,u=(a=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(a);if(c){var n=s(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return o(this,e)});function p(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),n=u.call(this,e),t=(t||"random").trim().toLowerCase(),n.definition=t;var a=[];if(t.startsWith("weighted:")){var i=(t=t.replace("weighted:","")).split(",");a=i.map((function(e){return parseFloat(e)}))}else for(var r=1/e.length,o=0,s=e.length;o<s;o++)a.push(r);if(n.lpygens=e,n.lpygens.length>a.length)for(console.log("SeqRandomWeighted:: lpygens and weights have different length");n.lpygens!=a.length;)a.push(1);for(;a.length>e.length;)a.pop();var c=(0,l.sum)(a),f=0;return a.forEach((function(e,t){f=(e/=c)+f,a[t]=f})),n.weights=a,n}return t=p,(n=[{key:"next",value:function(){if("random"==this.definition){var e=Math.floor(Math.random()*this.lpygens.length);return this.lpygens[e]}for(var t=Math.random(),n=0,a=this.weights[n];a<t;)n+=1,a=this.weights[n];return this.lpygens[n]}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(n(316).SeqBasic);t.SeqRandomWeighted=c},831:function(e,t,n){function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function o(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.SeqSequence=void 0;var c=n(316),u=n(970),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(f,e);var t,n,a,c,p=(a=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(a);if(c){var n=l(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return o(this,e)});function f(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(n=p.call(this,e)).lpygens=e,t=t.replace("sequence:","").trim().toLowerCase(),n.positions=[],n.terminalGen=void 0;var a=t.split(","),i=s(n);return a.forEach((function(t,n){var r=parseInt(t);if(isNaN(r)||null!=i.terminalGen){if(t.startsWith("*")&&null==i.terminalGen){for(var o=e.slice(n),s=[],l=!1,c=n;c<a.length;c++){var p=a[c];p.indexOf("*")>=0&&p.indexOf("(")>0?(p=p.replace("*","").replace("(","").replace(")",""),s.push(parseFloat(p)),l=!0):s.push(1)}var f="random";l&&(f="weighted: "+s.join(",")),i.terminalGen=new u.SeqRandomWeighted(o,f)}}else for(var d=0;d<r;d++)i.positions.push(n)})),n.pointer=0,n}return t=f,(n=[{key:"next",value:function(){if(this.pointer>=this.positions.length&&this.terminalGen)return this.terminalGen.next();this.pointer=this.pointer%this.positions.length;var e=this.positions[this.pointer];return this.pointer+=1,this.lpygens[e]}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(c.SeqBasic);t.SeqSequence=p},830:function(e,t){function n(e,t,n,a,i,r){return s(function(e,t){return e<<t|e>>>32-t}(s(s(t,e),s(a,r)),i),n)}function a(e,t,a,i,r,o,s){return n(t&a|~t&i,e,t,r,o,s)}function i(e,t,a,i,r,o,s){return n(t&i|a&~i,e,t,r,o,s)}function r(e,t,a,i,r,o,s){return n(t^a^i,e,t,r,o,s)}function o(e,t,a,i,r,o,s){return n(a^(t|~i),e,t,r,o,s)}function s(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}Object.defineProperty(t,"__esModule",{value:!0}),t.createLinkSheet=t.createStyleSheet=t.insertScript=t.MD5=t.copyPropsFromTo=t.hasValue=t.items=t.sum=t.sanitizeLaTeX=t.reflowLatex=void 0,t.reflowLatex=function(){window.MathJax&&(window.MathJax.typesetPromise&&window.MathJax.typesetPromise(),window.MathJax.Hub&&window.MathJax.Hub.Queue&&window.MathJax.Hub.Queue(["Typeset",MathJax.Hub]))},t.sanitizeLaTeX=function(e){return e.replace(/·/g,"*")},t.sum=function(e){for(var t=0,n=0,a=e.length;n<a;n++)t+=e[n];return t},t.items=function(e,t){if(Array.isArray(e))for(var n=0,a=e.length;n<a;n++)t(n,e[n]);else{var i=Object.keys(e);for(n=0,a=i.length;n<a;n++){var r=i[n];t(r,e[r])}}},t.hasValue=function(e,t){for(var n=!1,a=Object.keys(e),i=0;!n&&i<a.length;)n=e[a[i]]==t,i++;return n},t.copyPropsFromTo=function(e,t){for(var n=Object.keys(e),a=0,i=n.length;a<i;a++){var r=n[a];t[r]=e[r]}},t.MD5=function(e){var t=function(e){for(var t,n="0123456789ABCDEF",a="",i=0;i<e.length;i++)t=e.charCodeAt(i),a+=n.charAt(t>>>4&15)+n.charAt(15&t);return a}(function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}(function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,l=-271733879,c=-1732584194,u=271733878,p=0;p<e.length;p+=16){var f=n,d=l,h=c,v=u;l=o(l=o(l=o(l=o(l=r(l=r(l=r(l=r(l=i(l=i(l=i(l=i(l=a(l=a(l=a(l=a(l,c=a(c,u=a(u,n=a(n,l,c,u,e[p+0],7,-680876936),l,c,e[p+1],12,-389564586),n,l,e[p+2],17,606105819),u,n,e[p+3],22,-1044525330),c=a(c,u=a(u,n=a(n,l,c,u,e[p+4],7,-176418897),l,c,e[p+5],12,1200080426),n,l,e[p+6],17,-1473231341),u,n,e[p+7],22,-45705983),c=a(c,u=a(u,n=a(n,l,c,u,e[p+8],7,1770035416),l,c,e[p+9],12,-1958414417),n,l,e[p+10],17,-42063),u,n,e[p+11],22,-1990404162),c=a(c,u=a(u,n=a(n,l,c,u,e[p+12],7,1804603682),l,c,e[p+13],12,-40341101),n,l,e[p+14],17,-1502002290),u,n,e[p+15],22,1236535329),c=i(c,u=i(u,n=i(n,l,c,u,e[p+1],5,-165796510),l,c,e[p+6],9,-1069501632),n,l,e[p+11],14,643717713),u,n,e[p+0],20,-373897302),c=i(c,u=i(u,n=i(n,l,c,u,e[p+5],5,-701558691),l,c,e[p+10],9,38016083),n,l,e[p+15],14,-660478335),u,n,e[p+4],20,-405537848),c=i(c,u=i(u,n=i(n,l,c,u,e[p+9],5,568446438),l,c,e[p+14],9,-1019803690),n,l,e[p+3],14,-187363961),u,n,e[p+8],20,1163531501),c=i(c,u=i(u,n=i(n,l,c,u,e[p+13],5,-1444681467),l,c,e[p+2],9,-51403784),n,l,e[p+7],14,1735328473),u,n,e[p+12],20,-1926607734),c=r(c,u=r(u,n=r(n,l,c,u,e[p+5],4,-378558),l,c,e[p+8],11,-2022574463),n,l,e[p+11],16,1839030562),u,n,e[p+14],23,-35309556),c=r(c,u=r(u,n=r(n,l,c,u,e[p+1],4,-1530992060),l,c,e[p+4],11,1272893353),n,l,e[p+7],16,-155497632),u,n,e[p+10],23,-1094730640),c=r(c,u=r(u,n=r(n,l,c,u,e[p+13],4,681279174),l,c,e[p+0],11,-358537222),n,l,e[p+3],16,-722521979),u,n,e[p+6],23,76029189),c=r(c,u=r(u,n=r(n,l,c,u,e[p+9],4,-640364487),l,c,e[p+12],11,-421815835),n,l,e[p+15],16,530742520),u,n,e[p+2],23,-995338651),c=o(c,u=o(u,n=o(n,l,c,u,e[p+0],6,-198630844),l,c,e[p+7],10,1126891415),n,l,e[p+14],15,-1416354905),u,n,e[p+5],21,-57434055),c=o(c,u=o(u,n=o(n,l,c,u,e[p+12],6,1700485571),l,c,e[p+3],10,-1894986606),n,l,e[p+10],15,-1051523),u,n,e[p+1],21,-2054922799),c=o(c,u=o(u,n=o(n,l,c,u,e[p+8],6,1873313359),l,c,e[p+15],10,-30611744),n,l,e[p+6],15,-1560198380),u,n,e[p+13],21,1309151649),c=o(c,u=o(u,n=o(n,l,c,u,e[p+4],6,-145523070),l,c,e[p+11],10,-1120210379),n,l,e[p+2],15,718787259),u,n,e[p+9],21,-343485551),n=s(n,f),l=s(l,d),c=s(c,h),u=s(u,v)}return Array(n,l,c,u)}(function(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}(e),8*e.length)));return t.toLowerCase()},t.insertScript=function(e,t){var n=document.createElement("script");n.src=e,n.type="text/javascript",n.async=!0,document.head.appendChild(n),t&&(n.async=!0,n.onload=function(){t()})},t.createStyleSheet=function(e,t){if(!t||!document.getElementById(t)){var n=document.createElement("style");n.innerHTML=e,t&&(n.id=t),document.getElementsByTagName("head")[0].appendChild(n)}},t.createLinkSheet=function(e,t){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=e,document.getElementsByTagName("head")[0].appendChild(n)}}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}!function(){var e=n(452),t=n(66),a=n(830),i=n(216),r=n(657);(0,e.applyPolyfills)();var o=function(){(0,t.loadPageInfo)(),t.shared.MQ=window.MathQuill.getInterface(2),(0,i.findQuillGroups)(),(0,r.findPyGenerators)()};$((function(){(0,a.createLinkSheet)(t.cfg.BASE_URL+"/lib/mathquill.matrix.css"),window.iedibAPI?(0,a.insertScript)(t.cfg.BASE_URL+"/lib/mathquill.matrix.min.js",o):(0,a.insertScript)("https://piworld.es/iedib/assets/iedib-api.js",(function(){(0,a.insertScript)(t.cfg.BASE_URL+"/lib/mathquill.matrix.min.js",o)}))}))}()}();
//# sourceMappingURL=matheditor2.min.js.map