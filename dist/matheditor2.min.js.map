{"version":3,"file":"matheditor2.min.js","mappings":"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","sources":["webpack:///./src/actions.ts","webpack:///./src/checking.ts","webpack:///./src/components/LevelIndicator.ts","webpack:///./src/components/dialogs/dialog.ts","webpack:///./src/components/dialogs/editorDialog.ts","webpack:///./src/components/editorBase.ts","webpack:///./src/components/editorCloze.ts","webpack:///./src/components/editorInput.ts","webpack:///./src/components/editorMChoice.ts","webpack:///./src/components/editorMChoiceCheckbox.ts","webpack:///./src/components/editorPanel.ts","webpack:///./src/components/toolbar/createToolbarButton.ts","webpack:///./src/components/toolbar/pwTabMenu.ts","webpack:///./src/components/toolbar/toolbar-config.ts","webpack:///./src/createQuill.ts","webpack:///./src/findPyGenerators.ts","webpack:///./src/globals.ts","webpack:///./src/goalChecker.ts","webpack:///./src/mq-parsing.ts","webpack:///./src/mqfy.ts","webpack:///./src/polyfills.ts","webpack:///./src/sequences/seqBasic.ts","webpack:///./src/sequences/seqRandomWeighted.ts","webpack:///./src/sequences/seqSequence.ts","webpack:///./src/utils.ts","webpack:///webpack/bootstrap","webpack:///./src/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createSubmitButtonForGroup = exports.bindSubmitActionButton = void 0;\nconst checking_1 = require(\"./checking\");\nconst globals_1 = require(\"./globals\");\nconst utils_1 = require(\"./utils\");\nlet LAST_AJAX = new Date().getTime();\n/**\n * Binds the submit button for all the editors within a group\n * @param gid\n * @param check_btn\n * @param extraActions\n */\nfunction bindSubmitActionButton(gid, check_btn, extraActions) {\n    var groupContainer = globals_1.shared[gid];\n    var qids = Object.keys(groupContainer).map((e) => parseInt(e));\n    check_btn.off();\n    check_btn.on('click', function (ev) {\n        ev.preventDefault();\n        var now = (new Date()).getTime();\n        if (LAST_AJAX && (now - LAST_AJAX) < 1000) {\n            console.error(\"Too frequently checks are blocked!\");\n            return;\n        }\n        var promises = [];\n        console.log(\"gid\", gid, \"qids\", qids);\n        for (var k = 0, len = qids.length; k < len; k++) {\n            var qid = qids[k];\n            var editor = groupContainer[qid];\n            if (editor.getStatus() != globals_1.cfg.STATUS.MODIFIED) {\n                // no changes to check\n                console.log('Unmodified, nothing to check');\n                continue;\n            }\n            var ual = editor.latex() || [];\n            if (ual.length === 0 || (0, checking_1.has_empty_answers)(ual)) {\n                // contains empty answers\n                editor.checkMsg(-1, 'Falten respostes');\n                console.error('Editro contains empty answers');\n                continue;\n            }\n            if (editor.getStatus() != 1 && ual.length) {\n                if (editor.getDefinition().right_answer && (editor.getWrong_attemps() || 0) > globals_1.cfg.MAX_ATTEMPTS) {\n                    console.log(\"TODO:: Must show right answer and disable quill\");\n                    if (!editor.isPigen()) {\n                        // showAnswer must disable quill on its editor\n                        // Disable on panel which is not standalone\n                        editor.showAnswer();\n                        continue;\n                    }\n                }\n                // If the widget is a multiplechoice combo\n                // TODO: support multiple answers, ans is an array and ual too!\n                if (editor.getQType() == globals_1.cfg.QTYPES.M || editor.getQType() == globals_1.cfg.QTYPES.Ms) {\n                    var score10 = editor.isComodiUsed() ? 5 : 10;\n                    if (editor.getDefinition().ans == ual[0]) {\n                        editor.checkMsg(1, 'Molt bé!');\n                    }\n                    else {\n                        score10 = 0;\n                        editor.increment_wrong();\n                        editor.checkMsg(0, 'Incorrecte');\n                    }\n                    extraActions && extraActions(score10);\n                    continue;\n                }\n                LAST_AJAX = now;\n                const postObj = { latex: ual, qid: qid };\n                // Optimitzation (numeric answers can be checked locally)\n                // console.log(\"Locally? \", editor.getDefinition(), ual);\n                let ans = '';\n                if (editor.getDefinition().anse != null) {\n                    ans = atob(editor.getDefinition().anse || \"\");\n                }\n                else {\n                    ans = editor.getDefinition().ans || '';\n                }\n                if (ans && ual.length == 1) {\n                    //User answer list of one item\n                    if ((0, utils_1.isNumeric)(ual[0]) && (0, utils_1.isNumeric)(ans)) {\n                        const pfual = parseFloat(ual[0]);\n                        const pans = parseFloat(ans);\n                        console.log(\"Numeric answer can be checked locally\");\n                        var score10 = editor.isComodiUsed() ? 5 : 10;\n                        var difference = parseFloat(ans) - pfual;\n                        //TODO:: Check for precisions\n                        var maxError = 0.0;\n                        if (editor.getDefinition().rules && editor.getDefinition().rules.precision) {\n                            maxError = editor.getDefinition().rules.precision;\n                        }\n                        if (Math.abs(difference) <= maxError) {\n                            editor.checkMsg(1, 'Molt bé!');\n                        }\n                        else {\n                            score10 = 0;\n                            editor.increment_wrong();\n                            editor.checkMsg(0, 'Incorrecte');\n                        }\n                        extraActions && extraActions(score10);\n                        continue;\n                    }\n                }\n                //copy properties from object definition\n                (0, utils_1.copyPropsFromTo)(editor.getDefinition(), postObj);\n                if (globals_1.cfg.pageInfo) {\n                    postObj.pageInfo = globals_1.cfg.pageInfo;\n                    if (!editor.getHash()) {\n                        editor.setHash((0, utils_1.MD5)(postObj.formulation + '_' + (postObj.pageInfo.bookId || 0) + '_' + (postObj.pageInfo.chapterId || 0)));\n                    }\n                    postObj.hash = editor.getHash();\n                }\n                promises.push($.ajax({\n                    type: \"POST\",\n                    url: globals_1.cfg.CAS_URL,\n                    data: JSON.stringify(postObj),\n                    dataType: 'json',\n                    success: function (datos) {\n                        console.log(\"success\", datos);\n                        var editor = groupContainer[datos.qid];\n                        if (datos.correct == 0) {\n                            editor.increment_wrong && editor.increment_wrong();\n                        }\n                        editor.checkMsg(datos.correct, datos.msg);\n                        var score10 = datos.correct ? (editor.isComodiUsed() ? 5 : 10) : 0;\n                        extraActions && extraActions(score10);\n                    },\n                    error: function (datos) {\n                        console.log(\"error\", datos);\n                    }\n                }));\n            }\n        } // end loop\n    });\n}\nexports.bindSubmitActionButton = bindSubmitActionButton;\n;\nfunction createSubmitButtonForGroup(gid) {\n    var check_btn = $('<button class=\"btn btn-sm btn-primary pw-me-submitgroup\"><i class=\"fas fa-check\"></i> Comprova</button>');\n    bindSubmitActionButton(gid, check_btn);\n    return check_btn;\n}\nexports.createSubmitButtonForGroup = createSubmitButtonForGroup;\n;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.has_empty_answers = exports.extractMatrices = void 0;\nconst regexMatrices = /\\\\begin{pmatrix}(.*?)\\\\end{pmatrix}/g;\nfunction extractMatrices(tex) {\n    const matrices = [];\n    let m = null;\n    while ((m = regexMatrices.exec(tex)) !== null) {\n        const mat = [];\n        const linies = m[1].split('\\\\\\\\');\n        linies.forEach(function (alinia) {\n            const linia = alinia.split('&');\n            mat.push(linia);\n        });\n        matrices.push(mat);\n    }\n    return matrices;\n}\nexports.extractMatrices = extractMatrices;\n;\nconst has_empty_elements = function (matrix) {\n    const rows = matrix.length;\n    for (let i = 0; i < rows; i++) {\n        const arow = matrix[i];\n        const cols = arow.length;\n        for (let j = 0; j < cols; j++) {\n            if (!arow[j]) {\n                return true;\n            }\n        }\n    }\n    return false;\n};\nfunction has_empty_answers(v) {\n    for (let i = 0, len = v.length; i < len; i++) {\n        const tex = v[i];\n        if (tex == '' || (tex && !tex.trim())) {\n            return true;\n        }\n        // a matrix with empty answers\n        const matrices = extractMatrices(tex);\n        for (let j = 0, lenmat = matrices.length; j < lenmat; j++) {\n            if (has_empty_elements(matrices[j])) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\nexports.has_empty_answers = has_empty_answers;\n;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LevelIndicator = void 0;\nclass LevelIndicator {\n    constructor(numLevels) {\n        this.numLevels = numLevels;\n        this.container = $('<div style=\"display:inline-block;font-size:90%;\" data-toggle=\"tooltip\"></div>');\n        this.levelIcons = [];\n        for (let i = 0; i < numLevels; i++) {\n            const elem = $('<i class=\"fas fa-pepper-hot\" style=\"color:lightgray;\"></i>');\n            this.container.append(elem);\n            this.levelIcons.push(elem);\n        }\n    }\n    get $div() {\n        return this.container;\n    }\n    setLevel(n) {\n        if (n < 0) {\n            n = 0;\n        }\n        else if (n > this.numLevels) {\n            n = this.numLevels;\n        }\n        for (let i = 0; i < this.numLevels; i++) {\n            if (i < n) {\n                this.levelIcons[i].css(\"color\", \"darkred\");\n            }\n            else {\n                this.levelIcons[i].css(\"color\", \"lightgray\");\n            }\n        }\n        this.container.attr(\"data-original-title\", \"Nivell \" + n);\n        this.container.removeAttr(\"title\");\n    }\n    setVisible(visible) {\n        this.container.css(\"display\", visible ? \"\" : \"none\");\n    }\n}\nexports.LevelIndicator = LevelIndicator;\n","\"use strict\";\n/**\n     * Creates a basic dialog which can be extended for further functionality\n     * @param {*} title\n     * @param {*} width\n     * @param {*} height\n*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PwDialog = void 0;\nclass PwDialog {\n    constructor(title, width, height) {\n        this.id = \"pwdlg_\" + Math.random().toString(32).substring(2);\n        this.window = $('<div id=\"' + this.id + '\" class=\"pw-me-dlg\" style=\"width:' + width + 'px;height:' + height + 'px;display:none;\"></div>');\n        const topBar = $('<div class=\"pw-me-dlg-header\"></div>');\n        this.topBar = topBar;\n        const headerTitle = $('<span class=\"pw-me-dlg-headertitle\">' + title + '</span>');\n        this.closeBtn = $('<button class=\"btn btn-sm pw-me-btn-dlgclose\" title=\"Tancar\"><i class=\"fas fa-times\"></i></button>');\n        const self = this;\n        this.closeBtn.on(\"click\", function (ev) {\n            ev.preventDefault();\n            self.window.css(\"display\", \"none\");\n        });\n        topBar.append(headerTitle);\n        topBar.append(this.closeBtn);\n        this.window.append(topBar);\n        //Add dialog to body\n        $('body').append(this.window);\n        // Make this dialog draggable\n        let active = false;\n        let currentX;\n        let currentY;\n        let initialX;\n        let initialY;\n        let xOffset = 0;\n        let yOffset = 0;\n        this.dragStart = function (e) {\n            if (e.type === \"touchstart\") {\n                initialX = e.touches[0].clientX - xOffset;\n                initialY = e.touches[0].clientY - yOffset;\n            }\n            else {\n                initialX = e.clientX - xOffset;\n                initialY = e.clientY - yOffset;\n            }\n            if (e.target === topBar[0]) {\n                active = true;\n            }\n        };\n        this.dragEnd = function (e) {\n            initialX = currentX;\n            initialY = currentY;\n            active = false;\n        };\n        this.setTranslate = function (xPos, yPos, el) {\n            el.style.transform = \"translate3d(\" + xPos + \"px, \" + yPos + \"px, 0)\";\n        };\n        this.drag = function (e) {\n            if (active) {\n                e.preventDefault();\n                if (e.type === \"touchmove\") {\n                    currentX = e.touches[0].clientX - initialX;\n                    currentY = e.touches[0].clientY - initialY;\n                }\n                else {\n                    currentX = e.clientX - initialX;\n                    currentY = e.clientY - initialY;\n                }\n                xOffset = currentX;\n                yOffset = currentY;\n                self.setTranslate(currentX, currentY, self.window[0]);\n            }\n        };\n        topBar[0].addEventListener(\"touchstart\", this.dragStart, false);\n        topBar[0].addEventListener(\"touchend\", this.dragEnd, false);\n        topBar[0].addEventListener(\"touchmove\", this.drag, false);\n        topBar[0].addEventListener(\"mousedown\", this.dragStart, false);\n        topBar[0].addEventListener(\"mouseup\", this.dragEnd, false);\n        topBar[0].addEventListener(\"mousemove\", this.drag, false);\n    }\n    append(element) {\n        this.window.append(element);\n    }\n    show() {\n        this.window.css(\"display\", \"initial\");\n    }\n    close() {\n        this.window.css(\"display\", \"none\");\n    }\n    remove() {\n        this.closeBtn.off();\n        this.window.remove();\n        this.topBar[0].removeEventListener(\"touchstart\", this.dragStart);\n        this.topBar[0].removeEventListener(\"touchend\", this.dragEnd);\n        this.topBar[0].removeEventListener(\"touchmove\", this.drag);\n        this.topBar[0].removeEventListener(\"mousedown\", this.dragStart);\n        this.topBar[0].removeEventListener(\"mouseup\", this.dragEnd);\n        this.topBar[0].removeEventListener(\"mousemove\", this.drag);\n    }\n    dispose() {\n        this.remove();\n    }\n}\nexports.PwDialog = PwDialog;\n;\n","\"use strict\";\n// Editor panel (embeded in dialog)\n// Extends Dialog\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EditorDialog = void 0;\nconst globals_1 = require(\"../../globals\");\nconst utils_1 = require(\"../../utils\");\nconst editorPanel_1 = require(\"../editorPanel\");\nconst dialog_1 = require(\"./dialog\");\n// Composes EditorPanel\nclass EditorDialog extends dialog_1.PwDialog {\n    constructor() {\n        super('<i style=\"color:darkred;\" class=\"fas fa-square-root-alt\"></i> Editor matemàtic', 500, 320);\n        const self = this;\n        const gid = 'gid_' + Math.random().toString(32).substring(2);\n        const qtype = globals_1.cfg.QTYPES.P;\n        const def = {};\n        this.editorPanel = new editorPanel_1.EditorPanel(this.window, gid, def, qtype, false);\n        var controlButtons = $('<div class=\"pw-me-dlg-controls\"></div>');\n        var acceptBtn = $('<button class=\"btn btn-sm btn-primary\">Accepta</button>');\n        var cancelBtn = $('<button class=\"btn btn-sm btn-outline-primary\">Cancel·la</button>');\n        controlButtons.append(acceptBtn);\n        controlButtons.append(cancelBtn);\n        this.append(controlButtons);\n        acceptBtn.on('click', function (ev) {\n            ev.preventDefault();\n            if (self.acceptFn) {\n                self.acceptFn(self);\n            }\n            self.close();\n        });\n        cancelBtn.on('click', function (ev) {\n            ev.preventDefault();\n            if (self.cancelFn) {\n                self.cancelFn(self);\n            }\n            self.close();\n        });\n    }\n    latex(tex) {\n        if (tex != null) {\n            this.editorPanel.latex(tex);\n            return [''];\n        }\n        else {\n            return this.editorPanel.latex().map((e) => (0, utils_1.sanitizeLaTeX)(e));\n        }\n    }\n    //@override\n    show() {\n        this.window.css(\"display\", \"\");\n        this.editorPanel.focus();\n    }\n    //@override\n    dispose() {\n        this.editorPanel.dispose();\n        this.window.find('button').off();\n        this.dispose();\n    }\n    reflow() {\n        this.editorPanel.reflow();\n    }\n    setDefinition(def) {\n        this.editorPanel.setDefinition(def);\n    }\n}\nexports.EditorDialog = EditorDialog;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EditorBase = void 0;\nconst globals_1 = require(\"../globals\");\nclass EditorBase {\n    constructor(parent, gid, def, qtype) {\n        this.parent = parent;\n        this.gid = gid;\n        this.status = globals_1.cfg.STATUS.UNMODIFIED;\n        this.wrong_attemps = 0;\n        this.isAnswerShown = false;\n        this.def = def;\n        this.qtype = qtype;\n        this.pigen = false;\n        this.comodi = false;\n        this.hash = '';\n    }\n    get_gid() {\n        return this.gid;\n    }\n    setDefinition(def) {\n        this.def = def;\n        this.ansType = def.ansType;\n    }\n    getDefinition() {\n        return this.def;\n    }\n    increment_wrong() {\n        this.wrong_attemps += 1;\n    }\n    getWrong_attemps() {\n        return this.wrong_attemps;\n    }\n    getStatus() {\n        return this.status;\n    }\n    setStatus(status) {\n        this.status = status;\n    }\n    getQType() {\n        return this.qtype;\n    }\n    setQType(qtype) {\n        this.qtype = qtype;\n    }\n    isPigen() {\n        return this.pigen;\n    }\n    setPigen(pigen) {\n        this.pigen = pigen;\n    }\n    isComodiUsed() {\n        return this.comodi;\n    }\n    setComodiUsed(comodi) {\n        this.comodi = comodi;\n    }\n    getHash() {\n        return this.hash;\n    }\n    setHash(hash) {\n        this.hash = hash;\n    }\n}\nexports.EditorBase = EditorBase;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EditorCloze = void 0;\nconst globals_1 = require(\"../globals\");\nconst utils_1 = require(\"../utils\");\nconst dialog_1 = require(\"./dialogs/dialog\");\nconst editorBase_1 = require(\"./editorBase\");\nclass EditorCloze extends editorBase_1.EditorBase {\n    constructor(parent, gid, def, qtype, ini) {\n        super(parent, gid, def, qtype);\n        const self = this;\n        this.dlg_btn_el = null;\n        this.quill_el_container = $('<div class=\"pw-me-editorinput\"></div>');\n        const quill_el = $('<span>' + ini + '</span>');\n        this.check_el = $('<div class=\"pw-me-check\"></div>');\n        this.parent.append(this.quill_el_container);\n        this.quill_el_container.append(quill_el);\n        this.mathInput = (0, globals_1.StaticMath)(quill_el[0]);\n        // TODO: listen to changes to set status to unmodified\n        this.mathInput.innerFields.forEach(function (e) {\n            e.__controller.textarea.on('keyup', function (ev) {\n                ev.preventDefault();\n                if (self.status != globals_1.cfg.STATUS.MODIFIED) {\n                    self.check_el.html('');\n                    self.status = globals_1.cfg.STATUS.MODIFIED;\n                    self.quill_el_container.removeClass('pw-me-right pw-me-wrong pw-me-alert');\n                }\n            });\n        });\n        this.quill_el_container.append(this.check_el);\n    }\n    clear() {\n        this.mathInput.innerFields.forEach((v) => v.latex(''));\n        this.check_el.html('');\n        this.status = globals_1.cfg.STATUS.UNMODIFIED;\n        this.quill_el_container.removeClass('pw-me-right pw-me-wrong pw-me-alert');\n    }\n    focus() {\n        this.mathInput.focus();\n    }\n    latex(tex) {\n        if (tex != null) {\n            this.mathInput.latex(tex);\n            this.status = globals_1.cfg.STATUS.UNMODIFIED;\n        }\n        else {\n            const parts = [];\n            console.log(this.mathInput.innerFields);\n            const v = this.mathInput.innerFields;\n            for (let i = 0, lenv = v.length; i < lenv; i++) {\n                parts.push(v[i].latex());\n            }\n            return parts;\n        }\n        return [];\n    }\n    checkMsg(status, msg) {\n        this.status = status;\n        let msg2 = '';\n        if (status == 1) {\n            msg2 = '<span data-toggle=\"tooltip\" title=\"' + msg + '\"><i class=\"fas fa-check\"></i></span>';\n            this.quill_el_container.addClass('pw-me-right');\n        }\n        else if (status == 0) {\n            msg2 = '<span data-toggle=\"tooltip\" title=\"' + msg + '\"><i class=\"fas fa-times\"></i></span>';\n            this.quill_el_container.addClass('pw-me-wrong');\n        }\n        else {\n            msg2 = '<span data-toggle=\"tooltip\" title=\"' + msg + '\"><i class=\"fas fa-exclamation-triangle\"></i></span>';\n            this.quill_el_container.addClass('pw-me-alert');\n        }\n        this.check_el.html(msg2);\n    }\n    get_qid() {\n        return this.mathInput.id;\n    }\n    dispose() {\n        this.mathInput.revert();\n        this.quill_el_container.find(\"button\").off();\n    }\n    reflow() {\n        this.mathInput.reflow();\n        this.status = globals_1.cfg.STATUS.UNMODIFIED;\n    }\n    showAnswer() {\n        if (!this.def) {\n            console.error(\"Cannot show answer because, def is null\");\n            return;\n        }\n        if (!this.def.right_answer) {\n            console.error(\"Cannot show answer because, \", this.def.right_answer);\n            return;\n        }\n        const self = this;\n        //this.showAnswerBtn = $('<button class=\"btn btn pw-me-btn-showanswer\" data-toggle=\"tooltip\" title=\"Mostrar la solució\"><i class=\"fas fa-question-circle\"></i></button>');\n        //this.quill_el_container.append(this.showAnswerBtn);\n        // Must create a global dialog\n        if (!globals_1.sharedDlg[\"showAnswerDlg\"]) {\n            const dlg = new dialog_1.PwDialog(\"Resposta correcta\", 400, 250);\n            globals_1.sharedDlg[\"showAnswerDlg\"] = dlg;\n            const answerHolder = $('<div class=\"pw-answer-holder\"></div>');\n            dlg.append(answerHolder);\n            const closeBtn = $('<button class=\"btn btn-sm btn-primary\" style=\"margin-left: 15px;\">Tancar</button>');\n            dlg.append(closeBtn);\n            closeBtn.on('click', function (ev) {\n                ev.preventDefault();\n                dlg.close();\n            });\n        }\n        // this.showAnswerBtn.on('click', function(ev){\n        // ev.preventDefault();\n        if (!self.isAnswerShown) {\n            self.isAnswerShown = true;\n            self.status = globals_1.cfg.STATUS.UNMODIFIED;\n            //Disable mathquill\n            //self.quill_blocker.addClass('pw-me-blocker');\n            //Disable edit buttton\n            if (self.dlg_btn_el) {\n                self.dlg_btn_el.prop(\"disabled\", true);\n            }\n        }\n        const dlg = globals_1.sharedDlg[\"showAnswerDlg\"];\n        const answerHolder = dlg.window.find(\".pw-answer-holder\");\n        if (self.def) {\n            answerHolder.html(atob(self.def.right_answer) + '<p><br></p>');\n            (0, utils_1.reflowLatex)();\n            dlg.show();\n        }\n    }\n}\nexports.EditorCloze = EditorCloze;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EditorInput = void 0;\nconst globals_1 = require(\"../globals\");\nconst utils_1 = require(\"../utils\");\nconst dialog_1 = require(\"./dialogs/dialog\");\nconst editorDialog_1 = require(\"./dialogs/editorDialog\");\nconst editorBase_1 = require(\"./editorBase\");\nclass EditorInput extends editorBase_1.EditorBase {\n    constructor(parent, gid, def, qtype) {\n        super(parent, gid, def, qtype);\n        var self = this;\n        this.quill_el_container = $('<div class=\"pw-me-editorinput\"></div>');\n        this.quill_blocker = $('<div></div>');\n        var quill_el = $('<span></span>');\n        this.quill_blocker.append(quill_el);\n        this.check_el = $('<div class=\"pw-me-check\"></div>');\n        this.quill_el_container.append(this.quill_blocker);\n        var isBtn = (qtype === globals_1.cfg.QTYPES.S);\n        this.parent.append(this.quill_el_container);\n        this.mathInput = (0, globals_1.MathField)(quill_el[0], {\n            handlers: {\n                edit: function () {\n                    console.log(\"Edit ev on mathquill \", self.mathInput.latex());\n                    if (self.status != globals_1.cfg.STATUS.MODIFIED) {\n                        self.check_el.html('');\n                        self.status = globals_1.cfg.STATUS.MODIFIED;\n                        self.quill_el_container.removeClass('pw-me-right pw-me-wrong pw-me-alert');\n                    }\n                }\n            }\n        });\n        if (isBtn) {\n            this.dlg_btn_el = $('<button class=\"btn btn-sm pw-me-btn-openeditor\" title=\"Obrir l\\'editor\"><i class=\"fas fa-square-root-alt\"></i></button>');\n            this.quill_el_container.append(this.dlg_btn_el);\n            this.dlg_btn_el.on(\"click\", function (ev) {\n                ev.preventDefault();\n                // open a editordlg\n                // must do the binding when closing\n                var dlg = globals_1.sharedDlg['editordlg'];\n                if (!dlg) {\n                    dlg = new editorDialog_1.EditorDialog();\n                    globals_1.sharedDlg['editordlg'] = dlg;\n                }\n                dlg.acceptFn = function (self2) {\n                    self.mathInput.latex(self2.latex());\n                };\n                dlg.setDefinition(self.def);\n                dlg.show();\n                dlg.latex(self.mathInput.latex());\n            });\n        }\n        this.quill_el_container.append(this.check_el);\n    }\n    get_qid() {\n        return this.mathInput.id;\n    }\n    clear() {\n        this.mathInput.latex('');\n        this.check_el.html('');\n        this.status = globals_1.cfg.STATUS.UNMODIFIED;\n        this.quill_el_container.removeClass('pw-me-right pw-me-wrong pw-me-alert');\n    }\n    focus() {\n        this.mathInput.focus();\n    }\n    latex(tex) {\n        if (tex != null) {\n            console.log(\"Setting latex \", tex);\n            this.mathInput.latex(tex);\n            this.status = globals_1.cfg.STATUS.UNMODIFIED;\n        }\n        else {\n            return [(0, utils_1.sanitizeLaTeX)(this.mathInput.latex())];\n        }\n        return [];\n    }\n    checkMsg(status, msg) {\n        this.status = status;\n        var msg2 = null;\n        if (status == 1) {\n            msg2 = '<span data-toggle=\"tooltip\" title=\"' + msg + '\"><i class=\"' + globals_1.cfg.RIGHT_ICON + '\"></i></span>';\n            this.quill_el_container.addClass('pw-me-right');\n        }\n        else if (status == 0) {\n            msg2 = '<span data-toggle=\"tooltip\" title=\"' + msg + '\"><i class=\"' + globals_1.cfg.WRONG_ICON + '\"></i></span>';\n            this.quill_el_container.addClass('pw-me-wrong');\n        }\n        else {\n            msg2 = '<span data-toggle=\"tooltip\" title=\"' + msg + '\"><i class=\"fas fa-exclamation-triangle\"></i></span>';\n            this.quill_el_container.addClass('pw-me-alert');\n        }\n        this.check_el.html(msg2);\n    }\n    dispose() {\n        this.mathInput.revert();\n        this.quill_el_container.find(\"button\").off();\n    }\n    showAnswer() {\n        if (!this.def) {\n            console.error(\"Cannot show answer because def is undefined\");\n            return;\n        }\n        if (!this.def.right_answer) {\n            console.error(\"Cannot show answer because, \", this.def.right_answer);\n            return;\n        }\n        var self = this;\n        //this.showAnswerBtn = $('<button class=\"btn btn pw-me-btn-showanswer\" data-toggle=\"tooltip\" title=\"Mostrar la solució\"><i class=\"fas fa-question-circle\"></i></button>');\n        //this.quill_el_container.append(this.showAnswerBtn);\n        // Must create a global dialog\n        if (!globals_1.sharedDlg[\"showAnswerDlg\"]) {\n            var dlg = new dialog_1.PwDialog(\"Resposta correcta\", 400, 250);\n            globals_1.sharedDlg[\"showAnswerDlg\"] = dlg;\n            var answerHolder = $('<div class=\"pw-answer-holder\"></div>');\n            dlg.append(answerHolder);\n            var closeBtn = $('<button class=\"btn btn-sm btn-primary\" style=\"margin-left: 15px;\">Tancar</button>');\n            dlg.append(closeBtn);\n            closeBtn.on('click', function (ev) {\n                ev.preventDefault();\n                dlg.close();\n            });\n        }\n        // this.showAnswerBtn.on('click', function(ev){\n        // ev.preventDefault();\n        if (!self.isAnswerShown) {\n            self.isAnswerShown = true;\n            self.status = globals_1.cfg.STATUS.UNMODIFIED;\n            // Disable mathquill\n            self.quill_blocker.addClass('pw-me-blocker');\n            // Disable edit buttton\n            if (self.dlg_btn_el) {\n                self.dlg_btn_el.prop(\"disabled\", true);\n            }\n        }\n        var dlg = globals_1.sharedDlg[\"showAnswerDlg\"];\n        var answerHolder = dlg.window.find(\".pw-answer-holder\");\n        if (self.def) {\n            answerHolder.html(atob(self.def.right_answer) + '<p><br></p>');\n            (0, utils_1.reflowLatex)();\n            dlg.show();\n        }\n    }\n    increment_wrong() {\n        this.wrong_attemps += 1;\n        if (this.wrong_attemps == globals_1.cfg.MAX_ATTEMPTS + 1 && !this.isPigen && this.def) {\n            console.log(this.def);\n            // create a button to display answer\n            var rescueBtn = $('<button class=\"btn btn-sm\" title=\"Mostra la solució\"><i class=\"far fa-question-circle\"></i></button>');\n            var self = this;\n            rescueBtn.on(\"click\", function (evt) {\n                self.showAnswer();\n            });\n            if (!this.def.right_answer) {\n                // Must ask the server to generate a right_answer for us by sending the def object\n                $.ajax({\n                    type: \"POST\",\n                    url: globals_1.cfg.GETANSWER_URL,\n                    data: JSON.stringify(this.def),\n                    dataType: 'json',\n                    success: function (datos) {\n                        if (datos.right_answer && self.def) {\n                            self.def.right_answer = datos.right_answer;\n                            self.quill_el_container.append(rescueBtn);\n                        }\n                        else if (datos.msg) {\n                            console.error(datos.msg);\n                        }\n                    }\n                });\n            }\n            else {\n                this.quill_el_container.append(rescueBtn);\n            }\n        }\n    }\n    reflow() {\n        this.mathInput.reflow();\n        this.status = globals_1.cfg.STATUS.UNMODIFIED;\n    }\n}\nexports.EditorInput = EditorInput;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EditorMChoice = void 0;\nconst globals_1 = require(\"../globals\");\nconst utils_1 = require(\"../utils\");\nconst editorBase_1 = require(\"./editorBase\");\nclass EditorMChoice extends editorBase_1.EditorBase {\n    constructor(parent, gid, def, qtype, options) {\n        super(parent, gid, def, qtype);\n        if (typeof (options) == 'string') {\n            options = options.split(\";\");\n        }\n        const self = this;\n        this.selectedIndex = '';\n        this.gid = gid;\n        this.qid = Math.floor(Math.random() * 10000) + 10000;\n        this.options = options || [];\n        // status = 0 incorrecte, status = 1 correcte, status < 0 errors \n        this.status = globals_1.cfg.STATUS.UNMODIFIED;\n        this.parent = parent;\n        this.wrong_attemps = 0;\n        this.quill_el_container = $('<div class=\"pw-me-mchoice\"></div>');\n        this.check_el = $('<div class=\"pw-me-check\"></div>');\n        const btn_group = $('<div class=\"btn-group\"></div>');\n        this.btn_action = $('<button type=\"button\" style=\"background:white;\" class=\"btn btn-outline-primary dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">Tria una opció</button>');\n        const dropdown_menu = $('<div class=\"dropdown-menu\"></div>');\n        btn_group.append(this.btn_action);\n        options.forEach((opt, i) => {\n            const dropdown_item = $('<a class=\"dropdown-item\" href=\"#\">' + opt + '</a>');\n            dropdown_item.on('click', function (evt) {\n                evt.preventDefault();\n                self.selectedIndex = i + '';\n                self.btn_action.html(dropdown_item.html());\n                if (self.status != globals_1.cfg.STATUS.MODIFIED) {\n                    self.check_el.html('');\n                    self.status = globals_1.cfg.STATUS.MODIFIED;\n                    self.quill_el_container.removeClass('pw-me-right pw-me-wrong pw-me-alert');\n                }\n            });\n            dropdown_menu.append(dropdown_item);\n        });\n        btn_group.append(dropdown_menu);\n        this.quill_el_container.append(btn_group);\n        this.quill_el_container.append(this.check_el);\n        this.parent.append(this.quill_el_container);\n        (0, utils_1.reflowLatex)();\n    }\n    showAnswer() {\n    }\n    clear() {\n        this.selectedIndex = '';\n        this.btn_action.html('');\n        this.check_el.html('');\n        this.status = globals_1.cfg.STATUS.UNMODIFIED;\n        this.quill_el_container.removeClass('pw-me-right pw-me-wrong pw-me-alert');\n    }\n    focus() {\n        this.btn_action.focus();\n    }\n    latex(tex) {\n        return [this.selectedIndex];\n    }\n    checkMsg(status, msg) {\n        this.status = status;\n        let msg2 = '';\n        if (status == 1) {\n            msg2 = '<span data-toggle=\"tooltip\" title=\"' + msg + '\"><i class=\"fas fa-check\"></i></span>';\n            this.quill_el_container.addClass('pw-me-right');\n        }\n        else if (status == 0) {\n            msg2 = '<span data-toggle=\"tooltip\" title=\"' + msg + '\"><i class=\"fas fa-times\"></i></span>';\n            this.quill_el_container.addClass('pw-me-wrong');\n        }\n        else {\n            msg2 = '<span data-toggle=\"tooltip\" title=\"' + msg + '\"><i class=\"fas fa-exclamation-triangle\"></i></span>';\n            this.quill_el_container.addClass('pw-me-alert');\n        }\n        this.check_el.html(msg2);\n    }\n    dispose() {\n        this.quill_el_container.off();\n    }\n    get_qid() {\n        return this.qid;\n    }\n    reflow() {\n        this.status = globals_1.cfg.STATUS.UNMODIFIED;\n    }\n}\nexports.EditorMChoice = EditorMChoice;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EditorMChoiceCheckbox = void 0;\nconst globals_1 = require(\"../globals\");\nconst utils_1 = require(\"../utils\");\nconst editorBase_1 = require(\"./editorBase\");\n/**\n     * Multiple options with checkboxes\n     * @param {*} parent\n     * @param {*} gid\n     * @param {*} options\n     * @param {*} multipleAnswers\n*/\nclass EditorMChoiceCheckbox extends editorBase_1.EditorBase {\n    constructor(parent, gid, def, qtype, multipleAnswers) {\n        super(parent, gid, def, qtype);\n        this.multipleAnswers = multipleAnswers || false;\n        let options = def.symbols;\n        const self = this;\n        this.selectedIndex = '';\n        this.gid = gid;\n        this.qid = Math.floor(Math.random() * 10000) + 10000;\n        this.options = options || [];\n        // cfg.STATUS = 0 incorrecte, cfg.STATUS = 1 correcte, cfg.STATUS < 0 errors \n        this.status = globals_1.cfg.STATUS.UNMODIFIED;\n        this.parent = parent;\n        this.wrong_attemps = 0;\n        this.quill_el_container = $('<div class=\"pw-me-mchoice\"></div>');\n        this.check_el = $('<div class=\"pw-me-check\"></div>');\n        const radios_group = $('<div></div>');\n        const radiosGroupId = \"rgid_\" + Math.random().toString(32).substring(2);\n        const allRadios = [];\n        options.forEach(function (opt, i) {\n            const radioId = \"raid_\" + Math.random().toString(32).substring(2);\n            const radio_wrapper = $('<div class=\"form-check\"></div>');\n            let radio_item = null;\n            if (self.multipleAnswers) {\n                radio_item = $('<input class=\"form-check-input\" type=\"checkbox\" id=\"' + radioId + '\" value=\"' + i + '\"/>');\n            }\n            else {\n                radio_item = $('<input class=\"form-check-input\" type=\"radio\" name=\"' + radiosGroupId + '\" id=\"' + radioId + '\" value=\"' + i + '\"/>');\n            }\n            allRadios.push(radio_item);\n            const radio_label = $('<label class=\"form-check-label\" for=\"' + radioId + '\">' + opt + '</label>');\n            radio_item.on('change', function (evt) {\n                evt.preventDefault();\n                //Determine which are selected\n                const wsel = [];\n                for (let k = 0; k < allRadios.length; k++) {\n                    if (allRadios[k].prop('checked')) {\n                        wsel.push(allRadios[k].prop('value') + '');\n                    }\n                }\n                self.selectedIndex = wsel.join(',');\n                if (self.status != globals_1.cfg.STATUS.MODIFIED) {\n                    self.check_el.html('');\n                    self.status = globals_1.cfg.STATUS.MODIFIED;\n                    self.quill_el_container.removeClass('pw-me-right pw-me-wrong pw-me-alert');\n                }\n            });\n            radio_wrapper.append(radio_item);\n            radio_wrapper.append(radio_label);\n            radios_group.append(radio_wrapper);\n        });\n        this.quill_el_container.append(radios_group);\n        this.quill_el_container.append(this.check_el);\n        this.parent.append(this.quill_el_container);\n        (0, utils_1.reflowLatex)();\n    }\n    showAnswer() {\n    }\n    clear() {\n        this.selectedIndex = '';\n        this.btn_action.html('');\n        this.check_el.html('');\n        this.status = globals_1.cfg.STATUS.UNMODIFIED;\n        this.quill_el_container.removeClass('pw-me-right pw-me-wrong pw-me-alert');\n    }\n    focus() {\n    }\n    latex(tex) {\n        return [this.selectedIndex];\n    }\n    get_qid() {\n        return this.qid;\n    }\n    checkMsg(status, msg) {\n        this.status = status;\n        let msg2 = '';\n        if (status == 1) {\n            msg2 = '<span data-toggle=\"tooltip\" title=\"' + msg + '\"><i class=\"fas fa-check\"></i></span>';\n            this.quill_el_container.addClass('pw-me-right');\n        }\n        else if (status == 0) {\n            msg2 = '<span data-toggle=\"tooltip\" title=\"' + msg + '\"><i class=\"fas fa-times\"></i></span>';\n            this.quill_el_container.addClass('pw-me-wrong');\n        }\n        else {\n            msg2 = '<span data-toggle=\"tooltip\" title=\"' + msg + '\"><i class=\"fas fa-exclamation-triangle\"></i></span>';\n            this.quill_el_container.addClass('pw-me-alert');\n        }\n        this.check_el.html(msg2);\n    }\n    dispose() {\n        this.quill_el_container.off();\n    }\n    reflow() {\n        this.status = globals_1.cfg.STATUS.UNMODIFIED;\n    }\n}\nexports.EditorMChoiceCheckbox = EditorMChoiceCheckbox;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EditorPanel = void 0;\nconst globals_1 = require(\"../globals\");\nconst utils_1 = require(\"../utils\");\nconst pwTabMenu_1 = require(\"./toolbar/pwTabMenu\");\nconst createToolbarButton_1 = require(\"./toolbar/createToolbarButton\");\nconst toolbar_config_1 = __importDefault(require(\"./toolbar/toolbar-config\"));\nconst editorBase_1 = require(\"./editorBase\");\n// Editor panel\nclass EditorPanel extends editorBase_1.EditorBase {\n    constructor(parent, gid, def, qtype, standalone) {\n        super(parent, gid, def, qtype);\n        const self = this;\n        this.parent = parent;\n        this.gid = gid;\n        this.wrong_attemps = 0;\n        this.standalone = standalone || false;\n        this.status = globals_1.cfg.STATUS.UNMODIFIED;\n        this.panel = $('<div class=\"pw-me-editorpanel\" style=\"position:relative\"></div>');\n        this.parent.append(this.panel);\n        this.palettes = new pwTabMenu_1.PwTabMenu(this.panel);\n        const spanMathInput = $('<span class=\"pw-me-editorpanel-mathinput\"></span>');\n        spanMathInput.on(\"click\", function (ev) {\n            ev.preventDefault();\n            $('.pw-me-btn-dropdownmenu').css(\"display\", \"none\");\n        });\n        this.panel.append(spanMathInput);\n        this.mathInput = (0, globals_1.MathField)(spanMathInput[0], {\n            handlers: {\n                edit() {\n                    if (standalone && self.status != globals_1.cfg.STATUS.MODIFIED) {\n                        self.check_el && self.check_el.html('');\n                        self.status = globals_1.cfg.STATUS.MODIFIED;\n                    }\n                }\n            }\n        });\n        if (this.standalone) {\n            this.check_el = $('<div></div>');\n            this.panel.append(this.check_el);\n        }\n        this.feedback_el = $('<div class=\"pw-mq-feedback\" style=\"display:none;\"></div>');\n        this.panel.append(this.feedback_el);\n        //Add button to palettes\n        (0, utils_1.items)(toolbar_config_1.default.button_meta, function (name, btnInfo) {\n            const tabName = toolbar_config_1.default.default_toolbar_tabs[btnInfo.tab - 1];\n            self.palettes.addTab(tabName);\n            // create and add button to palette  \n            const aButton = (0, createToolbarButton_1.createToolbarButton)(self.panel, btnInfo, name, self.mathInput);\n            self.palettes.addContentsToTab(tabName, aButton);\n        });\n    }\n    get $div() {\n        return this.panel;\n    }\n    clear() {\n        this.mathInput.latex('');\n        this.check_el && this.check_el.html('');\n        this.status = globals_1.cfg.STATUS.UNMODIFIED;\n    }\n    focus() {\n        this.mathInput.focus();\n    }\n    latex(tex) {\n        if (tex != null) {\n            this.mathInput.latex(tex);\n            this.status = globals_1.cfg.STATUS.UNMODIFIED;\n        }\n        else {\n            return [(0, utils_1.sanitizeLaTeX)(this.mathInput.latex())];\n        }\n        return [''];\n    }\n    checkMsg(status, msg) {\n        if (this.standalone) {\n            this.status = status;\n            let msg2 = '';\n            if (status == 1) {\n                msg2 = '<span style=\"color:green;margin:5px;\"><i class=\"fas fa-check\"></i> ' + msg + '</span>';\n            }\n            else if (status == 0) {\n                msg2 = '<span style=\"color:darkred;margin:5px;\"><i class=\"fas fa-times\"></i> ' + msg + '</span>';\n            }\n            else {\n                msg2 = '<span style=\"color:purple;margin:5px;\"><i class=\"fas fa-exclamation-triangle\"></i> ' + msg + '</span>';\n            }\n            this.check_el && this.check_el.html(msg2);\n        }\n    }\n    get_qid() {\n        return this.mathInput.id;\n    }\n    showPalette(name, visible) {\n        this.palettes.setVisible(name, visible);\n    }\n    dispose() {\n        this.mathInput.revert();\n        this.panel.find(\"button\").off();\n        this.palettes.dispose();\n    }\n    reflow() {\n        this.mathInput.reflow();\n        this.status = globals_1.cfg.STATUS.UNMODIFIED;\n    }\n    setDefinition(def) {\n        this.def = def;\n        const self = this;\n        if (def.palettes && def.palettes.indexOf('all') >= 0) {\n            // Show all palettes\n            // enable general palette\n            toolbar_config_1.default.default_toolbar_tabs.forEach(function (name) {\n                self.palettes.setVisible(name, true);\n            });\n            this.palettes.setTab('General');\n        }\n        // According to definition.palettes prepare the correct palettes\n        else if (def.palettes && def.palettes.length) {\n            // show this palettes\n            // set to first palette\n            let firstSelected = null;\n            let num_visible = 0;\n            toolbar_config_1.default.default_toolbar_tabs.forEach(function (name) {\n                let found = false;\n                let j = 0;\n                while (!found && j < def.palettes.length) {\n                    found = def.palettes[j].toLowerCase().trim() == name.toLowerCase().trim();\n                    if (found && j == 0) {\n                        firstSelected = name;\n                    }\n                    if (found) {\n                        num_visible += 1;\n                    }\n                    j += 1;\n                }\n                self.palettes.setVisible(name, found);\n            });\n            if (num_visible == 0 || !firstSelected) {\n                this.palettes.setVisible('General', true);\n            }\n            this.palettes.setTab(firstSelected || 'General');\n        }\n        else {\n            // Only show the general palette\n            // enable general palette\n            toolbar_config_1.default.default_toolbar_tabs.forEach(function (name) {\n                self.palettes.setVisible(name, name == 'General');\n            });\n            this.palettes.setTab('General');\n        }\n    }\n    showAnswer() {\n        if (!this.def) {\n            console.error(\"Cannot show answer because def is null\");\n            return;\n        }\n        if (!this.def.right_answer) {\n            console.error(\"Cannot show answer because, \", this.def.right_answer);\n            return;\n        }\n        this.feedback_el.css(\"display\", \"\");\n        this.feedback_el.html(atob(this.def.right_answer) + '<p><br></p>');\n        (0, utils_1.reflowLatex)();\n    }\n}\nexports.EditorPanel = EditorPanel;\n;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createToolbarButton = void 0;\nconst globals_1 = require(\"../../globals\");\n// Create a button for toolbar tab\nfunction createToolbarButton(parent, btn_meta, key, mathInput) {\n    if (typeof (btn_meta.latex) === \"function\") {\n        var btn = $('<div class=\"btn btn-sm pw-me-btn-toolbar pw-me-btn-dropdown\" title=\"' + key.trim() + '\"></div>');\n        var icon = $('<span>' + btn_meta.icon + '</span>');\n        (0, globals_1.StaticMath)(icon[0]);\n        btn.append(icon);\n        var panell = $('<div class=\"pw-me-btn-dropdownmenu\"></div>');\n        parent.append(panell);\n        var controls = [];\n        for (var k = 0, lenk = btn_meta.vars.length; k < lenk; k++) {\n            var varObj = btn_meta.vars[k];\n            var name = varObj.name;\n            //TODO check number or text values\n            var minmax = \"\";\n            if (varObj.min != null) {\n                minmax = ' min=\"' + varObj.min + '\" ';\n            }\n            if (varObj.max != null) {\n                minmax += ' max=\"' + varObj.max + '\" ';\n            }\n            var control = $('<input style=\"width:50px;margin-left:4px;grid-column:2;\" type=\"' + varObj.type + '\" value=\"' + varObj.val + '\"' + minmax + '/>');\n            controls.push(control);\n            var alab = $('<span style=\"grid-column:1\">' + name + '</span>');\n            panell.append(alab);\n            panell.append(control);\n        }\n        var okButtton = $('<button class=\"btn btn-sm\" style=\"padding:4px;grid-row:3;grid-column:1 / 2;background:lightgray;\">Ok</button>');\n        panell.append(okButtton);\n        okButtton.on(\"click\", function (evt) {\n            evt.preventDefault();\n            //recupera mapa de valors\n            var varsmap = {};\n            for (var k = 0, lenk = controls.length; k < lenk; k++) {\n                var $c = controls[k];\n                var varObj = btn_meta.vars[k];\n                var name = varObj.name;\n                var value = $c.val();\n                if (varObj.type === 'number') {\n                    value = parseInt(value);\n                }\n                varsmap[name] = value;\n            }\n            var real_latex = btn_meta.latex(varsmap);\n            mathInput.write(real_latex);\n            if (btn_meta.moveto) {\n                mathInput.keystroke(btn_meta.moveto);\n            }\n            panell.css(\"display\", \"none\");\n            mathInput.focus();\n        });\n        // requires a dialog to ask for parameters in btn_meta.vars array\n        btn.on('click', function (ev) {\n            ev.preventDefault();\n            // open a dialog with inputs\n            var panell_shown = panell.css(\"display\");\n            panell.css(\"display\", panell_shown === 'none' ? \"grid\" : \"none\");\n        });\n    }\n    else {\n        btn = $('<button class=\"btn btn-sm pw-me-btn-toolbar\" title=\"' + key.trim() + '\"></button>');\n        var icon = $('<span>' + btn_meta.icon + '</span>');\n        (0, globals_1.StaticMath)(icon[0]);\n        btn.append(icon);\n        // simple button\n        btn.on('click', function (ev) {\n            ev.preventDefault();\n            mathInput.write(btn_meta.latex);\n            mathInput.focus();\n            if (btn_meta.moveto) {\n                mathInput.keystroke(btn_meta.moveto);\n            }\n            $('.pw-me-btn-dropdownmenu').css(\"display\", \"none\");\n        });\n    }\n    return btn;\n}\nexports.createToolbarButton = createToolbarButton;\n;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PwTabMenu = void 0;\nconst utils_1 = require(\"../../utils\");\n// TabMenu\nclass PwTabMenu {\n    constructor(parent) {\n        this.$panel = $('<div class=\"pw-me-tabmenu\"></div>');\n        this.parent = parent;\n        this.tabs = {};\n        this.currentTab = null;\n        this.tabsPanel = $('<div class=\"pw-me-tabspanel\"></div>');\n        this.contentsPanel = $('<div class=\"pw-me-tabcontents\"></div>');\n        this.$panel.append(this.tabsPanel);\n        this.$panel.append(this.contentsPanel);\n        if (this.parent) {\n            this.parent.append(this.$panel);\n        }\n    }\n    get $div() {\n        return this.$panel;\n    }\n    addTab(name) {\n        if (this.tabs[name]) {\n            //already exists\n            return;\n        }\n        var self = this;\n        var tab = $('<button style=\"display:none;\" class=\"btn btn-sm pw-me-btn-tab\">' + name + '</button>');\n        var container = $('<div style=\"display:none;\" class=\"pw-me-tabcontainer\"></div>');\n        tab.on('click', function (ev) {\n            ev.preventDefault();\n            self.setTab(name);\n        });\n        this.tabsPanel.append(tab);\n        this.contentsPanel.append(container);\n        this.tabs[name] = {\n            tab: tab,\n            container: container\n        };\n        if (Object.keys(this.tabs).length === 1) {\n            this.setTab(name);\n        }\n    }\n    addContentsToTab(name, contents) {\n        if (this.tabs[name]) {\n            this.tabs[name].container.append(contents);\n        }\n    }\n    setVisible(name, visibility) {\n        if (this.tabs[name]) {\n            this.tabs[name].tab.css('display', visibility ? '' : 'none');\n            this.tabs[name].container.css('display', visibility ? 'flex' : 'none');\n        }\n    }\n    setTab(name) {\n        (0, utils_1.items)(this.tabs, function (key, value) {\n            if (key == name) {\n                value.tab.addClass('pw-me-btn-active');\n            }\n            else {\n                value.tab.removeClass('pw-me-btn-active');\n            }\n            value.container.css('display', key == name ? 'flex' : 'none');\n        });\n    }\n    dispose() {\n        this.tabsPanel.children().off();\n        this.tabsPanel.html('');\n        this.contentsPanel.html('');\n        this.tabs = {};\n    }\n}\nexports.PwTabMenu = PwTabMenu;\n;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst default_toolbar_buttons = ['fraction', 'square_root', 'cube_root', 'root', 'superscript', 'subscript', 'multiplication', 'division', 'plus_minus', 'pi', 'degree', 'not_equal', 'greater_equal', 'less_equal', 'greater_than', 'less_than', 'angle', 'parallel_to', 'perpendicular', 'triangle', 'parallelogram', 'round_brackets', 'matrix2', 'matrix3'];\nconst default_toolbar_tabs = [\"General\", \"Símbols\", \"Geometria\", \"Intervals\"];\nconst button_meta = {\n    //TAB1\n    \"Multiplicació\": { latex: \"\\\\times\", tab: 1, icon: '\\\\times' },\n    \"Fracció\": { latex: \"\\\\frac{}{}\", moveto: \"Up\", movefor: 1, tab: 1, icon: '\\\\frac{\\\\square}{\\\\square}' },\n    \"Exponent\": { latex: \"\\\\^{}\", moveto: \"Up\", movefor: 1, tab: 1, icon: '\\\\square^2' },\n    \"Parèntesis\": { latex: \"\\\\left(\\\\right)\", moveto: \"Left\", movefor: 1, tab: 1, icon: '\\\\left(\\\\square\\\\right)' },\n    \"Arrel quadrada\": { latex: \"\\\\sqrt{}\", moveto: \"Left\", movefor: 1, tab: 1, icon: '\\\\sqrt{\\\\square}' },\n    \"Arrel cúbica\": { latex: \"\\\\sqrt[3]{}\", moveto: \"Left\", movefor: 1, tab: 1, icon: '\\\\sqrt[3]{\\\\square}' },\n    \"Radical\": { latex: \"\\\\sqrt[{}]{}\", moveto: \"Left\", movefor: 2, tab: 1, icon: '\\\\sqrt[\\\\square]{\\\\square}' },\n    \"Matriu 2x2\": { latex: \"\\\\begin{pmatrix} & \\\\\\\\ & \\\\end{pmatrix}\", tab: 1, icon: 'M_{2\\\\times 2}' },\n    \"Matriu 3x3\": { latex: \"\\\\begin{pmatrix} & & \\\\\\\\ & &  \\\\\\\\ & & \\\\end{pmatrix}\", tab: 1, icon: 'M_{3\\\\times 3}' },\n    \"Matriu mxn\": {\n        latex: function (vars) {\n            const lat = [];\n            for (let i = 0; i < vars.n; i++) {\n                const latrow = [];\n                for (let j = 0; j < vars.m; j++) {\n                    latrow.push(\" \");\n                }\n                lat.push(latrow.join(\"&\"));\n            }\n            return \"\\\\begin{pmatrix} \" + lat.join(\"\\\\\\\\\") + \" \\\\end{pmatrix}\";\n        }, tab: 1, icon: 'M_{n\\\\times m}', vars: [{ name: 'n', type: 'number', min: 1, val: 2 }, { name: 'm', type: 'number', min: 1, val: 2 }]\n    },\n    \"Subíndex\": { latex: \"\\\\_{}\", moveto: \"Down\", movefor: 1, tab: 1, icon: '\\\\square_{2}' },\n    //TAB2 - símbols i constants\n    \"pi\": { latex: \"\\\\pi\", tab: 2, icon: '\\\\pi' },\n    \"e\": { latex: \"\\\\e\", tab: 2, icon: '\\\\e' },\n    \"infinit\": { latex: \"\\\\infty\", tab: 2, icon: '\\\\infty' },\n    \"Més menys\": { latex: \"\\\\pm\", tab: 2, icon: '\\\\pm' },\n    \"Diferent\": { latex: \"\\\\neq\", tab: 2, icon: '\\\\neq' },\n    \"Major o igual\": { latex: \"\\\\geq\", tab: 2, icon: '\\\\geq' },\n    \"Menor o igual\": { latex: \"\\\\leq\", tab: 2, icon: '\\\\leq' },\n    \"Major que\": { latex: \"\\\\gt\", tab: 2, icon: '\\\\gt' },\n    \"Menor que\": { latex: \"\\\\lt\", tab: 2, icon: '\\\\lt' },\n    //TAB3 - geometria\n    \"Graus\": { latex: \"\\\\degree\", tab: 3, icon: '\\\\degree' },\n    \"Angle\": { latex: \"\\\\angle\", tab: 3, icon: '\\\\angle' },\n    \"Paral·lel a\": { latex: \"\\\\parallel\", tab: 3, icon: '\\\\parallel' },\n    \"Perpendicular a\": { latex: \"\\\\perpendicular\", tab: 3, icon: '\\\\perpendicular' },\n    \"Triangle\": { latex: \"\\\\triangle\", tab: 3, icon: '\\\\triangle' },\n    \"Paral·lelogram\": { latex: \"\\\\parallelogram\", tab: 3, icon: '\\\\parallelogram' },\n    //TAB4 - intervals\n    \"Interval obert\": { latex: \"\\\\left( , \\\\right)\", moveto: \"Left\", movefor: 2, tab: 4, icon: '\\\\left(\\\\square, \\\\square\\\\right)' },\n    \"Interval tancat\": { latex: \"\\\\left[ , \\\\right]\", moveto: \"Left\", movefor: 2, tab: 4, icon: '\\\\left[\\\\square, \\\\square\\\\right]' },\n    \"Interval semi1\": { latex: \"\\\\left[ , \\\\right)\", moveto: \"Left\", movefor: 2, tab: 4, icon: '\\\\left[\\\\square, \\\\square\\\\right)' },\n    \"Interval semi2\": { latex: \"\\\\left( , \\\\right]\", moveto: \"Left\", movefor: 2, tab: 4, icon: '\\\\left(\\\\square, \\\\square\\\\right]' },\n    \"Infinit\": { latex: \"\\\\infty\", tab: 4, icon: '\\\\infty' },\n    \"Conjunt dels reals\": { latex: \"\\\\mathbb{R}\", tab: 4, icon: '\\\\mathbb{R}' },\n};\nconst keyboard_keys = {\n    'letters': [{ 'value': 'q', 'type': 'write', 'class': 'ks', 'display': 'q', 'new_line': false }, { 'value': 'w', 'type': 'write', 'class': 'ks', 'display': 'w', 'new_line': false }, { 'value': 'e', 'type': 'write', 'class': 'ks', 'display': 'e', 'new_line': false }, { 'value': 'r', 'type': 'write', 'class': 'ks', 'display': 'r', 'new_line': false }, { 'value': 't', 'type': 'write', 'class': 'ks', 'display': 't', 'new_line': false }, { 'value': 'y', 'type': 'write', 'class': 'ks', 'display': 'y', 'new_line': false }, { 'value': 'u', 'type': 'write', 'class': 'ks', 'display': 'u', 'new_line': false }, { 'value': 'i', 'type': 'write', 'class': 'ks', 'display': 'i', 'new_line': false }, { 'value': 'o', 'type': 'write', 'class': 'ks', 'display': 'o', 'new_line': false }, { 'value': 'p', 'type': 'write', 'class': 'ks', 'display': 'p', 'new_line': true }, { 'value': 'a', 'type': 'write', 'class': 'ks', 'display': 'a', 'new_line': false }, { 'value': 's', 'type': 'write', 'class': 'ks', 'display': 's', 'new_line': false }, { 'value': 'd', 'type': 'write', 'class': 'ks', 'display': 'd', 'new_line': false }, { 'value': 'f', 'type': 'write', 'class': 'ks', 'display': 'f', 'new_line': false }, { 'value': 'g', 'type': 'write', 'class': 'ks', 'display': 'g', 'new_line': false }, { 'value': 'h', 'type': 'write', 'class': 'ks', 'display': 'h', 'new_line': false }, { 'value': 'j', 'type': 'write', 'class': 'ks', 'display': 'j', 'new_line': false }, {\n            'value': 'k', 'type': 'write', 'class': 'ks', 'display': 'k', 'new_line': false\n        }, { 'value': 'l', 'type': 'write', 'class': 'ks', 'display': 'l', 'new_line': true }, { 'value': 'CapsLock', 'type': 'custom', 'class': 'ks long icon', 'display': '&#8673;', 'new_line': false }, { 'value': 'z', 'type': 'write', 'class': 'ks', 'display': 'z', 'new_line': false }, { 'value': 'x', 'type': 'write', 'class': 'ks', 'display': 'x', 'new_line': false }, { 'value': 'c', 'type': 'write', 'class': 'ks', 'display': 'c', 'new_line': false }, { 'value': 'v', 'type': 'write', 'class': 'ks', 'display': 'v', 'new_line': false }, { 'value': 'b', 'type': 'write', 'class': 'ks', 'display': 'b', 'new_line': false }, { 'value': 'n', 'type': 'write', 'class': 'ks', 'display': 'n', 'new_line': false }, { 'value': 'm', 'type': 'write', 'class': 'ks', 'display': 'm', 'new_line': false }, { 'value': 'Backspace', 'type': 'keystroke', 'class': 'ks long icon', 'display': '&#8678;', 'new_line': true }, { 'value': 'numpad', 'type': 'custom', 'class': 'ks long', 'display': '123', 'new_line': false }, { 'value': ',', 'type': 'write', 'class': 'ks', 'display': ',', 'new_line': false }, { 'value': '\\\\ ', 'type': 'write', 'class': 'ks too_long', 'display': 'Space', 'new_line': false }, { 'value': '.', 'type': 'write', 'class': 'ks', 'display': '.', 'new_line': false }, { 'value': 'close', 'type': 'custom', 'class': 'ks long takeup', 'display': 'X', 'new_line': false }], 'numbers': [{ 'value': '1', 'type': 'write', 'class': 'ks', 'display': '1', 'new_line': false }, { 'value': '2', 'type': 'write', 'class': 'ks', 'display': '2', 'new_line': false }, { 'value': '3', 'type': 'write', 'class': 'ks', 'display': '3', 'new_line': false }, { 'value': '+', 'type': 'write', 'class': 'ks', 'display': '+', 'new_line': false }, { 'value': '-', 'type': 'write', 'class': 'ks', 'display': '&#8315;', 'new_line': true }, { 'value': '4', 'type': 'write', 'class': 'ks', 'display': '4', 'new_line': false }, { 'value': '5', 'type': 'write', 'class': 'ks', 'display': '5', 'new_line': false }, {\n            'value': '6', 'type': 'write',\n            'class': 'ks', 'display': '6', 'new_line': false\n        }, { 'value': '\\\\times', 'type': 'write', 'class': 'ks', 'display': '&times;', 'new_line': false }, { 'value': '/', 'type': 'write', 'class': 'ks', 'display': '&#247;', 'new_line': true }, { 'value': '7', 'type': 'write', 'class': 'ks', 'display': '7', 'new_line': false }, { 'value': '8', 'type': 'write', 'class': 'ks', 'display': '8', 'new_line': false }, { 'value': '9', 'type': 'write', 'class': 'ks', 'display': '9', 'new_line': false }, { 'value': '=', 'type': 'write', 'class': 'ks', 'display': '=', 'new_line': false }, { 'value': 'Backspace', 'type': 'keystroke', 'class': 'ks long icon', 'display': '&#8678;', 'new_line': true }, { 'value': 'letters', 'type': 'custom', 'class': 'ks long', 'display': 'ABC', 'new_line': false }, { 'value': '0', 'type': 'write', 'class': 'ks', 'display': '0', 'new_line': false }, { 'value': '?', 'type': 'write', 'class': 'ks', 'display': '?', 'new_line': false }, {\n            'value': '%', 'type': 'write', 'class': 'ks', 'display': '%',\n            'new_line': false\n        }, { 'value': 'close', 'type': 'custom', 'class': 'ks long takeup', 'display': 'X', 'new_line': false }]\n};\nexports.default = {\n    default_toolbar_buttons,\n    default_toolbar_tabs,\n    button_meta,\n    keyboard_keys\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createQuillFromObject = void 0;\nconst editorCloze_1 = require(\"./components/editorCloze\");\nconst editorInput_1 = require(\"./components/editorInput\");\nconst editorPanel_1 = require(\"./components/editorPanel\");\nconst editorMChoice_1 = require(\"./components/editorMChoice\");\nconst globals_1 = require(\"./globals\");\nconst editorMChoiceCheckbox_1 = require(\"./components/editorMChoiceCheckbox\");\nconst utils_1 = require(\"./utils\");\nfunction createQuillFromObject($el, gid, obj) {\n    let created = null;\n    const qtype = obj.editor;\n    if (obj.formulation) {\n        const spanEl = \"<span>\" + obj.formulation + \"</span>\";\n        $el.append(spanEl);\n        // Probably will have to process mathjax\n        (0, utils_1.reflowLatex)();\n    }\n    $el.removeClass(\"pygen-cloze\");\n    if (qtype == globals_1.cfg.QTYPES.C) {\n        // clozed input (replace ini with boxes) \n        created = new editorCloze_1.EditorCloze($el, gid, obj, globals_1.cfg.QTYPES.C, obj.initial_latex);\n        $el.addClass(\"pygen-cloze\");\n    }\n    else if (qtype == globals_1.cfg.QTYPES.P) {\n        // Full panel\n        created = new editorPanel_1.EditorPanel($el, gid, obj, globals_1.cfg.QTYPES.P, true);\n    }\n    else if (qtype == globals_1.cfg.QTYPES.M) {\n        obj.symbols = obj.symbols || [];\n        // Multiple choice combo \n        created = new editorMChoice_1.EditorMChoice($el, gid, obj, globals_1.cfg.QTYPES.M, obj.symbols);\n    }\n    else if (qtype == globals_1.cfg.QTYPES.Ms) {\n        obj.symbols = obj.symbols || [];\n        // Multiple choice radio and checkbox\n        // TODO support multiple answers\n        const multipleAnswers = Array.isArray(obj.ans);\n        //created = new MultipleChoiceCombo($el, gid, obj.symbols);\n        created = new editorMChoiceCheckbox_1.EditorMChoiceCheckbox($el, gid, obj, globals_1.cfg.QTYPES.Ms, multipleAnswers);\n    }\n    else {\n        // Simple or basic quill input\n        created = new editorInput_1.EditorInput($el, gid, obj, globals_1.cfg.QTYPES.S);\n    }\n    const qid = created.get_qid();\n    const groupContainer = globals_1.shared[gid] || {};\n    groupContainer[qid] = created;\n    created.setStatus(globals_1.cfg.STATUS.UNMODIFIED);\n    if (obj.initial_latex && qtype != globals_1.cfg.QTYPES.C) {\n        //console.log(\"Setting initial_latex\", obj.initial_latex);\n        created.latex(obj.initial_latex);\n        created.setStatus(globals_1.cfg.STATUS.MODIFIED);\n    }\n    return qid;\n}\nexports.createQuillFromObject = createQuillFromObject;\n;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.findPyGenerators = void 0;\nconst actions_1 = require(\"./actions\");\nconst LevelIndicator_1 = require(\"./components/LevelIndicator\");\nconst createQuill_1 = require(\"./createQuill\");\nconst globals_1 = require(\"./globals\");\nconst goalChecker_1 = require(\"./goalChecker\");\nconst mq_parsing_1 = require(\"./mq-parsing\");\nconst seqBasic_1 = require(\"./sequences/seqBasic\");\nconst seqRandomWeighted_1 = require(\"./sequences/seqRandomWeighted\");\nconst seqSequence_1 = require(\"./sequences/seqSequence\");\nconst utils_1 = require(\"./utils\");\nfunction findPyGenerators() {\n    const IB = window['IB'] || {};\n    $(\"div[data-pygen]\").each(function (j, eg) {\n        const $eg = $(eg);\n        $eg.css({\n            \"position\": \"relative\",\n            \"min-height\": \"300px\",\n            \"background-color\": \"#ffffff\",\n            \"background-image\": 'url(\"https://piworld.es/iedib/matheditor/backgrounds/triangles.svg\")',\n            \"background-position\": \"center\",\n            \"background-size\": \"cover\"\n        });\n        $eg.html(''); //clear the container  \n        let gid = $eg.attr(\"id\") || '';\n        if (!gid) {\n            gid = 'pyg_' + Math.random().toString(32).substring(2);\n            $eg.attr(\"id\", gid);\n        }\n        globals_1.shared[gid] = {}; //This container will contain the instance of the qid in every screen\n        // Create the layout of this container\n        // Shoud have a top banner for level and message\n        // central panel for qüestion and displaying the mathinput\n        // bottom panel for control buttons\n        const topPanel = $('<div style=\"display:flex;flex-direction:row-reverse;align-items:baseline;\"></div>');\n        const centralPanel = $(\"<div></div>\");\n        const bottomPanel = $('<div style=\"display: flex; flex-direction: row; align-content: flex-start;margin:10px 0; flex-wrap: wrap; gap: 5px;margin-bottom:30px;\"></div>');\n        const copyrightPanel = $('<div style=\"position: absolute;left: 0;right: 0;bottom: 0;margin: 0;background-color: #9fa0ac; display: flex; flex-direction: row; align-content: flex-start; flex-wrap: wrap; gap: 5px;\"></div>');\n        const levelIndicator = new LevelIndicator_1.LevelIndicator(4);\n        const category = $eg.attr(\"data-pygen-category\") || \"general\"; //category to check the level of the student\n        //Only show the indicator if data-category is set\n        levelIndicator.setVisible(globals_1.cfg.HAS_IAPACE && $eg.attr(\"data-pygen-category\") != null);\n        topPanel.append(levelIndicator.container);\n        //try to find the category in iapace (only if available)\n        let currentLevel = 1;\n        if (globals_1.cfg.HAS_IAPACE) {\n            currentLevel = IB.iapace.inference(category);\n        }\n        levelIndicator.setLevel(currentLevel);\n        //Goal checker\n        let goalChecker = null;\n        if (globals_1.cfg.HAS_IAPACE && $eg.attr(\"data-pygen-goal\") != null) {\n            const goalRulesRaw = ($eg.attr(\"data-pygen-goal\") || '').split(\";\");\n            const goalRules = goalRulesRaw.map(function (e) { return e.split(\",\"); });\n            goalChecker = new goalChecker_1.GoalChecker(category, goalRules);\n            if (goalChecker.accomplished()) {\n                //Indicator that the goal is already reached\n                topPanel.append($('<span class=\"pw-goal-reached\">Repte aconseguit! </span>'));\n            }\n        }\n        // Format \"name.of.generador.function1;name.of.generator.function2[param1=a, param2='b', param3='c'];···\"\n        const rawDataPygens = ($eg.attr('data-pygen') || '').split(';');\n        const dataPygen = [];\n        for (let z = 0, lenz = rawDataPygens.length; z < lenz; z++) {\n            const genpart = rawDataPygens[z];\n            let genname = null;\n            const genparams = {};\n            if (genpart.indexOf('[') > 0) {\n                genname = genpart.split('[')[0].trim();\n                const paramspart = genpart.split('[')[1].replace(']', '').split(',');\n                for (let t = 0, lent = paramspart.length; t < lent; t++) {\n                    const aparm = paramspart[t];\n                    if (aparm.indexOf(\"=\") > 0) {\n                        const param_parts = aparm.split(\"=\");\n                        const key = param_parts[0];\n                        let value = param_parts[1];\n                        if (value.indexOf(\"'\") >= 0) {\n                            // As string\n                            value = value.replace(/'/g, '');\n                        }\n                        else {\n                            // As float\n                            value = parseFloat(value);\n                        }\n                        genparams[key] = value;\n                    }\n                }\n            }\n            else {\n                genname = genpart.trim();\n            }\n            if (Object.keys(genparams).length) {\n                dataPygen.push([genname, genparams]);\n            }\n            else {\n                dataPygen.push([genname]);\n            }\n        }\n        // Decide if to use a sequenciador?\n        let sequenciador = new seqBasic_1.SeqBasic(dataPygen);\n        if (dataPygen.length > 1) {\n            // Yes\n            const order = ($eg.attr(\"data-pygen-order\") || \"random\").trim().toLowerCase();\n            if (order.startsWith(\"random\") || order.startsWith(\"weighted\")) {\n                sequenciador = new seqRandomWeighted_1.SeqRandomWeighted(dataPygen, order);\n            }\n            else if (order.startsWith(\"sequence\")) {\n                sequenciador = new seqSequence_1.SeqSequence(dataPygen, order);\n            }\n        }\n        // Check this question\n        const checkBtn = $('<button class=\"btn btn-sm btn-primary\"><i class=\"fas fa-check\"></i> Comprova</button>');\n        const comodiBtn = $('<button class=\"btn btn-sm btn-warning\" style=\"display:none;\"><i class=\"far fa-life-ring\"></i> Comodí 50%</button>');\n        let currentDatos = null;\n        let currentEditor = null;\n        const createDynamicMathquill = function () {\n            checkBtn.prop(\"disabled\", true);\n            nextButton.prop(\"disabled\", true);\n            showmeBtn.prop(\"disabled\", true);\n            comodiBtn.css(\"display\", \"none\");\n            // Dynamically generate the level here!\n            if (globals_1.cfg.HAS_IAPACE) {\n                currentLevel = IB.iapace.inference(category);\n            }\n            else {\n                //TODO\n            }\n            console.log(\"xivat\", category, currentLevel);\n            levelIndicator.setLevel(currentLevel);\n            const nextGenerator = sequenciador.next();\n            $.ajax({\n                type: \"POST\",\n                url: globals_1.cfg.PYGEN_URL,\n                data: JSON.stringify({ \"activities\": [nextGenerator], \"level\": currentLevel }),\n                dataType: 'json',\n                success: function (datos) {\n                    console.log(\"xivato\", datos);\n                    if (datos.msg) {\n                        currentDatos = null;\n                        //Show error message\n                        centralPanel.html('<p style=\"color:darkred\">ERROR<br>' + JSON.stringify(datos.msg) + '</p>');\n                        console.error(\"ERROR: \", datos);\n                        nextButton.prop(\"disabled\", false);\n                        return;\n                    }\n                    //remove contents central panel\n                    centralPanel.html('');\n                    // TODO: create the dynamic element\n                    const pregunta = $('<p><span>' + ($eg.attr('data-pygen-formulation') || '') + '</span> ' + datos.formulation + '</p>');\n                    centralPanel.append(pregunta);\n                    //TODO: How to create the input widget eficienty \n                    //const dynEl = $('<span data-mq=\"'+ datos.mq64 +'\"></span>');\n                    //$eg.append(dynEl);\n                    const json_raw = atob(datos.mq64);\n                    const json_obj = JSON.parse(json_raw);\n                    //check if contains a comodi \n                    //TODO: decide if can use the comodi based on performance\n                    if (globals_1.cfg.HAS_IAPACE) {\n                        const frame = IB.iapace.findCreate(category);\n                        if (frame) {\n                            if ((0, utils_1.sum)(frame.h) >= 30) {\n                                console.log(\"Super! Has conseguit un comodí\");\n                                comodiBtn.css(\"display\", json_obj.comodi == null ? \"none\" : \"\");\n                            }\n                        }\n                    }\n                    json_obj.category = category;\n                    if (!json_obj.palettes) {\n                        //use all palettes if not defined\n                        json_obj.palettes = 'all';\n                    }\n                    // convert qtype.M (combo) to qtype.Ms (radios)\n                    if (json_obj.editor == globals_1.cfg.QTYPES.M) {\n                        json_obj.editor = globals_1.cfg.QTYPES.Ms;\n                    }\n                    currentDatos = json_obj;\n                    if (json_obj.initial_latex) {\n                        json_obj.initial_latex = (0, mq_parsing_1.processMqIni)(json_obj.initial_latex);\n                    }\n                    const symbols = [];\n                    if (json_obj.symbols) {\n                        const parts = json_obj.symbols.split(\";\");\n                        for (let r = 0, lenr = parts.length; r < lenr; r++) {\n                            const epart = parts[r];\n                            if (epart.trim()) {\n                                symbols.push(epart.trim());\n                            }\n                        }\n                    }\n                    json_obj.symbols = symbols;\n                    let rules = [];\n                    if (json_obj.rules) {\n                        rules = JSON.parse(json_obj.rules);\n                    }\n                    json_obj.rules = rules;\n                    // It should obtain category from here?\n                    console.log(json_obj);\n                    const qid = (0, createQuill_1.createQuillFromObject)(centralPanel, gid, json_obj);\n                    currentEditor = globals_1.shared[gid][qid];\n                    currentEditor.isPigen = true; //Marker that is dynamically generated for pigen\n                    //TODO can support many quills\n                    checkBtn.off();\n                    const extraActions = function (score10) {\n                        nextButton.prop(\"disabled\", false);\n                        showmeBtn.prop(\"disabled\", false);\n                        if (globals_1.cfg.HAS_IAPACE) {\n                            IB.iapace.addScore(category, score10);\n                            IB.iapace.save(); //Persistent storage\n                        }\n                        //TODO lunch confetti if succeded\n                        if (goalChecker && goalChecker.reached()) {\n                            if (topPanel.find(\".pw-goal-reached\").length == 0) {\n                                topPanel.append($('<span class=\"pw-goal-reached\">Repte aconseguit! </span>'));\n                            }\n                            //celebration?\n                            if ($eg.attr(\"data-pygen-celebration\") == 'confetti' && window.Confetti) {\n                                const c = new window.Confetti($eg[0]);\n                                c.play();\n                            }\n                        }\n                    };\n                    (0, actions_1.bindSubmitActionButton)(gid, checkBtn, extraActions);\n                    console.log(globals_1.shared[gid]);\n                    (0, utils_1.reflowLatex)();\n                    checkBtn.prop(\"disabled\", false);\n                    // Create the same element as a group\n                    //$eg.addClass(\"pw-mq-group\");\n                    //findQuillGroups($eg.parent());\n                },\n                error: function (datos) {\n                    currentDatos = null;\n                    currentEditor = null;\n                    console.log(\"error\", datos);\n                    centralPanel.html('<div><p style=\"color:darkred\">ERROR<br>' + JSON.stringify(datos) + '</p></div>');\n                    nextButton.prop(\"disabled\", false);\n                }\n            });\n        };\n        // Reveal answer to this question\n        const showmeBtn = $('<button class=\"btn btn-sm btn-outline-info\" title=\"Mostra la resposta\"><i class=\"fas fa-question-circle\"></i> Solució</button>');\n        showmeBtn.on('click', function (ev) {\n            ev.preventDefault();\n            if (!currentEditor) {\n                console.error(\"Missing currentEditor here :-(\");\n                return;\n            }\n            if (currentEditor.status != globals_1.cfg.STATUS.CORRECT && currentEditor.wrong_attemps < 1) {\n                console.log(\"can't show answer yet\", currentEditor);\n                return;\n            }\n            checkBtn.prop(\"disabled\", true);\n            console.log(currentEditor);\n            currentEditor.showAnswer && currentEditor.showAnswer();\n        });\n        // Skip this question\n        const nextButton = $('<button class=\"btn btn-sm btn-outline-primary\" title=\"Genera una nova pregunta\"><i class=\"fas fa-arrow-circle-right\"></i> Següent</button>');\n        nextButton.on('click', function (ev) {\n            ev.preventDefault();\n            // Remove existing widgets from this gid\n            const keys = Object.keys(globals_1.shared[gid] || {});\n            for (let i = 0, lin = keys.length; i < lin; i++) {\n                const qid = parseInt(keys[i]);\n                globals_1.shared[gid][qid].dispose();\n                delete globals_1.shared[gid][qid];\n            }\n            createDynamicMathquill();\n        });\n        comodiBtn.on('click', function (ev) {\n            ev.preventDefault();\n            if (!currentEditor || !currentDatos || !currentDatos.comodi) {\n                return;\n            }\n            currentEditor.comodiUsed = true;\n            comodiBtn.css(\"display\", \"none\");\n            currentEditor.latex(currentDatos.comodi);\n            // Mark editor as changed to enable evaluation\n            currentEditor.status = globals_1.cfg.STATUS.MODIFIED;\n        });\n        bottomPanel.append(checkBtn);\n        bottomPanel.append(nextButton);\n        bottomPanel.append(showmeBtn);\n        bottomPanel.append(comodiBtn);\n        $eg.append(topPanel);\n        $eg.append(centralPanel);\n        $eg.append(bottomPanel);\n        if ($eg.attr(\"data-copyright\") != \"none\") {\n            // Mostra la barra de copyright\n            const ccSpan = $('<span style=\"padding:4px;font-size:70%;color:whitesmoke;\"><em>pyQuizz</em> by Josep Mulet (c) 2021-22</span>');\n            copyrightPanel.append(ccSpan);\n            $eg.append(copyrightPanel);\n        }\n        createDynamicMathquill();\n    });\n}\nexports.findPyGenerators = findPyGenerators;\n;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sharedDlg = exports.shared = exports.MathField = exports.StaticMath = exports.loadPageInfo = exports.cfg = void 0;\nlet pageInfo = null;\nconst HAS_IAPACE = window[\"IB\"] && window[\"IB\"].iapace;\nconst RIGHT_ICON = 'fas fa-check'; //'far fa-smile'; //\nconst WRONG_ICON = 'fas fa-times'; //'far fa-dizzy'; //\nconst MAX_ATTEMPTS = 2; // Maximum number of wrong attempts before showing right answer\nconst CAS_URL = \"https://piworld.es/pigen/api/compare\";\nconst PYGEN_URL = \"https://piworld.es/pigen/api/generate\";\nconst GETANSWER_URL = \"https://piworld.es/pigen/api/getanswer\";\nconst BASE_URL = \"https://piworld.es/iedib/matheditor\";\nconst QTYPES = {\n    S: 'simple',\n    B: 'basic',\n    C: 'cloze',\n    P: 'panel',\n    M: 'mchoice',\n    Ms: 'mchoice*' // multiple choice radio, checkbox\n};\nconst STATUS = {\n    UNMODIFIED: 100,\n    MODIFIED: 200,\n    CORRECT: 1,\n    WRONG: 0\n};\nexports.cfg = {\n    BASE_URL,\n    pageInfo,\n    STATUS,\n    QTYPES,\n    GETANSWER_URL,\n    PYGEN_URL,\n    CAS_URL,\n    MAX_ATTEMPTS,\n    HAS_IAPACE,\n    RIGHT_ICON,\n    WRONG_ICON\n};\nfunction loadPageInfo() {\n    if (window.iedibAPI) {\n        pageInfo = window.iedibAPI.getPageInfo();\n        console.log(pageInfo);\n    }\n}\nexports.loadPageInfo = loadPageInfo;\nfunction StaticMath(div) {\n    const MQI = window.MathQuill.getInterface(2);\n    return MQI.StaticMath(div);\n}\nexports.StaticMath = StaticMath;\nfunction MathField(div, config) {\n    const MQI = window.MathQuill.getInterface(2);\n    return MQI.MathField(div, config);\n}\nexports.MathField = MathField;\nexports.shared = {};\nexports.sharedDlg = {};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GoalChecker = void 0;\nconst globals_1 = require(\"./globals\");\nclass GoalChecker {\n    constructor(category, rules) {\n        this.category = category;\n        this.rules = rules;\n    }\n    accomplished(value) {\n        const IB = window[\"IB\"] || {};\n        if (!globals_1.cfg.HAS_IAPACE) {\n            return false;\n        }\n        //getter\n        if (!value) {\n            const frame = IB.iapace.find(this.category);\n            if (frame == null) {\n                return false;\n            }\n            return frame.d; //done flag in tree\n        }\n        //setter\n        const frame = IB.iapace.findCreate(this.category);\n        frame.d = value;\n        IB.iapace.save();\n        return value;\n    }\n    reached() {\n        const IB = window[\"IB\"] || {};\n        if (!globals_1.cfg.HAS_IAPACE) {\n            return false;\n        }\n        if (this.accomplished()) {\n            return false;\n        }\n        const frame = IB.iapace.findCreate(this.category);\n        let reach = false;\n        const nrules = this.rules.length;\n        let i = 0;\n        while (!reach && i < nrules) {\n            let partial = true;\n            const crule = this.rules[i];\n            let undecided = 0;\n            if (isNaN(crule[0])) {\n                undecided += 1;\n            }\n            else {\n                //Num. questions done on category\n                partial = partial && (frame.n >= parseInt(crule[0]));\n            }\n            if (isNaN(crule[1])) {\n                undecided += 1;\n            }\n            else {\n                //Average grade\n                let grade = 0.0;\n                if (frame.n > 0) {\n                    grade = frame.s / (1.0 * frame.n);\n                }\n                partial = partial && (grade >= parseFloat(crule[1]));\n            }\n            if (isNaN(crule[2])) {\n                undecided += 1;\n            }\n            else {\n                //current level\n                partial = partial && (IB.iapace.inference(this.category) >= parseInt(crule[2]));\n            }\n            if (undecided < 3) {\n                reach = partial;\n            }\n            i += 1;\n        }\n        if (reach) {\n            this.accomplished(true);\n        }\n        return reach;\n    }\n}\nexports.GoalChecker = GoalChecker;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createQuillFromDataAttr = exports.processMqIni = void 0;\nconst createQuill_1 = require(\"./createQuill\");\nconst globals_1 = require(\"./globals\");\nfunction processMqIni(ini) {\n    ini = ini || '';\n    ini = ini.replace(/\\?\\d*?/g, '\\\\MathQuillMathField{}');\n    ini = ini.replace(/M\\[(\\d+)x(\\d+)\\]/g, function ($0, $1, $2) {\n        const nrows = parseInt($1);\n        const ncols = parseInt($2);\n        const mtex = [];\n        const aRow = new Array(ncols);\n        for (let i = 0; i < nrows; i++) {\n            mtex.push(aRow.join(' & '));\n        }\n        return '\\\\begin{pmatrix} ' + mtex.join(' \\\\\\\\ ') + ' \\\\end{pmatrix}';\n    });\n    return ini;\n}\nexports.processMqIni = processMqIni;\nfunction createQuillFromDataAttr($el, gid) {\n    const qtype = $el.attr(\"data-mq\") || 'simple';\n    let ans = $el.attr(\"data-mq-ans\");\n    // If not ans then it cannot be checked, so.\n    let ansType = 'ans';\n    if (!ans) {\n        ans = $el.attr(\"data-mq-anse\");\n        ansType = 'anse';\n        if (!ans) {\n            console.error(\"> MQ has no data-mq-ans/e!\");\n            return;\n        }\n    }\n    // Support arrays in answers (always as str)\n    ans = ans.trim();\n    if (ans.startsWith('[') && ans.endsWith(']')) {\n        ans = JSON.parse(ans);\n        for (let kk = 0, lenkk = ans.length; kk < lenkk; kk++) {\n            ans[kk] = '' + ans[kk];\n        }\n    }\n    const ini = processMqIni($el.attr(\"data-mq-ini\"));\n    const symbolsRaw = $el.attr(\"data-mq-symbols\"); // a := valor; b := valor;  c := valor; \n    if (qtype === globals_1.cfg.QTYPES.C && !ini) {\n        console.error(\"> MQ \", $el, \" is of type cloze but it has no data-mq-ini!\");\n        return;\n    }\n    let ra = '';\n    if ($el.attr(\"data-mq-ra\")) {\n        // Base64 conversion\n        ra = atob($el.attr(\"data-mq-ra\") || '');\n    }\n    const symbols = [];\n    if (symbolsRaw) {\n        const parts = symbolsRaw.split(\";\");\n        for (let r = 0, lenr = parts.length; r < lenr; r++) {\n            const epart = parts[r];\n            if (epart.trim()) {\n                symbols.push(epart.trim());\n            }\n        }\n    }\n    const rulesRaw = $el.attr(\"data-mq-rules\");\n    let rules = [];\n    if (rulesRaw) {\n        rules = JSON.parse(rulesRaw);\n    }\n    let palettes = [];\n    const palettesRaw = $el.attr(\"data-mq-palettes\");\n    if (palettesRaw) {\n        const parts = palettesRaw.split(\",\");\n        parts.forEach(function (e) {\n            palettes.push(e.trim());\n        });\n    }\n    const obj = {\n        editor: qtype,\n        symbols: symbols,\n        right_answer: ra,\n        initial_latex: ini,\n        rules: rules,\n        palettes: palettes,\n        ans: ans,\n        ansType: ansType\n    };\n    if ($el.attr(\"data-mq-formulation\")) {\n        obj.formulation = $el.attr(\"data-mq-formulation\");\n    }\n    (0, createQuill_1.createQuillFromObject)($el, gid, obj);\n}\nexports.createQuillFromDataAttr = createQuillFromDataAttr;\n;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.findQuillGroups = void 0;\nconst actions_1 = require(\"./actions\");\nconst createQuill_1 = require(\"./createQuill\");\nconst globals_1 = require(\"./globals\");\nconst mq_parsing_1 = require(\"./mq-parsing\");\nconst utils_1 = require(\"./utils\");\nconst findQuills = function ($eg, gid) {\n    $eg.find(\"[data-mq]\").each(function (i, el) {\n        const $el = $(el);\n        const qtype = $(el).attr(\"data-mq\") || 'simple'; //s=simple, b=basic, p=panel, c=cloze (requires data-mq-ini)\n        if ((0, utils_1.hasValue)(globals_1.cfg.QTYPES, qtype)) {\n            //create from data-attributes\n            console.error(\"Definition via data-attributes in deprecated since version 2.0. \"\n                + \"Please encode the definition in a single data-mq field.\");\n            (0, mq_parsing_1.createQuillFromDataAttr)($el, gid);\n        }\n        else {\n            // Assume that everything is encoded in data-mq atribute\n            // Use the MQ-editor online\n            try {\n                const json_raw = atob(qtype);\n                const json_obj = JSON.parse(json_raw);\n                (0, createQuill_1.createQuillFromObject)($el, gid, json_obj);\n            }\n            catch (ex) {\n                console.error(\"Invalid or corrupted MQ definition:: \", qtype);\n            }\n        }\n    });\n};\nfunction findQuillGroups(parent) {\n    parent = parent || $('body');\n    parent.find(\".pw-mq-group\").each(function (j, eg) {\n        const $eg = $(eg);\n        if ($eg.hasClass(\"pw-mq-done\")) {\n            return;\n        }\n        //Prevent reprocessing\n        $eg.addClass(\"pw-mq-done\");\n        let gid = $eg.attr(\"id\");\n        if (!gid) {\n            gid = 'g_' + Math.random().toString(32).substring(2);\n            $eg.attr(\"id\", gid);\n        }\n        globals_1.shared[gid] = {};\n        findQuills($eg, gid);\n        const check_btn = (0, actions_1.createSubmitButtonForGroup)(gid);\n        $eg.append(check_btn);\n        // solve problem of display by redrawing\n        if (parent == null) {\n            window.setTimeout(function () {\n                (0, utils_1.items)(globals_1.shared, function (gid, groupContainer) {\n                    (0, utils_1.items)(groupContainer, function (qid, editor) {\n                        editor.reflow && editor.reflow();\n                    });\n                });\n            }, 800);\n        }\n    });\n}\nexports.findQuillGroups = findQuillGroups;\n;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.applyPolyfills = void 0;\nfunction applyPolyfills() {\n    if (!Array.prototype.forEach) {\n        Array.prototype.forEach = function forEach(callback, thisArg) {\n            if (typeof callback !== 'function') {\n                throw new TypeError(callback + ' is not a function');\n            }\n            var array = this;\n            thisArg = thisArg || this;\n            for (var i = 0, l = array.length; i !== l; ++i) {\n                callback.call(thisArg, array[i], i, array);\n            }\n        };\n    }\n    if (!Array.prototype.map) {\n        Array.prototype.map = function (callback) {\n            if (typeof callback !== 'function') {\n                throw new TypeError(callback + ' is not a function');\n            }\n            var arr = [];\n            for (var i = 0; i < this.length; i++) {\n                arr.push(callback(this[i], i, this));\n            }\n            return arr;\n        };\n    }\n    if (!Array.prototype.filter) {\n        Array.prototype.filter = function (callback) {\n            if (typeof callback !== 'function') {\n                throw new TypeError(callback + ' is not a function');\n            }\n            var arr = [];\n            for (var i = 0; i < this.length; i++) {\n                if (callback.call(this, this[i], i, this)) {\n                    arr.push(this[i]);\n                }\n            }\n            return arr;\n        };\n    }\n    if (!Array.isArray) {\n        Array.isArray = function (arg) {\n            return Object.prototype.toString.call(arg) === '[object Array]';\n        };\n    }\n    !(typeof Number.isNaN == 'function') ||\n        (Number.isNaN = function (value) {\n            return value !== null // Number(null) => 0\n                && (value != value // NaN != NaN\n                    || +value != value // Number(falsy) => 0 && falsy == 0...\n                );\n        });\n}\nexports.applyPolyfills = applyPolyfills;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SeqBasic = void 0;\nclass SeqBasic {\n    constructor(lpygens) {\n        this.lpygens = lpygens;\n    }\n    next() {\n        return this.lpygens[0];\n    }\n}\nexports.SeqBasic = SeqBasic;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SeqRandomWeighted = void 0;\nconst utils_1 = require(\"../utils\");\nconst seqBasic_1 = require(\"./seqBasic\");\nclass SeqRandomWeighted extends seqBasic_1.SeqBasic {\n    constructor(lpygens, definition) {\n        super(lpygens);\n        definition = (definition || \"random\").trim().toLowerCase();\n        this.definition = definition;\n        let weights = [];\n        if (definition.startsWith(\"weighted:\")) {\n            definition = definition.replace(\"weighted:\", \"\");\n            const parts = definition.split(\",\");\n            weights = parts.map(function (e) { return parseFloat(e); });\n        }\n        else {\n            //Assume equally distributed\n            const vran = 1.0 / lpygens.length;\n            for (let i = 0, len = lpygens.length; i < len; i++) {\n                weights.push(vran);\n            }\n        }\n        this.lpygens = lpygens;\n        //fix the problem of wrong length\n        if (this.lpygens.length > weights.length) {\n            console.log(\"SeqRandomWeighted:: lpygens and weights have different length\");\n            while (this.lpygens != weights.length) {\n                weights.push(1.0);\n            }\n        }\n        while (weights.length > lpygens.length) {\n            weights.pop();\n        }\n        //Normalize and aggregate weigths\n        const total = (0, utils_1.sum)(weights);\n        let old = 0.0;\n        weights.forEach(function (w, i) {\n            w = w / total;\n            old = w + old;\n            weights[i] = old;\n        });\n        this.weights = weights;\n    }\n    ;\n    next() {\n        //Optimization\n        if (this.definition == 'random') {\n            const pos = Math.floor(Math.random() * this.lpygens.length);\n            return this.lpygens[pos];\n        }\n        const rnd = Math.random();\n        let pos = 0;\n        let val = this.weights[pos];\n        while (val < rnd) {\n            pos += 1;\n            val = this.weights[pos];\n        }\n        return this.lpygens[pos];\n    }\n}\nexports.SeqRandomWeighted = SeqRandomWeighted;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SeqSequence = void 0;\nconst utils_1 = require(\"../utils\");\nconst seqBasic_1 = require(\"./seqBasic\");\nconst seqRandomWeighted_1 = require(\"./seqRandomWeighted\");\nclass SeqSequence extends seqBasic_1.SeqBasic {\n    constructor(lpygens, definition) {\n        super(lpygens);\n        this.lpygens = lpygens;\n        definition = definition.replace(\"sequence:\", \"\").trim().toLowerCase();\n        this.positions = [];\n        this.terminalGen = undefined;\n        const placeholders = definition.split(\",\");\n        const self = this;\n        placeholders.forEach(function (p, i) {\n            if ((0, utils_1.isNumeric)(p) && self.terminalGen == null) {\n                const e = parseInt(p);\n                for (let k = 0; k < e; k++) {\n                    self.positions.push(i);\n                }\n            }\n            else if (p.startsWith('*') && self.terminalGen == null) {\n                //all the remaining lpygens are *\n                //Apply weights!!!!\n                const remainingLpygens = lpygens.slice(i);\n                const def2 = [];\n                let isWeighted = false;\n                for (let k = i; k < placeholders.length; k++) {\n                    let e2 = placeholders[k];\n                    if (e2.indexOf(\"*\") >= 0 && e2.indexOf(\"(\") > 0) {\n                        e2 = e2.replace(\"*\", \"\").replace(\"(\", \"\").replace(\")\", \"\");\n                        def2.push(parseFloat(e2));\n                        isWeighted = true;\n                    }\n                    else {\n                        def2.push(1);\n                    }\n                }\n                let typeRan = \"random\";\n                if (isWeighted) {\n                    typeRan = \"weighted: \" + def2.join(\",\");\n                }\n                self.terminalGen = new seqRandomWeighted_1.SeqRandomWeighted(remainingLpygens, typeRan);\n            }\n        });\n        this.pointer = 0;\n    }\n    ;\n    next() {\n        if (this.pointer >= this.positions.length && this.terminalGen) {\n            return this.terminalGen.next();\n        }\n        this.pointer = this.pointer % this.positions.length;\n        const indx = this.positions[this.pointer];\n        this.pointer += 1;\n        return this.lpygens[indx];\n    }\n}\nexports.SeqSequence = SeqSequence;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isNumeric = exports.createLinkSheet = exports.createStyleSheet = exports.insertScript = exports.MD5 = exports.copyPropsFromTo = exports.hasValue = exports.items = exports.sum = exports.sanitizeLaTeX = exports.reflowLatex = void 0;\nfunction reflowLatex() {\n    if (window.MathJax) {\n        window.MathJax.typesetPromise && window.MathJax.typesetPromise();\n        window.MathJax.Hub && window.MathJax.Hub.Queue && window.MathJax.Hub.Queue([\"Typeset\", MathJax.Hub]);\n    }\n}\nexports.reflowLatex = reflowLatex;\nfunction sanitizeLaTeX(tex) {\n    return tex.replace(/·/g, '*');\n}\nexports.sanitizeLaTeX = sanitizeLaTeX;\nfunction sum(iter) {\n    let total = 0;\n    for (let i = 0, len = iter.length; i < len; i++) {\n        total += iter[i];\n    }\n    return total;\n}\nexports.sum = sum;\n;\nfunction items(obj, cb) {\n    if (Array.isArray(obj)) {\n        for (var i = 0, len = obj.length; i < len; i++) {\n            cb(i, obj[i]);\n        }\n    }\n    else {\n        var keys = Object.keys(obj);\n        for (var i = 0, len = keys.length; i < len; i++) {\n            var key = keys[i];\n            cb(key, obj[key]);\n        }\n    }\n}\nexports.items = items;\n;\nfunction hasValue(dict, target) {\n    let found = false;\n    const keys = Object.keys(dict);\n    let i = 0;\n    while (!found && i < keys.length) {\n        const k = keys[i];\n        found = (dict[k] == target);\n        i++;\n    }\n    return found;\n}\nexports.hasValue = hasValue;\nfunction copyPropsFromTo(source, target) {\n    var props = Object.keys(source);\n    for (var i = 0, len = props.length; i < len; i++) {\n        var prop = props[i];\n        target[prop] = source[prop];\n    }\n}\nexports.copyPropsFromTo = copyPropsFromTo;\nfunction MD5(d) { var r = M(V(Y(X(d), 8 * d.length))); return r.toLowerCase(); }\nexports.MD5 = MD5;\n;\nfunction M(d) { for (var _, m = \"0123456789ABCDEF\", f = \"\", r = 0; r < d.length; r++)\n    _ = d.charCodeAt(r), f += m.charAt(_ >>> 4 & 15) + m.charAt(15 & _); return f; }\nfunction X(d) { for (var _ = Array(d.length >> 2), m = 0; m < _.length; m++)\n    _[m] = 0; for (m = 0; m < 8 * d.length; m += 8)\n    _[m >> 5] |= (255 & d.charCodeAt(m / 8)) << m % 32; return _; }\nfunction V(d) { for (var _ = \"\", m = 0; m < 32 * d.length; m += 8)\n    _ += String.fromCharCode(d[m >> 5] >>> m % 32 & 255); return _; }\nfunction Y(d, _) { d[_ >> 5] |= 128 << _ % 32, d[14 + (_ + 64 >>> 9 << 4)] = _; for (var m = 1732584193, f = -271733879, r = -1732584194, i = 271733878, n = 0; n < d.length; n += 16) {\n    var h = m, t = f, g = r, e = i;\n    f = md5_ii(f = md5_ii(f = md5_ii(f = md5_ii(f = md5_hh(f = md5_hh(f = md5_hh(f = md5_hh(f = md5_gg(f = md5_gg(f = md5_gg(f = md5_gg(f = md5_ff(f = md5_ff(f = md5_ff(f = md5_ff(f, r = md5_ff(r, i = md5_ff(i, m = md5_ff(m, f, r, i, d[n + 0], 7, -680876936), f, r, d[n + 1], 12, -389564586), m, f, d[n + 2], 17, 606105819), i, m, d[n + 3], 22, -1044525330), r = md5_ff(r, i = md5_ff(i, m = md5_ff(m, f, r, i, d[n + 4], 7, -176418897), f, r, d[n + 5], 12, 1200080426), m, f, d[n + 6], 17, -1473231341), i, m, d[n + 7], 22, -45705983), r = md5_ff(r, i = md5_ff(i, m = md5_ff(m, f, r, i, d[n + 8], 7, 1770035416), f, r, d[n + 9], 12, -1958414417), m, f, d[n + 10], 17, -42063), i, m, d[n + 11], 22, -1990404162), r = md5_ff(r, i = md5_ff(i, m = md5_ff(m, f, r, i, d[n + 12], 7, 1804603682), f, r, d[n + 13], 12, -40341101), m, f, d[n + 14], 17, -1502002290), i, m, d[n + 15], 22, 1236535329), r = md5_gg(r, i = md5_gg(i, m = md5_gg(m, f, r, i, d[n + 1], 5, -165796510), f, r, d[n + 6], 9, -1069501632), m, f, d[n + 11], 14, 643717713), i, m, d[n + 0], 20, -373897302), r = md5_gg(r, i = md5_gg(i, m = md5_gg(m, f, r, i, d[n + 5], 5, -701558691), f, r, d[n + 10], 9, 38016083), m, f, d[n + 15], 14, -660478335), i, m, d[n + 4], 20, -405537848), r = md5_gg(r, i = md5_gg(i, m = md5_gg(m, f, r, i, d[n + 9], 5, 568446438), f, r, d[n + 14], 9, -1019803690), m, f, d[n + 3], 14, -187363961), i, m, d[n + 8], 20, 1163531501), r = md5_gg(r, i = md5_gg(i, m = md5_gg(m, f, r, i, d[n + 13], 5, -1444681467), f, r, d[n + 2], 9, -51403784), m, f, d[n + 7], 14, 1735328473), i, m, d[n + 12], 20, -1926607734), r = md5_hh(r, i = md5_hh(i, m = md5_hh(m, f, r, i, d[n + 5], 4, -378558), f, r, d[n + 8], 11, -2022574463), m, f, d[n + 11], 16, 1839030562), i, m, d[n + 14], 23, -35309556), r = md5_hh(r, i = md5_hh(i, m = md5_hh(m, f, r, i, d[n + 1], 4, -1530992060), f, r, d[n + 4], 11, 1272893353), m, f, d[n + 7], 16, -155497632), i, m, d[n + 10], 23, -1094730640), r = md5_hh(r, i = md5_hh(i, m = md5_hh(m, f, r, i, d[n + 13], 4, 681279174), f, r, d[n + 0], 11, -358537222), m, f, d[n + 3], 16, -722521979), i, m, d[n + 6], 23, 76029189), r = md5_hh(r, i = md5_hh(i, m = md5_hh(m, f, r, i, d[n + 9], 4, -640364487), f, r, d[n + 12], 11, -421815835), m, f, d[n + 15], 16, 530742520), i, m, d[n + 2], 23, -995338651), r = md5_ii(r, i = md5_ii(i, m = md5_ii(m, f, r, i, d[n + 0], 6, -198630844), f, r, d[n + 7], 10, 1126891415), m, f, d[n + 14], 15, -1416354905), i, m, d[n + 5], 21, -57434055), r = md5_ii(r, i = md5_ii(i, m = md5_ii(m, f, r, i, d[n + 12], 6, 1700485571), f, r, d[n + 3], 10, -1894986606), m, f, d[n + 10], 15, -1051523), i, m, d[n + 1], 21, -2054922799), r = md5_ii(r, i = md5_ii(i, m = md5_ii(m, f, r, i, d[n + 8], 6, 1873313359), f, r, d[n + 15], 10, -30611744), m, f, d[n + 6], 15, -1560198380), i, m, d[n + 13], 21, 1309151649), r = md5_ii(r, i = md5_ii(i, m = md5_ii(m, f, r, i, d[n + 4], 6, -145523070), f, r, d[n + 11], 10, -1120210379), m, f, d[n + 2], 15, 718787259), i, m, d[n + 9], 21, -343485551), m = safe_add(m, h), f = safe_add(f, t), r = safe_add(r, g), i = safe_add(i, e);\n} return Array(m, f, r, i); }\nfunction md5_cmn(d, _, m, f, r, i) { return safe_add(bit_rol(safe_add(safe_add(_, d), safe_add(f, i)), r), m); }\nfunction md5_ff(d, _, m, f, r, i, n) { return md5_cmn(_ & m | ~_ & f, d, _, r, i, n); }\nfunction md5_gg(d, _, m, f, r, i, n) { return md5_cmn(_ & f | m & ~f, d, _, r, i, n); }\nfunction md5_hh(d, _, m, f, r, i, n) { return md5_cmn(_ ^ m ^ f, d, _, r, i, n); }\nfunction md5_ii(d, _, m, f, r, i, n) { return md5_cmn(m ^ (_ | ~f), d, _, r, i, n); }\nfunction safe_add(d, _) { var m = (65535 & d) + (65535 & _); return (d >> 16) + (_ >> 16) + (m >> 16) << 16 | 65535 & m; }\nfunction bit_rol(d, _) { return d << _ | d >>> 32 - _; }\nfunction insertScript(url, callback) {\n    var tag = document.createElement('script');\n    tag.src = url;\n    tag.type = \"text/javascript\";\n    tag.async = true;\n    document.head.appendChild(tag);\n    if (callback) {\n        tag.async = true;\n        tag.onload = function () {\n            callback();\n        };\n    }\n}\nexports.insertScript = insertScript;\nfunction createStyleSheet(src, id) {\n    if (id && document.getElementById(id)) {\n        return;\n    }\n    var style = document.createElement('style');\n    style.innerHTML = src;\n    if (id) {\n        style.id = id;\n    }\n    document.getElementsByTagName('head')[0].appendChild(style);\n}\nexports.createStyleSheet = createStyleSheet;\nfunction createLinkSheet(href, id) {\n    var link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.type = 'text/css';\n    link.href = href;\n    document.getElementsByTagName('head')[0].appendChild(link);\n}\nexports.createLinkSheet = createLinkSheet;\nfunction isNumeric(str) {\n    return (str || '').replace(/\\s+/g, '').match(/^[+\\-]?[0-9]+\\.?[0-9]*$/) != null;\n}\nexports.isNumeric = isNumeric;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\n// Requires jquery\n// Other required assets are automatically inserted into page\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Mathquill groups are marked with the class pw-mq-group\n * All data-mq inserted within a group will only have one submit button,\n * so all answers will be sent to the check server at once\n */\n/**\n * DATA-MQ ELEMENT\n * It is used to generate questions client-side\n *\n * SYNTAX on elem being p or span or div\n * <elem data-mq=\"qtype\" data-mq-ans=\"a+b\" data-mq-symbols=\"a:=1;b:=2;\" data-mq-ini=\"?^?\"\n *        data-mq-rules='{\"key\":\"value\"}' data-mq-formulation=\"...\">\n *    Text that contains the formulation...\n * </elem>\n *\n * ATTRIBUTES\n * data-mq: can either define a type (simple, basic, cloze, panel, mchoice, mchoice*) or\n *         a base64 encoded definition of the whole activity. This last option is used to offuscate answers.\n *         In the last case, an activity generator can be used.\n * data-mq-ans: sympy representation of the answer. It can be a boolean to assert if it is true\n *              it can be an array [\"\",\"\",\"\"...] in cloze question types (it requires data-mq-ini)\n *\n * data-mq-symbols: Define symbols and default values, use := to assign values and ; to separate symbol definitions.\n *               In cloze questions an special variable called ua[i], i the index of the placeholder, is the answer\n *               that the user introduced at placeholder i. This can be used to construct a custom evaluator which\n *               returns a boolean value in data-mq-ans.\n *               Note that data-mq-ans can use any of the defined symbols. By default \"x\", \"y\", \"z\" are already defined\n *               as sympy symbols. No need to add them to data-mq-symbols.\n *               Define options for mchoice, mchoice* separated by comma.\n *\n * data-mq-ini: Initial latex, e.g. ?+? on every ? is a placeholder for cloze questions or\n *              an initial matrix of a given size M[3x3]\n *\n * data-mq-rules: is a map which contains the options that must be passed to the evaluator\n *    \"factor\": true  --> the answer must be factorized\n *    \"expanded\": true --> the answer must be expanded\n *    \"precision\": 1e-3 --> precission of numeric answers\n *    \"comma_as_decimal\": true --> The comma symbol in the answer will be interpreted as decimal part separator.\n *\n * data-mq-formulation (optional): Text that will be appended to the end of the formulation.\n */\n/**\n * DATA-PYGEN ELEMENT\n * The questions are generated server-side by a generator in pygen server. After the question is generated and rendered\n * the validation process i equivalent to the one in DATA-MQ\n *\n * <div data-pygen=\"path.to.generator.fn1[r=5,complexity=1];path.to.generator.fn2;path.to.generator.fn3;\"\n *      data-pygen-category=\"algebra.monomials\" data-pygen-order=\"weighted:0.2,0.7,0.1\"\n *      data-pygen-goal=\"5,6,4;10,5,*\" data-pygen-celebrate=\"none|confetti\"\n * ></div>\n *\n * data-pygen:\n *    The generator paths are the same as the ones defined in pygen.\n *    Several generators can be used by separating them with ;.\n *    Generators can be configured by setting parameters values within brackets [].\n *\n *  data-pygen-category:\n *    The category in iapace tree where the activity of the user will be stored\n *    Only if this parameter is set, a level indicador is shown in the activity\n *\n *  data-pygen-order=\"random\"  //default\n *    This options is discarded if only one generator is defined in data-pygen.\n *    By default one activity from the ones defined in data-pygen is taken at random.\n *    However other behaviours can be defined as ordering. Assume 3 generators:\n *\n *    weighted: 0.2,0.6,0.2  Random but setting the probability at which every generator is used. Values must add 1.\n *                           In this example, most likely to generate a question from 2nd generator.\n *\n *    sequence: 3,5,8  1st generator 3 questions, 2nd generator 5 questions, 3rd generator 8 questions\n *                     and repeat in cicles if more than 3+5+8 questions are created\n *    sequence: 3,5,* 1st generator 3 questions, 2nd generator 5 questions, 3rd generator remaining questions\n *    sequence: 3,*,* start with 3 questions of the first generator and after that take at random questions from generator 2 and 3.\n *    sequence: 3,*(0.7),*(0.3) The same as above but with weights\n *\n *    Important:\n *      1. * are only allowed at the end of the sequence\n *      2. sequences will not be mantained over page reloads. So every time the page realoads, the sequence starts again.\n *\n *  data-pygen-goal:\n *     The condition to set the activity as completed. Many conditions can be set\n *     and if any of them is verified the goal flag is set.\n *     Different conditions are separated by ;. A condition takes 3 parameters\n *     <min_number_questions_answered>,<min_average_grade>,<current_level>\n *     \"5,6,4;10,5,*\" means\n *     5 or more questions answered, grade of 6 or more, current level 4 of more\n *     OR\n *     10 or more questions answered, grade of 5 or more, regardless of the current level\n *\n * data-pygen-celebrate=\"none|confetti\"\n *     Say whether to celebrate or not when the goal is reached!\n */\nconst polyfills_1 = require(\"./polyfills\");\nconst globals_1 = require(\"./globals\");\nconst utils_1 = require(\"./utils\");\nconst mqfy_1 = require(\"./mqfy\");\nconst findPyGenerators_1 = require(\"./findPyGenerators\");\n(0, polyfills_1.applyPolyfills)();\nconst onLoad = function () {\n    (0, globals_1.loadPageInfo)();\n    (0, mqfy_1.findQuillGroups)(); // Groups of quills\n    (0, findPyGenerators_1.findPyGenerators)(); // An interface for dynamic generated questions\n};\n// Inject required dependencies on the page\n// On jquery ready\n$(function () {\n    (0, utils_1.createLinkSheet)(globals_1.cfg.BASE_URL + \"/lib/mathquill.matrix.css\");\n    //check if iedibAPI is in page\n    if (window.iedibAPI) {\n        (0, utils_1.insertScript)(globals_1.cfg.BASE_URL + \"/lib/mathquill.matrix.min.js\", onLoad);\n    }\n    else {\n        (0, utils_1.insertScript)('https://piworld.es/iedib/assets/iedib-api.js', function () {\n            (0, utils_1.insertScript)(globals_1.cfg.BASE_URL + \"/lib/mathquill.matrix.min.js\", onLoad);\n        });\n    }\n});\n"],"names":["Object","defineProperty","exports","value","createSubmitButtonForGroup","bindSubmitActionButton","checking_1","require","globals_1","utils_1","LAST_AJAX","Date","getTime","gid","check_btn","extraActions","groupContainer","shared","qids","keys","map","e","parseInt","off","on","ev","preventDefault","now","console","error","promises","log","k","len","length","qid","editor","getStatus","cfg","STATUS","MODIFIED","ual","latex","has_empty_answers","checkMsg","getDefinition","right_answer","getWrong_attemps","MAX_ATTEMPTS","isPigen","showAnswer","getQType","QTYPES","M","Ms","score10","isComodiUsed","ans","increment_wrong","postObj","anse","atob","isNumeric","pfual","parseFloat","difference","maxError","rules","precision","Math","abs","copyPropsFromTo","pageInfo","getHash","setHash","MD5","formulation","bookId","chapterId","hash","push","$","ajax","type","url","CAS_URL","data","JSON","stringify","dataType","success","datos","correct","msg","extractMatrices","regexMatrices","tex","matrices","m","mat","split","forEach","alinia","linia","exec","has_empty_elements","matrix","rows","i","arow","cols","j","v","trim","lenmat","LevelIndicator","numLevels","this","container","levelIcons","elem","append","n","css","attr","removeAttr","visible","PwDialog","title","width","height","id","random","toString","substring","window","topBar","headerTitle","closeBtn","self","currentX","currentY","initialX","initialY","active","xOffset","yOffset","dragStart","touches","clientX","clientY","target","dragEnd","setTranslate","xPos","yPos","el","style","transform","drag","addEventListener","element","remove","removeEventListener","EditorDialog","editorPanel_1","qtype","P","editorPanel","EditorPanel","controlButtons","acceptBtn","cancelBtn","acceptFn","close","cancelFn","sanitizeLaTeX","focus","dispose","find","reflow","def","setDefinition","EditorBase","parent","status","UNMODIFIED","wrong_attemps","isAnswerShown","pigen","comodi","ansType","EditorCloze","dialog_1","ini","dlg_btn_el","quill_el_container","quill_el","check_el","mathInput","StaticMath","innerFields","__controller","textarea","html","removeClass","parts","lenv","msg2","addClass","revert","sharedDlg","dlg","answerHolder","prop","reflowLatex","show","EditorInput","editorDialog_1","quill_blocker","isBtn","S","MathField","handlers","edit","self2","RIGHT_ICON","WRONG_ICON","rescueBtn","evt","GETANSWER_URL","EditorMChoice","options","selectedIndex","floor","btn_group","btn_action","dropdown_menu","opt","dropdown_item","EditorMChoiceCheckbox","multipleAnswers","symbols","radios_group","radiosGroupId","allRadios","radioId","radio_wrapper","radio_item","radio_label","wsel","join","__importDefault","mod","__esModule","pwTabMenu_1","createToolbarButton_1","toolbar_config_1","standalone","panel","palettes","PwTabMenu","spanMathInput","feedback_el","items","default","button_meta","name","btnInfo","tabName","default_toolbar_tabs","tab","addTab","aButton","createToolbarButton","addContentsToTab","setVisible","indexOf","setTab","firstSelected","num_visible","found","toLowerCase","btn_meta","key","btn","icon","panell","controls","lenk","vars","varObj","minmax","min","max","control","val","alab","okButtton","varsmap","$c","real_latex","write","moveto","keystroke","panell_shown","$panel","tabs","currentTab","tabsPanel","contentsPanel","contents","visibility","children","default_toolbar_buttons","movefor","lat","latrow","keyboard_keys","createQuillFromObject","editorCloze_1","editorInput_1","editorMChoice_1","editorMChoiceCheckbox_1","$el","obj","created","spanEl","C","initial_latex","Array","isArray","get_qid","setStatus","findPyGenerators","actions_1","LevelIndicator_1","createQuill_1","goalChecker_1","mq_parsing_1","seqBasic_1","seqRandomWeighted_1","seqSequence_1","IB","each","eg","$eg","topPanel","centralPanel","bottomPanel","copyrightPanel","levelIndicator","category","HAS_IAPACE","currentLevel","iapace","inference","setLevel","goalChecker","goalRules","GoalChecker","accomplished","rawDataPygens","dataPygen","z","lenz","genpart","genname","genparams","paramspart","replace","t","lent","aparm","param_parts","sequenciador","SeqBasic","order","startsWith","SeqRandomWeighted","SeqSequence","checkBtn","comodiBtn","currentDatos","currentEditor","createDynamicMathquill","nextButton","showmeBtn","nextGenerator","next","PYGEN_URL","pregunta","json_raw","mq64","json_obj","parse","frame","findCreate","sum","h","processMqIni","r","lenr","epart","addScore","save","reached","Confetti","play","CORRECT","lin","comodiUsed","ccSpan","loadPageInfo","BASE_URL","WRONG","B","iedibAPI","getPageInfo","div","MathQuill","getInterface","config","d","reach","nrules","partial","crule","undecided","isNaN","grade","s","createQuillFromDataAttr","$0","$1","$2","nrows","ncols","mtex","aRow","endsWith","kk","lenkk","symbolsRaw","ra","rulesRaw","palettesRaw","findQuillGroups","hasClass","hasValue","ex","findQuills","setTimeout","applyPolyfills","prototype","callback","thisArg","TypeError","array","l","call","arr","filter","arg","Number","lpygens","definition","weights","vran","pop","total","old","w","pos","rnd","positions","terminalGen","undefined","placeholders","p","remainingLpygens","slice","def2","isWeighted","e2","typeRan","pointer","indx","md5_cmn","_","f","safe_add","bit_rol","md5_ff","md5_gg","md5_hh","md5_ii","createLinkSheet","createStyleSheet","insertScript","MathJax","typesetPromise","Hub","Queue","iter","cb","dict","source","props","charCodeAt","charAt","String","fromCharCode","V","g","Y","X","tag","document","createElement","src","async","head","appendChild","onload","getElementById","innerHTML","getElementsByTagName","href","link","rel","str","match","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","polyfills_1","mqfy_1","findPyGenerators_1","onLoad"],"sourceRoot":""}